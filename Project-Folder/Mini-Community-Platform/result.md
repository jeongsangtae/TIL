# 미니 커뮤니티 플랫폼 결과물

### FE

- 페이지
  - 사용자 페이지
    - 비로그인 상태, 일반 사용자가 볼 수 있는 페이지
      - 관리자 계정은 URL 이동은 가능
      - 관리자 계정으로 사용자 페이지에 넘어와도, 메인헤더는 관리자 페이지의 메인헤더가 적용됨
      - 비로그인 상태와 관리자 계정은 글쓰기, 댓글, 답글 추가 기능을 사용할 수 없고 단순하게 게시글 목록과 게시글 세부 내용만 볼 수 있도록 구성
    - 메인 페이지
      - 특별한 내용없이 텍스트가 보여지는 홈 페이지
    - 게시글 목록 페이지
      - 게시글 목록이 보여지는 페이지
      - 게시글 내용이 길어지면 뒤에 ... 으로 보여지도록 구성
      - 게시글 총 갯수, 게시글 추가 버튼 그리고 페이지네이션과 검색 기능 포함
      - 게시글 내용
        - 게시글 번호, 사용자 이름, 작성 날짜, 조회 수
        - 제목, 내용
      - 모바일 환경
        - 기본적으로 기능 차이는 없고, UI에서 조금 다르게 구성
        - 게시글 목록 페이지 제목과 게시글 총 갯수, 글쓰기 버튼이 한 줄로 보이도록 구성
        - 게시글 목록에서 게시글 번호 뒤에 큰 원을 통해서 번호를 좀 더 확실하게 알 수 있도록 구성
        - 미리보기 내용이 조금 더 짧게 보여지고, 그 뒤 내용은 동일하게 ...으로 보이도록 구성
        - 하단에 구성된 글쓰기 버튼은 보여지지않고, 검색 기능과 페이지네이션 기능만 보여지도록 구성
    - 게시글 세부 페이지
      - 게시글 세부 내용이 보여지는 페이지
      - 게시글을 수정할 수 있는 페이지로 이동할 수 있고, 게시글 삭제가 가능
        - 드롭다운 메뉴를 통해서도 수정과 삭제가 가능
        - 본인이 작성한 게시글만 수정, 삭제 가능
      - 댓글과 답글도 추가할 수 있고, 댓글과 답글의 총 갯수도 파악 가능
        - 본인이 작성한 댓글과 답글만 수정, 삭제 가능
      - 게시글 내용
        - 제목, 사용자 이름, 작성 날짜, 조회 수, 내용
        - 게시글 수정, 삭제 버튼, 드롭다운 메뉴 버튼 포함
      - 모바일 환경
        - 기능은 완전히 동일하고, UI만 망가지지 않도록 구성
    - 게시글 추가 페이지
      - 게시글의 제목과 내용을 작성해서, 게시글을 추가할 수 있는 페이지
      - 단순하게, 제목을 작성하는 부분과 내용을 작성하는 부분으로 구성
      - 내용을 작성하고 등록 버튼으로 제출하면 게시글이 추가되며, 취소를 누르면 세부 페이지로 다시 돌아갈 수 있게 구성
      - 모바일 환경
        - 기능은 완전히 동일하고, UI만 망가지지 않도록 구성
    - 게시글 수정 페이지
      - 해당 게시글을 작성한 사용자만 들어올 수 있는 페이지로, 게시글 세부 내용이 그대로 넘어와서 보여짐
      - 제목, 내용을 수정할 수 있고 사용자 이름은 그대로 유지
      - 등록, 취소 버튼으로 구성
      - 모바일 환경
        - 기능은 완전히 동일, UI만 망가지지 않도록 구성
    - 프로필 페이지
      - 로그인한 사용자가 작성한 게시글만 보여지는 페이지
      - 글쓰기 버튼을 제외하고, 게시글 목록 페이지와 동일하게 구성
      - 모바일 환경
        - 모바일 환경의 게시글 목록 페이지와 거의 유사하지만, 여기서도 글쓰기 버튼이 존재하지 않도록 구성
        - 데스크톱 환경과 마찬가지로 글쓰기 버튼이 없도록 구성
  - 관리자 페이지
    - 비로그인 상태, 일반 사용자 로그인으로는 접속할 수 없는 페이지
      - 관리자 계정만 접속할 수 있는 페이지로, URL로 이동이 불가능하고, URL로 이동하더라도 로그인이 필요하거나, 접근이 불가하다는 메시지가 보여짐
      - 비로그인 상태로 관리자 페이지에 접속하고 그 곳에서 로그인이 불가능
      - 사용자 페이지에서 관리자 계정으로 로그인해야만 이동할 수 있음
    - 메인 페이지
      - 특별한 내용없이 텍스트가 보여지는 홈 페이지
      - 단지, 관리자 페이지임을 알려주는 텍스트가 추가됨
    - 게시글 목록 페이지
      - 사용자 페이지에서 구성한 내용과 거의 동일하지만, 게시글 추가 버튼이 따로 없도록 구성
      - 관리자 페이지에서는 게시글 추가 불가
      - 모바일 환경
        - 데스크탑 환경과 마찬가지로 게시글 추가가 불가능하고, 그 외에 UI는 사용자 페이지의 게시글 목록 페이지와 동일
    - 게시글 세부 페이지
      - 사용자 페이지에서 구성한 내용과 거의 동일하지만, 게시글 수정 버튼이 따로 없고 게시글 삭제만 가능
      - 댓글과 답글 내용을 볼 수 있고, 댓글과 답글 추가는 하지 못하며 삭제만 가능
      - 댓글과 답글을 추가하는 입력창이 존재하지 않도록 구성
      - 본인이 작성한 여부와 상관없이 모든 게시글, 댓글, 답글 삭제 가능
      - 모바일 환경
        - 기능은 완전히 동일, UI만 망가지지 않도록 구성
    - 사용자 목록 페이지
      - 전체 사용자 수가 보여지도록 구성
      - 사용자의 이메일, 이름이 보여지고 우측에 삭제 버튼이 보여지도록 구성
      - 관리자는 삭제 버튼으로 해당 사용자를 삭제할 수 있도록 구성
      - 모바일 환경
        - 기능은 완전히 동일, UI만 망가지지 않도록 구성

<br />

- 컴포넌트
  - 사용자 페이지 컴포넌트
    - 메인 헤더 컴포넌트
      - 로그인 유지 상태를 확인하는 useEffect
        - fetch 함수를 사용해서 로그인 유지에 사용
      - 회원가입, 로그인 모달을 열고 닫는 메뉴 함수 등
      - 조건부로 className 구성하는 변수 구성
      - Link 컴포넌트를 사용해서 로고 구성
      - 다른 버튼은 별도의 컴포넌트로 나눠서 구성
      - 모바일 환경에서는 다른 버튼이 보여지도록 구성
    - 모달 컴포넌트
      - 백드롭과 모달로 구성
        - 모달은 dialog로 구성
      - 백드롭을 클릭하면 백드롭과 모달이 닫히도록 구성
      - 모달에서는 children을 사용해서 래퍼 형식으로 사용될 수 있도록 구성
    - 회원가입 컴포넌트
      - 1
    - 로그인 컴포넌트
    - 댓글 목록 컴포넌트
      - Comments
        - 1
      - Comment
        - 해당 컴포넌트에서 댓글 삭제 로직도 함께 구성
    - 댓글 추가 컴포넌트
    - 댓글 수정 컴포넌트
    - 답글 목록 컴포넌트
    - 답글 추가, 수정 컴포넌트
      - 답글 추가와 수정은 하나의 컴포넌트를 재사용해서 구성
    - 채팅 컴포넌트
  - 관리자 페이지 컴포넌트
    - 메인 헤더 컴포넌트
    - 댓글 목록 컴포넌트
      - AdminComments
      - AdminComment
    - 답글 목록 컴포넌트
      - AdminReplies
      - AdminReply
    - 인증 관련 컴포넌트
    - 채팅에서 사용되는 사용자 리스트 컴포넌트
      - 1
    - 채팅 컴포넌트
  - 재사용되는 컴포넌트
    - 네비게이션 링크 컴포넌트
      - NavLink 컴포넌트를 사용해서 버튼 클릭 시 페이지 이동이 되도록 구성
      - 조건부를 통해서 사용자 버튼은 사용자 페이지에서 보여지지 않도록 구성
      - 활성화된 버튼은 다른 CSS가 적용되어서 보여지도록 구성
    - 드롭다운 메뉴 컴포넌트
      - 드롭다운 메뉴를 열고 닫는 토글 함수
      - 모바일 환경에서 보여지는 드롭다운 메뉴 뒤로 오버레이가 존재하도록 구성
      - 로그인 유무에 따라서 다른 내용과 아이콘이 보여지도록 구성
      - 사용하는 환경에 따라서 다른 형태와 작동을 가지도록 구성
        - 데스크탑 환경
          - 커서를 올리면 드롭다운 메뉴 내용이 보이도록 구성
          - 커서를 치우면 드롭다운 메뉴 내용이 보이지 않도록 구성
        - 모바일 환경
          - 드롭다운 메뉴 버튼을 클릭하면 드롭다운 메뉴 내용이 펼쳐지도록 구성
          - 배경을 클릭해야 닫히도록 구성
    - 오버레이 컴포넌트
      - 모바일 환경의 메인헤더, 드롭다운 메뉴에서 쓰이는 컴포넌트로 메인헤더와 드롭다운 메뉴가 열렸을 때 뒷 배경에 백드롭 형식으로 보여지도록 구성
      - useEffect를 사용해서 오버레이 내용이 열리고 닫히는 것을 감지하도록 구성
        - 오버레이 컴포넌트를 열고 닫는 동작은 UI Context API에서 컨트롤 되도록 구성
      - portal을 사용해서 element 구조의 body 위치 위에 보여지도록 구성
        - index.html에서 구성한 overlays id 내용을 찾기 위해서 portalElement 변수를 추가하고, document.getElementById를 사용해서 일치하는 항목을 찾음
        - ReactDOM.createPortal JSX 코드에서 추가하고, div 내용과 portalElement 내용을 사용
      - children을 사용해서 래퍼 형식으로 사용할 수 있게 구성
    - 로딩 스피너 컴포넌트
      - 프론트엔드에서는 className만 추가하고, 4개의 div로 구성
      - CSS에서 링 모양으로 돌아가도록 구성
      - 데이터를 불러올 때, 오래 걸리면 로딩 스피너가 보이도록 구성
    - 페이지네이션 컴포넌트
      - 1
    - 검색 컴포넌트
    - 접근 불가 관련 인증 컴포넌트
      - Authentication
        - 사용자 페이지에서 사용하는 인증 컴포넌트로 게시글 추가, 게시글 수정, 프로필 페이지에서 사용된다.
        - 게시글 추가, 프로필에서 인증
          - 사용자 로그인인 지 확인하고, 사용자 로그인이라면 게시글 데이터가 존재하는 지 확인
          - 게시글 데이터가 존재하지 않는다면 바로 children 내용으로 넘어가서 게시글 추가 또는 프로필 페이지가 보여지도록 구성
        - 게시글 수정
          - 사용자 로그인이 확인되고 게시글 데이터가 존재하는 경우, 게시글에 저장된 이메일과 로그인한 사용자 이메일이 일치하는 지 비교하고, 일치하면 children을 사용해서 수정하는 페이지로 이동
          - 사용자 로그인이 확인되고 게시글 데이터가 존재하지만, 이메일이 일치하지 않는다면 에러 페이지로 이동하고, 접근 권한이 없다는 메시지가 출력
        - 처음 단계인 사용자 로그인을 확인하고, 사용자 로그인이 아닌 경우
          - 비로그인 상태의 경우
            - 에러 페이지로 이동되고, 사용자 전용 기능이라는 메시지가 출력
          - 사용자 로그인이 아닌, 관리자 로그인의 경우
            - 에러 페이지로 이동되고, 관리자 계정으로는 사용할 수 없다는 메시지가 출력
      - AdminAuthentication
        - 관리자 페이지에서 사용하는 인증 컴포넌트로 관리자 홈 페이지, 게시글 목록 페이지, 사용자 페이지에서 사용
        - 로그인을 한 경우
          - 관리자 로그인인 지 확인하고, 일치하면 children 내용으로 넘어가서 문제없이 관리자 페이지 내용을 사용할 수 있도록 구성
          - 관리자 로그인이 아닌 경우에는 에러 페이지로 이동되고, 접근 권한이 없다는 메시지를 출력
        - 로그인을 하지 않은 경우
          - 에러 페이지로 이동되고, 로그인이 필요하다는 메시지를 출력
      - NoAccess
        - Authentication와 AdminAuthentication 컴포넌트에서 넘어오는 메시지를 출력하는 컴포넌트
        - 제목과 설명으로 구성
    - 존재하지 않는 페이지 관련 컴포넌트
      - NotFound
        - 구성되지 않은 페이지로 이동하려고 했을 때 보여지는 컴포넌트 내용
        - URL을 통해서 존재하지 않은 페이지에 이동하려고 하면 리소스를 찾을 수 없다는 메시지와 함께 보여지는 에러 페이지 내용
        - Link 컴포넌트를 사용해서, 에러 메시지와 홈으로 돌아가는 버튼으로 구성
    - 채팅 입력 컴포넌트
    - 채팅 스크롤에 사용되는 커스텀 훅 컴포넌트
      - 채팅 스크롤, textarea 자동 크기 조절 내용으로 구성
    - 에러 핸들링 커스텀 훅
    - 인증 관련 Context API
    - UI 관련 Context API

<br />

- 메인헤더, 채팅, 모달
  - 사용자 페이지
    - 메인헤더
      - 모든 페이지에서 보여지도록 구성
      - 로고, 홈, 게시글, 드롭다운 메뉴 아이콘 또는 사용자 아이콘으로 구성
        - 로고
          - 게시글 목록 페이지로 이동
        - 홈
          - 홈 페이지로 이동
        - 게시글
          - 게시글 목록 페이지로 이동
        - 드롭다운 메뉴 아이콘
          - 비로그인 상태에서 보여지는 아이콘
          - 회원가입과 로그인 버튼으로 구성
        - 사용자 아이콘
          - 로그인 상태에서 보여지는 아이콘
          - 사용자 이름 버튼과 로그아웃 버튼으로 구성
          - 사용자 이름이 보여지는 버튼 클릭 시, 프로필 페이지로 이동
        - 모드 전환 버튼
          - 로그인 유무에 상관없이 보여지도록 구성
          - 버튼을 클릭하면 라이트 모드 또는 다크 모드로 변경
          - 버튼이 좌우로 변경되며, 적용되는 모드에 따라서 텍스트도 변경
        - 모바일 환경
          - 로고를 제외한 내용이 숨겨지며, 햄버거 모양의 버튼을 통해서 열 수 있도록 구성
          - 햄버거 버튼 클릭 시 홈, 게시글, 아이콘이 보여지고, 아이콘 클릭 시에 드롭다운 메뉴 내용이 보여짐
      - 홈과 게시글 페이지 이동 시에 버튼에 표시가 되도록 구성
      - 관리자가 사용자 페이지에 접속해도 메인헤더는 관리자 페이지의 메인헤더가 보이도록 구성
    - 채팅
      - 메인헤더와 마찬가지로 모든 페이지에서 보여지도록 구성
        - 사용자로 로그인했을 때만 보여지며, 비로그인 했을 때는 보여지지 않음
        - 관리자 로그인으로 접속하고 사용자 페이지에 이동해도 채팅 버튼이 보여지지 않음
      - 우측 하단에 위치하며, 클릭 시 열리면서 채팅 입력 가능
      - 관리자와의 채팅만 가능하며, 다른 사용자와 채팅은 불가능
        - 이 내용은 추후에 변경하는 것도 고려중
    - 모달
      - 회원가입과 로그인에 사용되도록 구성
      - 회원가입
        - 이메일
        - 이메일 확인
        - 이름
        - 비밀번호
        - 가입 버튼
        - 로그인 모달로 변경하는 버튼
      - 로그인
        - 이메일
        - 비밀번호
        - 회원가입 모달로 변경하는 버튼
  - 관리자 페이지
    - 메인헤더
      - 모든 페이지에서 보여지도록 구성
      - 로고, 홈, 게시글, 사용자 아이콘으로 구성
        - 로고
          - 관리자 페이지의 게시글 목록 페이지로 이동
        - 홈
          - 홈 페이지로 이동
        - 게시글
          - 관리자 페이지의 게시글 목록 페이지로 이동
        - 사용자 아이콘
          - 로그아웃 버튼으로만 구성
          - 관리자는 따로 게시글 추가를 하지 않기 때문에, 프로필 페이지가 불필요하다고 판단하고 구성하지 않음
          - 로그아웃 버튼 클릭 시, 사용자 페이지의 홈으로 이동하도록 구성
        - 모드 전환 버튼
          - 사용자 페이지와 동일하게 구성
        - 모바일 환경
          - 사용자 페이지의 메인헤더와 동일하게 로고를 제외한 내용이 숨겨지며, 햄버거 모양의 버튼을 통해서 열 수 있도록 구성
          - 햄버거 버튼 클릭 시 홈, 게시글, 사용자, 아이콘이 보여지고, 아이콘 클릭 시에 드롭다운 메뉴 내용이 보여짐
    - 채팅
      - 메인헤더와 마찬가지로 모든 페이지에서 보여지도록 구성
        - 관리자로 로그인했을 때만 보여지며, 당연하게도 비로그인 상태에서는 관리자 페이지에 접속할 수 없기 때문에 보여지지 않음
      - 우측 하단에 위치하고, 클릭 시 사용자 리스트가 뜨도록 구성
      - 사용자 리스트에서 모든 사용자를 볼 수 있고, 검색도 가능하며, 사용자와 나눈 마지막 메시지가 보여지도록 구성
        - 사용자 이름과 이메일로 모두 검색이 가능하고, 이름과 이메일에서 중복된 내용이 함께 보여지도록 구성
        - 마지막으로 나눈 메시지가 너무 길게 작성된 경우, 미리보기로 일정 내용만 보여지고 그 뒤 내용은 ...으로 보이도록 구성
      - 사용자 리스트에서 클릭 시, 사용자와 채팅이 가능한 채팅창이 열리고 채팅이 가능하게 구성
      - 채팅창에서 어떤 사용자와 채팅하는 지 알 수 있도록 최상단 중앙에 이름이 표시되고, 왼쪽에는 채팅창을 닫을 수 있는 버튼으로 구성

### BE

- 사용자 관련 라우터
  - board-routes
    - 게시글 관련 라우터
      - 게시글 목록 조회
        - 페이지네이션과 관련된 내용 구성
        - 검색 필터와 관련된 내용 구성
          - 제목, 내용, 이름 기준으로 검색될 수 있도록 구성
        - 게시글 번호, 제목, 작성자 이름, 내용, 작성 날짜, 조회 수
      - 게시글 추가
        - 마지막에 추가된 게시글을 확인해서, 게시글 번호에 +1이 되도록 구성
        - 작성 날짜를 추가하는데 이 때, KST 기준으로 추가되도록 구성
        - 작성한 내용, 게시글 번호, 작성자 이름, 작성자 이메일, 조회 수, 작성 날짜로 구성
      - 게시글 세부 내용 조회
        - 게시글 번호를 바탕으로 게시글 세부 내용 출력
      - 게시글 조회 수 증가
        - 게시글을 클릭하면 조회수를 1씩 증가시키도록 구성
      - 게시글 수정
        - 게시글 수정 시에도 KST 기준으로 날짜가 수정되도록 구성
        - 게시글 작성자인 지 확인하기 위해서 게시글에 추가된 이메일과 저장된 이메일을 확인하도록 구성
        - 마지막에 저장된 게시글 정보를 가져와서 마지막 번호에 +1해서 업데이트
        - 제목, 내용, 날짜를 새롭게 업데이트
        - 업데이트한 후에 다른 게시글 번호를 1씩 감소
      - 게시글 삭제
        - 게시글 번호를 확인해서 DB에서 게시글 조회하도록 구성
        - 게시글에 저장된 이메일과 로그인한 사용자의 이메일을 확인해서 게시글 삭제 권한을 확인하도록 구성
        - 게시글 삭제 전에 해당 게시글에 작성된 댓글, 답글 모두 삭제되도록 구성
        - 모든 댓글, 답글을 삭제한 후에 게시글 삭제
        - 게시글 삭제 후에 게시글 번호를 재정렬하기 위해서 삭제하는 게시글 뒤의 번호를 1씩 감소
    - 댓글 관련 라우터
      - 댓글 목록 조회
        - 게시글 번호를 프론트엔드에서 전달받고, 게시글 번호로 작성한 게시글을 찾아서 게시글의 \_id를 비교해 댓글 찾도록 구성
      - 댓글 추가
        - 게시글 번호를 전달받아서 게시글 조회
        - 댓글을 추가할 때, 게시글 \_id, 사용자 이름, 이메일, 내용, 날짜로 구성
      - 댓글 수정
        - 댓글 \_id를 전달 받아서 일치하는 댓글을 찾도록 구성
        - 댓글에 저장된 이메일과 로그인한 사용자의 이메일이 일치하는 지 확인
        - 댓글 \_id, 수정한 내용, 수정한 날짜가 업데이트되도록 구성
      - 댓글 삭제
        - 댓글 \_id를 전달받아서 일치하는 댓글을 찾도록 구성
        - 댓글에 저장된 이메일과 로그인한 사용자의 이메일이 일치하는 지 확인
        - 댓글 \_id와 일치하는 답글을 먼저 삭제하고, 그 이후에 댓글이 삭제되도록 구성
    - 답글 관련 라우터
      - 답글 목록 조회
        - 댓글 \_id를 전달받고 DB를 통해 일치하는 모든 답글을 찾도록 구성
      - 답글 추가
        - 게시글 번호와 댓글 \_id를 전달받아서 해당 게시글을 조회하고, 댓글도 조회하도록 구성
        - 게시글 번호, 댓글 \_id, 작성자 이름, 작성자 이메일, 내용, 날짜가 저장되도록 구성
      - 답글 수정
        - 답글 \_id를 전달받아서 일치하는 항목을 찾도록 구성
        - 답글에 저장된 이메일과 로그인한 사용자의 이메일이 일치하는 지 확인하고, 일치하는 경우에만 수정할 수 있도록 구성
        - 답글 \_id, 수정한 내용, 수정한 날짜가 업데이트되도록 구성
      - 답글 삭제
        - 답글 \_id를 전달받아서 일치하는 답글을 찾도록 구성
        - 답글에 저장된 이메일과 로그인한 사용자의 이메일이 일치하는 지 확인
        - DB에 저장된 답글 \_id와 프론트엔드에서 전달받은 답글 \_id를 비교해서 일치하는 항목을 삭제
  - user-routes
    - 회원가입
      - 입력한 이메일, 이메일 확인, 사용자 이름, 비밀번호를 가져오도록 구성
      - 이메일, 이메일 확인, 이름, 패스워드가 올바른 지 확인
      - 이메일과 이메일 확인이 일치하는 지 확인, 이메일에 @가 들어갔는 지 확인, 이름은 5글자 이하, 비밀번호는 6글자 이상으로 구성되었는 지 확인하도록 구성
      - 이름이 5글자를 넘을 경우, 5글자까지 입력할 수 있다고 메시지 전달
      - 비밀번호가 6글자 미만일 경우, 6글자 이상 입력하라는 메시지 전달
      - 중복된 이메일인 지 확인하는 내용 구성
        - 중복일 경우, 알려주도록 메시지 전달
      - 비밀번호를 저장할 때 해시해서 저장하도록 구성
      - 사용자 정보를 저장할 때 입력한 이메일, 이름, 해시된 비밀번호가 저장되도록 구성
    - 로그인
      - 입력한 이메일, 비밀번호를 가져오도록 구성
      - 입력한 이메일이 DB에 존재하는 지 확인
      - 이메일이 존재하지 않거나, 비밀번호가 일치하지 않는 경우 오류 메시지를 전송하도록 구성
      - 입력한 비밀번호와 해시된 비밀번호가 일치하는 지 확인
        - 일치하지 않는 경우 오류 메시지 전송
      - 이메일과 비밀번호가 모두 일치할 경우, JWT 토큰을 생성해서 쿠키에 저장
        - 관리자 이메일일 경우, admin을 저장
        - 관리자 이메일을 제외한 이메일은 user로 저장
      - 로그인 시에 액세스 토큰, 리프레쉬 토큰 발글
        - \_id, 이름, 이메일, 역할 저장
        - 액세스 토큰 만료시간은 2시간으로 저장
        - 리프레쉬 토큰 만료시간은 6시간으로 저장
      - 환경변수에서 NODE_ENV 항목을 확인하고, production일 경우 true
        - development일 경우 false
      - 쿠키에 액세스 토큰, 리프레쉬 토큰 저장
        - secure
          - 환경변수인 NODE_ENV 항목에 따라서 동적으로 들어가도록 구성
          - 배포 환경은 true, 로컬 환경은 false
        - httpOnly
          - true로 설정
        - sameSite
          - 환경변수인 NODE_ENV 항목에 따라서 None 또는 Lax로 구성
          - 배포 환경은 None, 로컬 환경은 Lax
        - maxAge
          - 액세스 토큰은 2시간, 리프레쉬 토큰은 6시간
    - 액세스 토큰
      - jwt-auth 내용에서 액세스 토큰을 확인
    - 리프레쉬 토큰
      - jwt-auth 내용에서 리프레쉬 토큰을 확인
    - 리프레쉬 토큰 만료시간
      - jwt-auth 내용에서 리프레쉬 토큰 만료시간을 확인
    - 로그인 성공
      - 액세스 토큰 라우터와 동일하지만, 명확하게 알 수 있도록 구성해준 내용
    - 로그아웃
      - 환경변수에서 NODE_ENV 항목을 확인해서 true, false를 전달
      - clearCookie를 사용해서, 쿠키에서 토큰 삭제
        - 액세스 토큰, 리프레쉬 토큰 동일하게 구성
        - secure
          - 쿠키 설정 시 사용한 옵션과 동일하게 배포 환경은 true, 로컬은 false
        - sameSite
          - secure과 마찬가지로 쿠키 설정 시 사용한 옵션과 동일하게 구성
    - 프로필
      - 게시글 목록을 조회하는 내용과 거의 유사하지만, 검색 기능에서 차이를 둠
        - 게시글 목록과 동일하게 제목, 내용, 이름 기준으로 검색될 수 있도록 구성
      - 로그인한 사용자가 작성한 게시글만 보여주기 때문에 검색할 때 사용자 이메일을 기반으로 필터링 되도록 구성
        - 게시글 목록에서는 전체 내용에서 검색하지만, 프로필 페이지의 게시글 목록은 로그인한 사용자가 작성한 게시글만 보여주므로, 검색할 때는 사용자가 작성한 게시글 내에서만 보여주도록 구성
  - user-chat-routes
    - 채팅 메시지 조회
      - 로그인한 사용자의 \_id를 전달받도록 구성
      - 전달받은 사용자 \_id를 사용해서 채팅 메시지를 가져오도록 구성
    - 채팅 추가
      - 로그인한 사용자의 \_id를 전달받도록 구성
      - 채팅을 입력한 사용자의 이메일, 입력한 채팅 내용, 사용자 유형을 전달받도록 구성
      - 사용자 \_id, 사용자 이메일, 내용, 사용자 유형, 채팅 입력 날짜가 저장되도록 구성
        - 날짜는 KST 기준으로 저장되도록 구성
      - 새로운 메시지를 저장하고 socket.io를 통해서 채팅창에 보여지도록 구성
      - socket.io 인스턴스를 가져오고, 사용자 ID 기반으로 채팅방 ID 생성하고 채팅방에 메시지 전송
- 관리자 관련 라우터
  - admin-routes
    - 게시글 관련 라우터
      - 게시글 목록 조회
        - 사용자 페이지와 동일하게 구성
        - 페이지네이션과 관련된 내용 구성
        - 검색 필터와 관련된 내용 구성
          - 제목, 내용, 이름 기준으로 검색될 수 있도록 구성
        - 게시글 번호, 제목, 작성자 이름, 내용, 작성 날짜, 조회 수
      - 게시글 세부 내용 조회
        - 게시글 번호를 바탕으로 게시글 세부 내용 출력
      - 게시글 삭제
        - 게시글 번호를 확인해서 DB에서 게시글 조회하도록 구성
        - 게시글 삭제 전에 해당 게시글에 작성된 댓글, 답글 모두 삭제되도록 구성
        - 모든 댓글, 답글을 삭제한 후에 게시글 삭제
        - 게시글 삭제 후에 게시글 번호를 재정렬하기 위해서 삭제하는 게시글 뒤의 번호를 1씩 감소
    - 댓글 관련 라우터
      - 댓글 목록 조회
        - 게시글 번호를 프론트엔드에서 전달받고, 게시글 번호로 작성한 게시글을 찾아서 게시글의 \_id를 비교해 댓글 찾도록 구성
      - 댓글 삭제
        - 댓글 \_id를 전달받아서 일치하는 댓글을 찾도록 구성
        - 댓글 \_id와 일치하는 답글을 먼저 삭제하고, 그 이후에 댓글이 삭제되도록 구성
    - 답글 관련 라우터
      - 답글 목록 조회
        - 댓글 \_id를 전달받고 DB를 통해 일치하는 모든 답글을 찾도록 구성
      - 답글 삭제
        - 답글 \_id를 전달받아서 일치하는 답글을 찾도록 구성
        - DB에 저장된 답글 \_id와 프론트엔드에서 전달받은 답글 \_id를 비교해서 일치하는 항목을 삭제
    - 사용자 관련 라우터
      - 사용자 목록 조회
        - 이메일 기준으로 관리자 계정을 제외한 모든 사용자 계정을 찾도록 구성
      - 사용자 삭제
        - 삭제하려는 사용자 이메일 정보를 전달받도록 구성
        - 사용자 이메일로 일치하는 사용자 찾도록 구성
        - 삭제하려는 사용자 이메일로, 사용자가 작성한 댓글 찾도록 구성
          - 삭제하려는 댓글 \_id를 모두 추출
          - 추출한 댓글 \_id를 활용하여 답글에서 일치하는 항목을 모두 찾아서 삭제
          - 사용자가 작성했던 댓글에 달린 모든 답글을 삭제하는 과정
        - 삭제하려는 사용자 이메일로, 사용자가 작성한 게시글 찾도록 구성
          - 삭제하려는 게시글 \_id를 모두 추출
          - 추출한 게시글 \_id를 활용하여 사용자가 작성한 게시글에 달린 댓글과 답글 삭제
          - 게시글을 삭제하기 전에 게시글에 추가된 모든 댓글과 답글을 삭제하는 과정
          - 그 이후에 게시글 삭제을 삭제하고 게시글 번호 재배열
        - 사용자가 삭제된 후에 사용자가 관리자 나눈 모든 채팅을 삭제
        - 사용자가 작성했던 모든 댓글, 답글 삭제
          - 다른 사용자의 게시글에 남긴 댓글, 답글 포함해서 삭제
        - 마지막으로 사용자 삭제
  - admin-chat-routes
    - 사용자와 나눈 마지막 채팅 메시지 조회
      - 사용자 \_id를 전달받도록 구성
      - 전달받은 사용자 \_id를 활용하여 날짜 기준으로 내림차순 정렬해서 마지막 메시지를 가져오도록 구성
    - 채팅 메시지 조회
      - 사용자 \_id와 로그인한 관리자 \_id를 전달받도록 구성
      - 사용자 \_id 내용을 활용해서 해당 유저와 관리자가 주고받은 모든 메시지를 날짜순으로 정렬해서 가져오도록 구성
      - 관리자 \_id는 현재는 따로 사용하고 있지 않지만, 나중을 위해서 남겨둔 상태
    - 채팅 추가
      - 로그인한 관리자의 \_id를 전달받도록 구성
      - 채팅을 주고 받는 사용자의 \_id, 사용자 이름, 로그인한 관리자 이메일, 작성한 내용, 사용자 유형을 전달받도록 구성
      - 사용자 \_id, 사용자 이름, 관리자 \_id, 관리자가 로그인한 이메일, 내용, 사용자 유형, 채팅 입력 날짜가 저장되도록 구성
        - 날짜는 KST 기준으로 저장되도록 구성
      - 사용자 채팅과 마찬가지로 메시지를 저장하고, socket.io를 통해서 채팅방에 보여지도록 구성
      - socket.io 인스턴스를 가져오고, 사용자 ID 기반으로 채팅방 ID 생성하고 채팅방에 메시지 전송
- 그 외 내용
  - app
    - 모듈 및 패키지 import
      - path, express, dotenv, http, Socket.io
      - 서버에서 사용하는 path, express, dotenv 같은 기본 모듈과 http, socket.io를 불러옴
      - dotenv는 환경 변수를 로드하고 socket.io는 실시간 통신을 가능하게 함
    - 라우트 파일 및 피들웨어 import
      - db, boardRoutes, userRoutes, adminRoutes, userChatRoutes, adminChatRoutes, cors, cookieParser
      - 라우트와 미들웨어를 불러오고, cookieParser는 쿠키 파싱, cors는 CORS 설정
    - 환경 변수 설정
      - dotenv.config와 port 설정
        - port는 환경 변수에서 설정된 port 또는 3000으로 설정
      - .env 파일에서 환경 변수를 불러오고, 기본 포트 설정
    - 미들웨어 설정
      - express.json, cookieParser
      - express.json()을 사용해 JSON 형식의 요청 본문을 파싱하고, cookieParser를 이용해 쿠키 처리
    - CORS 설정
      - corsURL을 통해서 환경 변수에서 설정한 내용 또는 localhost:5173이 요청되도록 구성
      - cors 설정에서 origin은 corsURL이 들어가고, credentials는 true로 구성
      - 환경 변수로 설정한 CORS URL을 기준으로 cors 미들웨어를 사용하여 서버가 특정 도메인에서 요청을 허용하게 됨
    - 라우트 연결
      - 각 라우터를 Express 앱에 연결하여 라우터에서 사용중인 API 경로 요청을 처리할 수 있음
    - 프론트엔드 파일 정적 제공 및 라우팅
      - 정적 파일을 제공하여 프론트엔드 배포 파일을 연결하고, 프론트엔드의 모든 요청을 index.html로 라우팅함
      - SPA 라우팅을 위해 사용됨
    - 에러 처리
      - 잘못된 경로로의 요청은 404 에러 페이지로 렌더링하고, 서버 오류는 500 페이지로 렌더링
    - Socket.io 설정
      - HTTP 서버와 Socket.io 서버를 설정하고, io 객체를 Express 앱에 저장하여 라우트 함수에서도 접근할 수 있게 해줌
      - cors 설정에서 origin은 corsURL을 사용하고, methods는 GET과 POST, credentials는 true를 사용
    - Socket.io 이벤트
      - socket.io 연결 시 연결됨을 알려주도록 구성
        - connection을 사용해서 연결됨을 확인
      - 채팅방을 열면 사용자 \_id로 방을 생성하고, 입장될 수 있도록 구성
        - joinRoom을 통해서 채팅방 입장
      - 입장 시에 백엔드 콘솔에 사용자 \_id, 사용자 타입, 방 번호가 보이도록 구성
      - 연결이 끊어지면 연결이 끊어짐을 알려주도록 구성
        - disconnect을 사용해서 연결 끊김 확인
    - MongoDB 연결 및 서버 실행
      - MongoDB에 연결이 성공하면 서버를 실행하고, 연결 실패 시 오류 메시지를 출력
      - server.listen을 통해서 서버 실행하고 포트 번호가 백엔드 콘솔에 표시되도록 구성
  - database
    - MongoDB import
    - MongoClient 사용
    - MongoDB 연결을 위한 URI 내용 구성
    - MongoDB에 연결하고 DB 인스턴스를 설정하는 함수 구성
      - MongoDB 연결에 사용되는 URI
      - 내가 생성한 DB에 연결
        - ex) mini-community-platform
    - DB 인스턴스를 반환하는 함수를 구성
      - DB 연결 설정이 되지 않을 경우 오류 발생
    - DB 연결 함수와 DB 인스턴스 반환 함수 내보내도록 구성
      - 라우터에서 사용되는 getDb가 여기서 가져오는 내용
  - jwt-auth
    - 액세스 토큰 검증 함수
      - 환경변수를 통해서 액세스 토큰 키를 가져오고, 쿠키에서 액세스 토큰을 가져오도록 구성
      - 가져온 액세스 토큰을 검증하고 해독된 데이터를 얻도록 구성
      - DB에서 토큰에 포함된 이메일을 통해서 사용자 조회
        - 해독된 데이터의 이메일과 DB에 저장된 이메일을 확인해서 일치하는 사용자를 찾도록 구성
      - 조회한 사용자 정보에서 비밀번호를 제외한 나머지 사용자 정보만 가져오도록 구성
      - 응답 데이터에 비밀번호를 제외한 사용자 정보와 토큰 만료 시간, 사용자 역할을 추가해서 반환하도록 구성
    - 리프레쉬 토큰 함수
      - 액세스 토큰을 새로 발급하는 함수로, 환경변수에서 액세스 토큰 키와 리프레쉬 토큰 키를 가져옴
      - 쿠키에서 리프레쉬 토큰을 가져오고, 토큰을 검증한 후에 해독된 데이터를 얻도록 구성
      - 해독된 데이터의 이메일과 DB에 저장된 이메일을 확인해서 일치하는 사용자를 찾도록 구성
      - 새로운 액세스 토큰을 발급
        - 찾은 사용자의 \_id, 이름, 이메일 내용을 페이로드로 전달
      - NODE_ENV 환경변수를 확인해서 true, false 동적으로 전달
      - 새로 발급한 액세스 토큰을 쿠키에 저장
        - secure
          - NODE_ENV 환경변수에 따라서 동적으로 구성
        - httpOnly
          - true로 구성
        - sameSite
          - NODE_ENV 환경변수에 따라서 동적으로 구성
    - 리프레쉬 토큰 만료 시간 반환하는 함수
      - 리프레쉬 토큰 키를 가져오고, 쿠키에서 리프레쉬 토큰을 가져오도록 구성
      - 리프레쉬 토큰을 검증하고 해독된 데이터를 얻도록 구성
      - 토큰 만료 시간을 응답 데이터로 반환하도록 구성
  - error-handler
    - 라우터에서 사용되는 try-catch문의 catch 부분에 사용되는 헬퍼 함수
    - 반복되는 에러 메시지 내용을 여러 라우터에서 재사용할 수 있도록 만든 파일

<br />

### DB

- posts
  - 게시글 저장을 위한 posts 컬렉션
  - 구성 속성
    - \_id
      - MongoDB에서 데이터 생성 시에 자체적으로 추가하는 항목
      - 중복되는 일없이 추가됨
    - title
      - 사용자가 게시글을 추가할 때 입력한 제목
    - content
      - 사용자가 게시글을 추가할 때 입력한 내용
    - postId
      - 게시글 번호로 URL에서 구분하는 데 사용됨
      - 1부터 시작해서 새로운 게시글이 추가될 때 1씩 증가해서 저장되는 항목
      - 게시글 수정 시에는 해당 번호가 삭제되고, 중간에 비는 번호가 없도록 전체 번호가 1씩 줄어들며 수정한 게시글이 마지막에 저장된 게시글 번호가 됨
    - name
      - 게시글을 추가한 사용자의 이름을 저장
    - email
      - 게시글을 추가한 사용자의 이메일을 저장
    - count
      - 게시글 조회 수
      - 게시글 세부 페이지로 이동할 때마다 1씩 증가되는 항목
    - date
      - 게시글을 추가할 때, 추가하는 날짜를 저장
      - 게시글을 수정할 때는 수정하는 날짜로 변경되어 저장
      - 저장되는 내용은 XXXX.XX.XX로 저장
        - ex 1) 1월에 새롭게 추가하는 게시글은 XXXX.1.XX가 아닌, XXXX.01.XX로 저장
        - ex 2) 1월 1일에 새롭게 추가하는 게시글은 XXXX.01.01
        - 한자리 수 월, 일이여도 두자리 수의 월, 일로 저장되도록 설정

<br />
  
- users
  - 회원가입을 통해 가입한 사용자 정보를 저장하는 users 컬렉션
  - 구성 속성
    - \_id
      - MongoDB에서 데이터 생성 시에 자체적으로 추가하는 항목
    - email
      - 사용자가 가입할 때 입력한 이메일을 저장
      - "@"가 필수적으로 들어갈 수 있도록 구성
    - name
      - 사용자가 가입할 때 입력한 이름을 저장
      - 5자리까지만 입력할 수 있도록 구성
    - password
      - 사용자가 가입할 때 입력한 패스워드를 해싱해서 저장
      - 6자리이상 입력하도록 구성

<br />
  
- comments
  - 댓글 저장을 위한 comments 컬렉션
  - 구성 속성
    - \_id
      - MongoDB에서 데이터 생성 시에 자체적으로 추가하는 항목
    - post_id
      - 댓글이 추가되는 게시글의 \_id 정보를 저장
    - name
      - 댓글을 추가하는 사용자의 이름을 저장
    - email
      - 댓글을 추가하는 사용자의 이메일을 저장
    - content
      - 사용자가 입력한 댓글 내용을 저장
    - date
      - 댓글을 추가할 때, 추가하는 날짜를 저장
      - 댓글을 수정할 때는 수정하는 날짜로 변경되어 저장
      - 게시글과 마찬가지로 저장되는 내용은 XXXX.XX.XX로 저장

<br />

- replies
  - 답글 저장을 위한 replies 컬렉션
  - 구성 속성
    - \_id
      - MongoDB에서 데이터 생성 시에 자체적으로 추가하는 항목
    - post_id
      - 답글이 추가되는 게시글의 \_id 정보를 저장
    - comment_id
      - 답글이 추가되는 댓글의 \_id 정보를 저장
    - name
      - 답글을 추가하는 사용자의 이름을 저장
    - email
      - 답글을 추가하는 사용자의 이메일을 저장
    - content
      - 사용자가 입력한 답글 내용을 저장
    - date
      - 답글을 추가할 때, 추가하는 날짜를 저장
      - 답글을 수정할 때는 수정하는 날짜로 변경되어 저장
      - 게시글, 댓글과 마찬가지로 저장되는 내용은 XXXX.XX.XX로 저장

<br />

- chatMessages
  - 채팅 메시지 저장을 위한 chatMessages 컬렉션
  - 구성 속성
    - \_id
      - MongoDB에서 데이터 생성 시에 자체적으로 추가하는 항목
    - user_id
      - 채팅을 입력한 사용자의 \_id를 저장
    - email
      - 채팅을 입력한 사용자의 이메일을 저장
    - content
      - 사용자가 입력한 채팅 내용을 저장
    - userType
      - 채팅을 입력한 사용자의 역할을 저장
    - date
      - 채팅을 추가할 때, 추가하는 날짜를 저장
      - 채팅이 저장되는 내용은 XXXX.XX.XX XX:XX:XX로 저장
      - 모두 두자리 수로 저장되도록 구성
