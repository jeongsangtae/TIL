# Float Chat

### Float Chat 계기

- 계기
  - 미니 커뮤니티 플랫폼 프로젝트를 마무리하고 React와 TypeScript 그리고 WebSocket을 활용해 새로운 포트폴리오 프로젝트를 제작하고 싶어서 찾아본 결과, 실시간 통신 애플리케이션 내용이 단계별로 여러 내용을 연습할 수 있을 것 같기에 선택하게 됨

<br />

### Float Chat 제작 툴

- 제작 툴 선택 과정
  - React와 Next.js 중에 고민했으나, React를 더 깊이 익히는 것이 중요하다고 판단하여 이번 프로젝트에서도 React를 선택했으며, 상태 관리는 기존의 Context API 대신 Zustand를 사용해 더 단순하고 효율적인 관리 방식을 도입할 계획이고, 코드 안정성을 높이기 위해 TypeScript를 활용하기로 결정했고, 그리고 백엔드는 Express JS가 가장 익숙하고 자신 있기 때문에 선택하게 되었고, DB는 MySQL이 현재 프로젝트에서 사용하기에 적합하다고 생각이 되지만, 가장 많이 다뤄본 MongoDB가 배포 과정에서 더 편리하다고 생각되어 최종적으로 MongoDB를 선택하게 되었다.
- 최종 선택
  - FE : React + TypeScript (vite)
    - 상태 관리 : Zustand
  - BE : Express JS
  - DB : MongoDB

<br />

### Float Chat UI 설계

- UI 설계
  - 페이지 설계
    - 메인 페이지
      - 비로그인 상태
        - 기본적으로 로그인이 필요하다는 텍스트 메시지 출력
        - 회원가입 또는 로그인 버튼
          - 모달을 통해 보여지도록 구성 예정
        - 임의의 버튼 클릭 시 회원가입 또는 로그인 하러가기 모달 표시
          - 회원가입 또는 로그인 모달이 보여지고, 둘 중 하나 클릭 시 해당 모달로 전환
      - 로그인 상태
        - 다이렉트 메시지로 이동하는 버튼
          - 친구 버튼
            - 모두
            - 온라인
            - 친구 대기 목록
            - 친구 추가
          - 다이렉트 메시지
            - 1:1 대화를 나눈 상대 표시
        - 참여한 방을 이동하는 버튼
        - 새롭게 방을 추가할 수 있는 버튼
    - 방 페이지
      - 사용자를 초대할 수 있는 코드 또는 링크를 복사하는 버튼
      - 텍스트를 입력할 수 있는 입력창
      - 참여한 사용자 목록 창
        - 온라인과 오프라인을 나눠서 구분
  - 컴포넌트 설계
    - 회원가입 컴포넌트
    - 로그인 컴포넌트
    - 모달 컴포넌트

<br />

### Float Chat BE 설계

- 백엔드 설계
  - 사용자 라우터
    - 회원가입과 관련된 POST 라우터
    - 로그인과 관련된 POST 라우터
    - 액세스 토큰 확인하는 GET 라우터
    - 리프레쉬 토큰 확인하는 GET 라우터
    - 리프레쉬 토큰 만료 시간 확인하는 GET 라우터
    - 로그아웃과 관련된 POST 라우터
  - 메인 페이지 라우터
    - 로그인한 사용자 정보를 불러오는 GET 라우터
    - 사용자 정보 수정을 위한 PATCH 라우터
    - 친구 추가와 관련된 POST 라우터
    - 친구 삭제와 관련된 DELETE 라우터
    - 다이렉트 메시지를 나눈 상대 목록을 불러오는 GET 라우터
    - 다이렉트 메시지 목록을 지우는 DELETE 라우터
    - 그룹 채팅방 목록을 불러오는 GET 라우터
    - 그룹 채팅방을 추가하는 POST 라우터
    - 그룹 채팅방 나가는 DELETE 라우터
      - 사용자 본인이 만든 채팅방이 아닌, 참여한 채팅방
  - 개인 채팅방 라우터
    - 채팅을 나눈 상대방 정보를 불러오는 GET 라우터
  - 그룹 채팅방 라우터
    - 참여한 모든 사용자 정보를 불러오는 GET 라우터
    - 채팅방 제목, 기타 내용 수정하는 PATCH 라우터
    - 채팅방 삭제와 관련된 DELETE 라우터
      - 채팅방을 만든 사용자만 사용 가능
  - 개인 채팅 라우터
    - 메시지를 불러오는 GET 라우터
    - 메시지 저장과 관련된 POST 라우터
  - 그룹 채팅 라우터
    - 메시지를 불러오는 GET 라우터
    - 메시지 저장과 관련된 POST 라우터

<br />

### Float Chat DB 설계

- DB 설계
  - 사용자 (users)
    - 사용자 정보가 저장된 컬렉션
    - 속성 내용
      - \_id
      - 이메일
      - 이름
      - 닉네임
      - 프로필 사진 URL
      - 타입
        - ex) 자리 비움, 온라인, 다른 용무 중
      - 계정 생성일
      - 친구 추가된 사용자 저장
        - 저장된 친구 \_id
        - 이메일
        - 이름
        - 닉네임
        - 타입
          - 온라인 유무 구분을 위해 사용
          - 온라인, 오프라인, 자리 비움, 다른 용무 중 등
      - 친구 추가 대기중인 정보 저장
        - 친구 \_id
        - 친구 이메일
        - 친구 이름
        - 친구 닉네임
        - 타입
          - 보낸 요청 또는 받은 요청 구분을 위해 사용
          - send 또는 receive
  - 개인 채팅방 (privateRooms)
    - 사용자 두 명의 정보가 저장된 컬렉션
    - 속성 내용
      - 방 코드 번호
        - 방 자체 \_id
      - 방 생성일
        - 방 생성일자를 저장해 방 관리 목적으로 사용
        - ex) 오래된 방 삭제
      - 참여한 사용자 두 명의 정보
        - \_id, 이메일, 이름, 닉네임
  - 방 (rooms)
    - 방 정보가 저장된 컬렉션
    - 속성 내용
      - 방 코드 번호
        - 방 자체 \_id
      - 방 이름
        - 그룹 채팅방 구분을 위해 사용자가 방 이름을 지정
      - 방 설명
        - 방 목적이나 주제 설명을 추가할 수 있음
        - 꼭 필요한 항목은 아님
      - 방 생성일
        - 방 생성일자를 저장해 방 관리 목적으로 사용
      - 참여한 모든 사용자 정보
        - \_id, 이메일, 이름, 닉네임, 온라인 여부
  - 개인 채팅 (privateChats)
    - 개인간의 채팅 메시지를 저장하는 컬렉션
    - 속성 내용
      - 개인 채팅방 \_id
      - 보낸 사람 \_id
      - 받은 사람 \_id
        - 이 내용은 필요 없을 수도 있음
      - 보낸 사람 이메일, 이름, 닉네임
      - 채팅 메시지 내용
      - 채팅 입력 날짜
      - 읽음 상태 유무
        - 메시지가 읽혔는지 여부를 확인하기 위한 속성
        - ex) true 또는 false로 확인
  - 그룹 채팅 (groupChats)
    - 방에서 입력된 채팅 메시지를 저장하는 컬렉션
    - 속성 내용
      - 방 \_id
      - 보낸 사람 \_id
      - 보낸 사람 이메일, 이름, 닉네임
      - 채팅 메시지 내용
      - 채팅 입력 날짜
      - 읽음 상태 유무
        - 메시지가 읽혔는지 여부를 확인하기 위한 속성
        - ex) true 또는 false로 확인
        - ex) [] 배열을 추가해 읽은 사용자 \_id를 저장
