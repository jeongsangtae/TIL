# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - url에서 임의로 무작위로 url을 추가했을 때 404 페이지로 이동하도록 변경

    - 여러 라우터에서 url 주소를 무작위로 작성시 error 페이지가 뜨기 때문에 이 부분을 수정해서 404페이지로 이동하도록 수정해주었다.
    - 라우터에서 하나하나 작업을 해줘야한다고 생각을 해서 하나씩 작업하는 방법을 찾아보고 있었는데 문득 한번에 미들웨어 처리에서 할 수 있을까 궁금해서 chatgpt에게 물어보니 의외로 간단하게 가능했다.
    - 보통 app.js에서 미들웨어를 처리하는데 여기서 모든 미들웨어 라우터가 처리되고 난 후에 404 페이지로 핸들링해주면 간단하게 해결할 수 있다.
    - 이 방법을 사용하면 라우터 하나하나에 일일히 처리를 추가하지 않아도 된다.
    - 전체 url에 대한 404 페이지 처리는 app.use()를 사용해서 핸들러 미들웨어를 등록하는게 좋다고 한다.

    ```
    app.use(expressSession(sessionConfig));

    app.use(userAuthMiddleware);

    app.use(boardRoutes);
    app.use(userRoutes);

    app.use(function (req, res, next) {
      res.status(404).render("404");
    });
    ```

  <br />

- 게시판 제작 진행 다음 목표

  - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함 (이 부분은 로그인 기능을 추가하면 그 ID를 통해서 쿠키나 세션을 사용해 저장하고, 사용자가 클릭 시 조회수가 중복으로 상승하지 않도록 하는 로직을 구상 중)
  - 삭제할 때 비밀번호 확인이 필요한가...? 좀 고민해봐야 함 애초에 권한 유무로 삭제하기 때문에 굳이 라는 생각도 들기 때문에 좀 의견을 물어볼 필요가 있음
  - 댓글 기능은 조금 고민좀 해봐야 할듯
  - 구성은 되어있는데 혹시나 수정할 수도 있는 부분
    - 문제가 하나 있는데 비밀번호를 확인하고 일치했을 때 게시글이 생성되는 것은 좋은데 그 비밀번호를 저장하는게 사용자의 비밀번호를 그대로 저장을 하고 있기 때문에 이 부분을 변경해야 함
      - 방법1 해싱된 상태의 비밀번호가 저장이 되도록 한다. (테스트는 해봄)
      - 방법2 비밀번호는 게시글에 저장하지 않도록 한다. (현재는 이 방법으로 구성)
      - 이 부분은 더 이상 생각하지 않아도 될 거 같음 굳이 해싱된 비밀번호를 저장하지 않아도 될 거 같다는 생각 그래서 아이에 비밀번호를 게시글에 저장하지 않도록 해놓음
    - 패스워드, 수정, 삭제 에러 관련 동작 처리
      - 최종적으로 다시 모달창으로 변경해주었다. 이벤트리스너 에러를 if문으로 조건을 추가해 해당 페이지에 들어왔을 때 바로 작동하지 않도록 해주며 해결하였다.
      - 수정, 삭제는 그냥 게시글 작성자가 아니라면 버튼이 보이지 않도록 해 막아주었다.
      - 추가로 해당 게시글 작성자가 아닌데 url로 접속시도를 하는경우 401페이지로 이동하도록 해주었다.
    - 페이지당 5개의 게시글까지만 보여지도록 해놓았으니, 이제 페이지네이션도 똑같이 한 화면에는 5개까지의 페이지버튼이 보이도록하고, 그 다음 6~10 이런 페이지 버튼은 다음 페이지 버튼을 클릭 시 보이도록 하려고 생각 중
      - 이 부분도 수정해서 예로 13번까지 페이지 버튼이 있다면 5개 단위로 끊어져있고, 5페이지에서 다음 버튼 클릭시 6번으로 넘어가면서 6~10이 보여지고 또 10 페이지에서 다음 버튼 클릭시 11~13이 보여지도록 되어있다.

<br />

# 오늘 느낀 점

- 캐시 제어 헤더나 404 페이지 핸들러 이 두 개의 미들웨어는 파일을 따로 만들어서 처리하는 것도 생각을 해봐야할 것 같다. 다른 라우터는 전부 다 따로 파일을 나눠서 정리해놓았는데 이 부분도 나눌 필요성이 있는지 고민을 해봐야한다. 그리고 404 페이지 핸들링을 라우터 하나하나에서 조건을 넣어서 처리를 하려고 했는데 미들웨어 라우터를 가져와서 사용하는 app.js에서 한번에 처리가 가능하다는 것을 알게 되었다.

- 이전에 404 페이지를 처리하려고 혼자서 라우터마다 추가하면서 혼자서 좀 뻘짓을 했던거 같다. 이렇게 간단하게 app.use를 사용해서 처리할 수 있는 것을 알았다면 빠르게 에러처리를 해주고 다음 스텝으로 넘어갈 수 있었을 거 같은데 혼자서 너무 고민하다가 시간을 좀 많이 쓴 것 같다. 물론 혼자서 이런저런 시도해본건 좋았는데 의미있게 시간을 사용한 느낌이 아니라서 좀 아쉽다는 생각이 든다.

- 수정 페이지에 조회 수 오르는 부분을 수정을 해야하는데 이것저것 시도해보았는데 아직 해결을 못해서 다시 다른 방법으로 시도해봐야한다. 현재 생각한 방법은 일정 시간 제한을 두고 조회 수가 오르도록 하면 될 것 같은데 일정 시간 제한과 세션을 기준으로 조회 수가 오르도록 해볼 생각인데 다른 좋은 방법이 생각난다면 그걸로 수정할 생각이다.

<br />

# 내일 할 일

- JS, ExpressJS, MongoDB로 게시판 제작 + (EJS)

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- Python으로 웹 스크래퍼 만들어보기

- Python, PHP 공부할 거 찾아보기

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기

- Python 데이터 분석도 한번 봐보기
