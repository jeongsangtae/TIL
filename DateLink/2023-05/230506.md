# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - 게시글들에 작성한 사용한 사용자가 누구인지 알 수 있게 이메일 추가
    - 게시글을 저장하는 라우터에 세션에서 현재 로그인한 사용자의 이메일을 가져온다.
      - `req.session.user.email`
    - 세션에서 이메일을 가져와서, users 컬렉션에서 해당 이메일을 가진 사용자를 확인한다. 세션에 저장된 이메일과 users 컬렉션에 저장된 이메일이 일치하는지 확인해 게시글이 생성될 때 그 사용자의 이메일도 함께 mongodb에 저장된다.
  - 프로필에서 로그인한 사용자가 작성한 게시글만 모아서 볼 수 있게 함
    - 프로필 라우터에서 현재 로그인한 사용자의 이메일을 가져온다.
    - 세션에 저장된 이메일과 users 컬렉션에 저장된 이메일이 일치하는지 확인한다.
    - 그 다음 게시글을 보여주는 라우터와 동일한 페이지네이션 기능도 추가하는데 조금 내용이 추가 됨
    - 여기서 게시글들을 찾는데 세션에 저장된 이메일과 게시글에 저장된 이메일을 확인해 일치하는 해당 게시글들을 posts 컬렉션을 통해서 찾아 가져온다.
    - 그리고 countDocuments() 메서드는 따로 조건이 없다면 전체 문서의 개수를 조회하는데 이 메서드 안에 조건을 추가해주는데 세션에 저장된 이메일과 posts 컬렉션에서 일치하는 이메일에 맞는 게시글들을 반환해 해당 문서들의 개수를 조회한다.
    - 이렇게 조회된 문서들로 프로필에서는 게시글 목록에서와는 다르게 사용자가 작성한 게시글만 보여지며, 사용자가 작성한 게시글들만으로 페이지네이션 기능이 작동한다.
  - 프로필 ejs파일 구성
    - 기존의 게시글 목록의 내용을 가져와 구성하였는데 여기에는 처음 게시글 목록의 h1태그에서 사용자의 이메일이 보여지게 해서 어떤 사용자의 게시글 목록인지 알 수 있게 해놓았다.
    - 그 뒤의 내용은 거의 유사하나 페이지네이션 기능을 동작하는 부분에서 a 태그로 된 부분은 posts가 아닌 profile로 바꿔주며 동작하게 구성하였다.
    - posts로 해놓으면 게시글 목록의 페이지네이션 기능과 똑같이 작동해버리기 때문에 profile로 바꿔주며, 사용자가 작성한 게시글들에 대해서만 페이지가 이동하도록 기능이 동작하도록 하였다.

  <br />

- 게시판 제작 진행 다음 목표

  - 우선 가입한 사용자만 게시글을 작성할 수 있게는 해놓았으나, 아직 어떤 사용자가 작성한 게시글인지 구분하는 방법에 대해 확실하게 정하지 못한 거 같다. 이 구분하는 방법에 대해 생각해봐야 함
    - `_id`로 저장되는 mongodb id 저장 방식을 사용해 게시글에 사용자의 정보를 저장해 구분할 생각이다.
  - 회원가입, 로그인 로직을 구성하고 프로필 내용을 구성할 생각인데, 이 내용은 로그인한 계정이 작성한 게시글의 목록을 볼 수 있도록 할 생각
    - 프로필 내용에서 로그인한 사용자의 `_id`와 게시글에 작성된 사용자의 `_id` 내용을 확인해서 프로필 내용에서 사용자의 `_id`에 맞는 게시글들만 모아서 보여주도록 하면 될 거 같다.
  - 본인이 작성한 게시글만 수정, 삭제할 수 있게 해야함 + 게시글 수정 및 삭제시 로그인한 이메일의 비밀번호를 확인해 삭제되도록 변경해야함
    - 이 부분은 게시글에 사용자의 정보를 저장할 때 패스워드도 저장하면 생각보다 간단하게 수정, 삭제 문제를 해결할 수 있을 거 같다는 생각이 드는데, 보안의 문제가 있기 때문에 사용자의 `_id`가 저장되어 있기 때문에 그 `_id`를 확인해 비밀번호를 비교해 해당 비밀번호가 맞을 때 수정, 삭제되도록 하는 방법도 생각중
  - 페이지당 5개의 게시글까지만 보여지도록 해놓았으니, 이제 페이지네이션도 똑같이 한 화면에는 5개까지의 페이지버튼이 보이도록하고, 그 다음 6~10 이런 페이지 버튼은 다음 페이지 버튼을 클릭 시 보이도록 하려고 생각 중 (보류)
  - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함 (이 부분은 로그인 기능을 추가하면 그 ID를 통해서 쿠키나 세션을 사용해 저장하고, 사용자가 클릭 시 조회수가 중복으로 상승하지 않도록 하는 로직을 구상 중)
  - CSS + UX 부분에서 조언을 구해야할 부분
    - input에서 focus 되었을 때 background color 변경 유무
    - navbar 글씨 크기
    - 회원가입, 로그인 UI 그리고 border 또는 box-shadow 사용 유무 어떤게 나은지
    - 회원가입, 로그인에서 a태그로 만든 부분 색 관련 물어보기
    - 회원가입 이름이 적당한지 그냥 가입하기가 맞는지
    - 회원가입, 로그인 label, input 간격이 괜찮은지 물어보기
    - 회원가입, 로그인 하러가기 버튼이 괜찮은지 좀 변경이 필요한지
    - 글 작성 페이지나 보여지는 페이지에서 글쓴이가 괜찮은지 작성자가 더 나아보이기도 하기 때문에 물어보기
    - 게시글 목록에서 등록 버튼이 사용자 인증이 되지 않았을 때 존재 하지않으면서 원천적으로 차단,사용자 인증이 되든 안되든 등록 버튼이 존재하고 사용자 인증 유무에 따라 이동하는 페이지가 다르게 구성 두 가지 중 고민좀 해봐야함
  - 게시글 라우터에서 게시글 정보를 가져오는 res.locals 작업해봐야함
  - 프로필에서 로그인한 사용자가 누구인지 알 수 있게 하면서 게시글이 보이도록 해야함
  - 가입하는 부분에서 이름을 추가해 그 이름을 사용해서 프로필에서 '(이름)의 게시글 목록' 이렇게 보여지게 하려고 생각중이다.

<br />

# 오늘 느낀 점

- 게시글을 작성한 사용자가 누구인지 어떻게 구분해야할까 하다가 \_id로 구분하려고 했는데 생각해보니 이메일도 중복이 안되도록 해놓았기 때문에 이메일로 하는게 데이터를 저장하기에도 좋다고 생각되어 이메일로 하게되었는데 만족스럽다. 그리고 프로필에서도 이메일로 구분해서 찾을 수 있고, 프로필에서 h1 태그에 해당하는 곳에서도 당장은 어떤 사용자가 작성한 게시글들인지 구분할 수 있는데 이 부분도 이메일로 일단은 해놓아서 더 알아보기 쉬운 것 같다.

- 프로필에서 h1 태그로 ~의 게시글 목록에서 이메일로 알아볼 수 있게 했는데 이 부분에서 이제 가입할 때 이름을 추가할 수 있게해서 그 이름으로 바꿔주는게 훨씬 UI가 좋다고 생각된다.

- 프로필 부분도 큰 틀은 구성이 끝난 거 같아서 이제 UI부분이나 수정, 삭제 부분을 해결해야한다고 생각이 되는데 프로필 부분에서 좀 많이 막힐 것 같다는 생각과는 달리 의외로 게시글에 이메일을 추가하는 부분을 해결하면서 프로필 부분도 함께 해결이 된 거 같다.

- 게시글에서 사용자의 데이터를 추가하는 부분과 프로필에서 로그인한 사용자의 데이터를 가져오는 부분이 생각할 때 어떻게 해야되나 이게 되나 이런생각을 많이 했었는데 생각해볼때는 어떻게 해야하나 어렵게만 느껴졌는데 역시 생각도 중요하지만 직접 코딩을 해보고 느껴보는게 좋다고 생각이 된다. 막상 생각할 때 어렵게 느껴지고 어떻게 해야하지 했던 부분이 직접 코드를 작성하면서 될 거 같다는 생각도 들었고 막상 만들어보니 생각보다 별 거 아닌거 같다는 생각도 들었다. 물론 처음에 구상하고 생각하는 부분은 필요하지만 너무 생각에만 몰두하는 것 보다는 코드를 쳐보면서 함께 생각하고 해보는게 맞는 것 같다.

<br />

# 내일 할 일

- JS, ExpressJS, MongoDB로 게시판 제작 + (EJS)

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- Python으로 웹 스크래퍼 만들어보기

- Python, PHP 공부할 거 찾아보기

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기

- Python 데이터 분석도 한번 봐보기
