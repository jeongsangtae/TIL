# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - 게시글 작성 페이지에서 작성자를 로그인한 사용자의 이름으로 고정
    - 우선 router.get("/create-post", ...)에 세션에서 사용자의 이메일을 가져와서 users 컬렉션에서 해당 이메일을 비교해서 일치하는 사용자의 전체 정보를 가져온다.
    - 그 다음 user 정보를 ejs 템플릿에서 사용할 수 있게 해준다.
    - create-post에서 value에 user.name을 넣어주고, readonly를 추가해 변경할 수 없게 해주며 사용자의 이름이 고정으로 들어가도록 했다.
  - 게시판 라우터에서 bcrypt를 추가해 해싱된 비밀번호와 입력한 비밀번호를 확인해서 일치할 때 게시글 생성
    - bcrypt의 compare 함수를 사용해 첫 번재 인자에 입력한 비밀번호, 두 번째 인자에 사용자 정보에서 해싱되어 저장되어 있는 비밀번호를 가져와서 일치하는지 비교해 일치하지 않는다면 500페이지를 보여주도록 하고, 일치한다면 그 뒤에 있는 코드가 실행되어 게시글이 추가되도록 한다.

  <br />

- 게시판 제작 진행 다음 목표

  - 본인이 작성한 게시글만 수정, 삭제할 수 있게 해야함 + 게시글 수정 및 삭제시 로그인한 이메일의 비밀번호를 확인해 삭제되도록 변경해야함
    - 이 부분은 게시글에 사용자의 정보를 저장할 때 패스워드도 저장하면 생각보다 간단하게 수정, 삭제 문제를 해결할 수 있을 거 같다는 생각이 드는데, 보안의 문제가 있기 때문에 사용자의 `_id`가 저장되어 있기 때문에 그 `_id`를 확인해 비밀번호를 비교해 해당 비밀번호가 맞을 때 수정, 삭제되도록 하는 방법도 생각중
  - 페이지당 5개의 게시글까지만 보여지도록 해놓았으니, 이제 페이지네이션도 똑같이 한 화면에는 5개까지의 페이지버튼이 보이도록하고, 그 다음 6~10 이런 페이지 버튼은 다음 페이지 버튼을 클릭 시 보이도록 하려고 생각 중 (보류)
  - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함 (이 부분은 로그인 기능을 추가하면 그 ID를 통해서 쿠키나 세션을 사용해 저장하고, 사용자가 클릭 시 조회수가 중복으로 상승하지 않도록 하는 로직을 구상 중)
  - CSS + UX 부분에서 조언을 구해야할 부분
    - input에서 focus 되었을 때 background color 변경 유무
    - navbar 글씨 크기
    - 회원가입, 로그인 UI 그리고 border 또는 box-shadow 사용 유무 어떤게 나은지
    - 회원가입, 로그인에서 a태그로 만든 부분 색 관련 물어보기
    - 회원가입 이름이 적당한지 그냥 가입하기가 맞는지
    - 회원가입, 로그인 label, input 간격이 괜찮은지 물어보기
    - 회원가입, 로그인 하러가기 버튼이 괜찮은지 좀 변경이 필요한지
    - 글 작성 페이지나 보여지는 페이지에서 글쓴이가 괜찮은지 작성자가 더 나아보이기도 하기 때문에 물어보기
    - 게시글 목록에서 등록 버튼이 사용자 인증이 되지 않았을 때 존재 하지않으면서 원천적으로 차단,사용자 인증이 되든 안되든 등록 버튼이 존재하고 사용자 인증 유무에 따라 이동하는 페이지가 다르게 구성 두 가지 중 고민좀 해봐야함
  - 새로운 문제를 발견했는데 로그인 상태에서 글쓰기 페이지를 들어간 상태로 로그아웃을 하고 뒤로가기 버튼으로 다시가면 문제없이 글쓰기 페이지로 이동되는 문제를 발견
    - 확인해본 결과 글쓰기 페이지로 이동은 되지만 거기서 게시글을 생성해도 생성되지않고, 페이지 오류가 뜨면서 막히긴 하지만 그 이후에 다시 게시글 목록 페이지나 다른 페이지도 보여지지않고 페이지 오류가 뜨는 문제를 수정해야한다.
    - 로컬에서 테스트를 해서 계속 페이지 오류가 뜨는건지 이 부분은 확실하게 모르겠는데 이 부분은 좀 찾아볼 필요가 있다.
    - js파일을 다시 저장하면 페이지 오류 문제는 해결된다.
  - 문제가 하나 있는데 비밀번호를 확인하고 일치했을 때 게시글이 생성되는 것은 좋은데 그 비밀번호를 저장하는게 사용자의 비밀번호를 그대로 저장을 하고 있기 때문에 이 부분을 변경해야 함
    - 방법1 해싱된 상태의 비밀번호가 저장이 되도록 한다.
    - 방법2 비밀번호는 게시글에 저장하지 않도록 한다.
    - 방법3 게시글을 생성할 때는 비밀번호를 추가하지 않도록 한다. 수정, 삭제할 때 확인만 하고 저장은 되지 않도록 하는 방법
  - 비밀번호가 일치하지 않을 때 500페이지로 이동하는게 아닌 따로 비밀번호가 틀렸다고 알려주는 모달창을 만들 생각 중

<br />

# 오늘 느낀 점

- 게시글 작성자에 사용자의 이름이 들어오도록 변경했는데 꽤 괜찮은 거 같다. 그리고 변경은 불가능하도록 했는데 굳이 작성자를 혼란스럽게 변경해서 게시글을 생성할 필요가 없다고 생각해 readonly를 추가해 변경은 불가능하도록 해놓았다.

- 현재는 작성자에 사용자의 이름이 들어가있도록 변경 완료되었다. 그리고 그 작성자 input은 변경이 불가능하도록 구성해놓았다. 문제는 비밀번호였는데 비밀번호는 어제 생각했던 마지막 방법인 사용자가 직접 입력하고 확인 절차를 걸쳐서 비밀번호가 일치할 때 게시글이 생성되도록 하는 방법으로 수정해놓았다. 근데 확인해보니 게시글이 mongodb에 저장될 때 비밀번호도 함께 저장이 되는데 여기서 비밀번호가 입력한 input 데이터 정보로 저장이 되기때문에 이 부분을 수정해서 해싱되어있는 비밀번호로 저장되도록 하거나 아니면 아이에 비밀번호는 게시글에 저장되지않도록 하는 것도 괜찮아보인다. 또 다른 방법으로 차라리 게시글을 생성할 때는 비밀번호를 추가하지 않도록 하고 수정, 삭제할 때 확인만 하는 방법도 괜찮다고 생각이 된다.

- 비밀번호가 일치하지 않을 때 당장 오류를 확인 하기 위해 500페이지로 이동하고 다시 메인 페이지로 이동하고 다시 글쓰기 페이지로 이동하는데 이 과정이 비효율적이고 UX가 좋지 않다고 생각이 되어 따로 비밀번호가 틀렸다는 웹 브라우저 창이 뜨거나 모달창을 추가해 보여지도록 할 생각

- 어제 세션 만료 시간을 변경해놓은 부분도 제대로 작동하고 있는 거 같아서 차근차근 진행이 잘 되어 간다고 생각이 된다.

<br />

# 내일 할 일

- JS, ExpressJS, MongoDB로 게시판 제작 + (EJS)

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- Python으로 웹 스크래퍼 만들어보기

- Python, PHP 공부할 거 찾아보기

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기

- Python 데이터 분석도 한번 봐보기
