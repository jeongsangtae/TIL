# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - 조회수 관련 세션 만료시 데이터 자동으로 제거기능 확인
    - 어제 작업했던 조회수 증가 관련 시간 간격을 주고 상승하도록 해놓은 로직은 잘 작동하는 것을 확인했다.
    - 추가로 mongodb에 세션 데이터로 조회수 상승한 게시글의 정보가 추가되는데 계속 데이터가 추가되면서 쌓이게 되면 mongodb의 메모리에 부담이 될 수 있기 때문에 세션이 만료되면 데이터가 일정 시간 후에 삭제되도록 `clearExpired`, `checkExpirationInterval`를 추가해주었는데 정상적으로 작동하는 것을 확인했다.
    - 추가로 더 수정해줄 필요는 없어보임
  - 삭제시 확인 창을 띄워서 다시 한번 삭제할지 확인하는 모달창을 추가
    - 현재 스크립트를 추가해서 모달창이 뜨도록은 되어있는데 이게 삭제 버튼이 클릭되었을 때 뜨도록 해야하는데 아직은 게시글을 클릭하자마자 창이 뜨기 때문에 이 부분을 수정을 해주어야한다.
    - 스크립트에서 삭제 버튼을 클릭했을 때 바로 mongodb에서 삭제되는게 아닌 event.preventDefault로 기본 동작을 막아준다. 그 다음 삭제 버튼을 클릭했을 때 submit이 되도록해서 삭제가 되도록 구성을 했는데 아직은 이게 구상한대로 작동하지 않아서 수정이 필요하다.
    - 그리고 또 취소 버튼을 추가해서 클릭하면 삭제 되지않고, 모달창이 닫히도록 구성해놓았다. 이 부분 또한 수정이 필요해보인다.

  <br />

- 게시판 제작 진행 다음 목표

  - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함
    - 조회 수를 시간 간격을 10초 정도로 주며, 중복된 사용자나 다른 사용자가 다시 클릭해도 10초가 지나지않으면 오르지 않도록 설정해놓았다.
    - 근데 조금 수정이 필요한 부분이 있는 거 같은데 이 데이터를 확인하기위해 세션에 저장하는데 그 세션에 저장된 데이터가 삭제가 되지않아서 그 데이터가 일정시간이 지나면 삭제되도록 하거나, 아니면 게시글을 삭제했을 때 함께 삭제되도록 하는 방법도 구상중인데 좀 더 생각해봐야한다.
    - 일단 만료된 세션 데이터를 자동으로 제거하는 코드를 추가해놓았는데 내일 확인을 해보아야함
  - 삭제할 때 비밀번호 확인이 필요한가...? 좀 고민해봐야 함 애초에 권한 유무로 삭제하기 때문에 굳이 라는 생각도 들기 때문에 좀 의견을 물어볼 필요가 있음
    - 방법1. 그냥 삭제가 되도록한다.
    - 방법2. 예, 아니오 창이 떠서 거기서 한번 더 의사를 물어보고 삭제할지 안할지 결정
    - 방법3. prompt창을 사용해서 비밀번호를 입력해서 삭제한다.
    - 방법4. 모달창에서 비밀번호를 입력해서 비밀번호가 맞을 시 삭제
    - 현재는 2번쪽으로 수정할 생각을 가지고 있음
  - 댓글 기능은 조금 고민좀 해봐야 할듯
  - 구성은 되어있는데 혹시나 수정할 수도 있는 부분
    - 문제가 하나 있는데 비밀번호를 확인하고 일치했을 때 게시글이 생성되는 것은 좋은데 그 비밀번호를 저장하는게 사용자의 비밀번호를 그대로 저장을 하고 있기 때문에 이 부분을 변경해야 함
      - 방법1 해싱된 상태의 비밀번호가 저장이 되도록 한다. (테스트는 해봄)
      - 방법2 비밀번호는 게시글에 저장하지 않도록 한다. (현재는 이 방법으로 구성)
      - 이 부분은 더 이상 생각하지 않아도 될 거 같음 굳이 해싱된 비밀번호를 저장하지 않아도 될 거 같다는 생각 그래서 아이에 비밀번호를 게시글에 저장하지 않도록 해놓음
    - 패스워드, 수정, 삭제 에러 관련 동작 처리
      - 최종적으로 다시 모달창으로 변경해주었다. 이벤트리스너 에러를 if문으로 조건을 추가해 해당 페이지에 들어왔을 때 바로 작동하지 않도록 해주며 해결하였다.
      - 수정, 삭제는 그냥 게시글 작성자가 아니라면 버튼이 보이지 않도록 해 막아주었다.
      - 추가로 해당 게시글 작성자가 아닌데 url로 접속시도를 하는경우 401페이지로 이동하도록 해주었다.
    - 페이지당 5개의 게시글까지만 보여지도록 해놓았으니, 이제 페이지네이션도 똑같이 한 화면에는 5개까지의 페이지버튼이 보이도록하고, 그 다음 6~10 이런 페이지 버튼은 다음 페이지 버튼을 클릭 시 보이도록 하려고 생각 중
      - 이 부분도 수정해서 예로 13번까지 페이지 버튼이 있다면 5개 단위로 끊어져있고, 5페이지에서 다음 버튼 클릭시 6번으로 넘어가면서 6~10이 보여지고 또 10 페이지에서 다음 버튼 클릭시 11~13이 보여지도록 되어있다.
      - 다른 방법으로 페이지 버튼이 이전과 다음 버튼으로 아이에 정해진 단위대로 이동하는 것
      - 또 다른 방법으로 현재 보이는 페이지를 페이지 버튼에서 중앙으로 잡고 이전과 다음 버튼으로 -1, +1 씩 이동하는 방식

<br />

# 오늘 느낀 점

- 세션 만료시 데이터가 삭제되도록 해놓은 부분을 체크해보았는데 문제없이 작동하는 것을 확인해서 더 수정할 필요가 없다고 느꼈다. 세션 만료를 짧게 해놓았을 때에는 확인하기가 힘들었는데 원래대로 세션 만료를 2시간으로 설정해놓고 만료시 데이터 삭제를 1시간으로 해놓았는데 제대로 작동해서 괜찮은 것 같다.

- 게시글 삭제시 확인 절차를 한번 거치도록 모달창을 추가했는데 모달창은 제대로 뜨는데 이게 삭제 버튼을 클릭했을 때만 뜨도록 해야하는데 아직 그렇게 작동하지 않아서 이 부분을 수정을 해주어야한다. 이벤트 리스너에서 또 null로 뜨면서 그 부분 때문에 그런거 같은데 여러가지 테스트를 해봐야할 것 같다. 그리고 아직 삭제도 되지않는데 이 부분도 다시 확인이 필요하다. 모달창이 게시글 내용을 들어가자마자 뜨는 부분도 수정을 해주어야하고, 삭제 버튼을 눌렀을 때 삭제가 되지않고 로그아웃이 되버리는 점도 확인하고 수정이 필요해보인다.

<br />

# 내일 할 일

- JS, ExpressJS, MongoDB로 게시판 제작 + (EJS)

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- Python으로 웹 스크래퍼 만들어보기

- Python, PHP 공부할 거 찾아보기

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기

- Python 데이터 분석도 한번 봐보기
