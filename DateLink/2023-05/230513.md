# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - 패스워드 오류시 모달창이 뜨도록 변경
    - 처음에 모달창이 뜨도록 구성을 해놓았는데 이벤트리스너 에러가 발생해서 p태그로 에러메시지가 뜨도록 해놓았는데 조건문을 추가해서 이벤트리스너 에러가 발생하지않도록 수정하였다.
    - if문으로 모달창을 닫는 버튼을 체크해 안정성을 확보해 문제를 해결하였다.
    - 다른 에러메시지를 출력하는 부분도 모달창을 쓴다면 이런식으로 if문을 추가해서 스크립트를 수정해야한다.
  - 로그인 안된 상태에서 게시글 내용을 못보는 부분을 수정
    - 로그인이 안된 상태에서도 게시글 내용은 볼 수 있어야하는데 session의 user.email때문에 볼 수가 없어서 이 부분을 수정했다.
    - 먼저 테스트한거는 req.session.user || null로 확인을 해서 ejs파일에서 조건문을 추가해서 페이지를 볼 수 있도록 했다.
    - 조금 변경해서 user는 기본 null로 해주고, 그 뒤에 req.session.user를 확인해 user에 session에서 user.email을 찾아서 확인해 ejs 파일로 넘겨준다.
    - 이 부분은 좀 더 생각해보고 다시 변경할 생각이다. 좀 더 간단하거나 통일성 있게 코드를 구성할 생각
  - 수정 페이지에서 입력한 비밀번호와 해싱되어있는 비밀번호를 확인해 수정되도록 변경
    - 기존에 게시글 생성할 때와 비슷하게 에러메시지를 추가하고 session에서 user.email을 가져오고 확인해서 입력한 비밀번호와 사용자 정보에서 가져온 해싱된 비밀번호를 확인해서 체크하고 맞으면 게시글이 수정
    - 수정은 잘 되는데 문제는 비밀번호가 틀렸을 때 다시 그 페이지를 보여주는데 그 후에 수정했던 내용이 기존의 내용으로 돌아가는게 문제인데 이 부분을 수정해줘야한다.
    - 그리고 비밀번호가 틀렸을 때 이 것도 게시글 생성처럼 모달창을 띄워서 비밀번호 오류를 알려주도록 해야한다.

  <br />

- 게시판 제작 진행 다음 목표

  - 본인이 작성한 게시글만 수정, 삭제할 수 있게 해야함 + 게시글 수정 및 삭제시 로그인한 이메일의 비밀번호를 확인해 삭제되도록 변경해야함
    - 이 부분은 게시글에 사용자의 정보를 저장할 때 패스워드도 저장하면 생각보다 간단하게 수정, 삭제 문제를 해결할 수 있을 거 같다는 생각이 드는데, 보안의 문제가 있기 때문에 사용자의 `_id`가 저장되어 있기 때문에 그 `_id`를 확인해 비밀번호를 비교해 해당 비밀번호가 맞을 때 수정, 삭제되도록 하는 방법도 생각중
  - 페이지당 5개의 게시글까지만 보여지도록 해놓았으니, 이제 페이지네이션도 똑같이 한 화면에는 5개까지의 페이지버튼이 보이도록하고, 그 다음 6~10 이런 페이지 버튼은 다음 페이지 버튼을 클릭 시 보이도록 하려고 생각 중 (보류)
  - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함 (이 부분은 로그인 기능을 추가하면 그 ID를 통해서 쿠키나 세션을 사용해 저장하고, 사용자가 클릭 시 조회수가 중복으로 상승하지 않도록 하는 로직을 구상 중)
  - 새로운 문제를 발견했는데 로그인 상태에서 글쓰기 페이지를 들어간 상태로 로그아웃을 하고 뒤로가기 버튼으로 다시가면 문제없이 글쓰기 페이지로 이동되는 문제를 발견
    - 확인해본 결과 글쓰기 페이지로 이동은 되지만 거기서 게시글을 생성해도 생성되지않고, 페이지 오류가 뜨면서 막히긴 하지만 그 이후에 다시 게시글 목록 페이지나 다른 페이지도 보여지지않고 페이지 오류가 뜨는 문제를 수정해야한다.
    - 로컬에서 테스트를 해서 계속 페이지 오류가 뜨는건지 이 부분은 확실하게 모르겠는데 이 부분은 좀 찾아볼 필요가 있다.
    - js파일을 다시 저장하면 페이지 오류 문제는 해결된다.
  - 문제가 하나 있는데 비밀번호를 확인하고 일치했을 때 게시글이 생성되는 것은 좋은데 그 비밀번호를 저장하는게 사용자의 비밀번호를 그대로 저장을 하고 있기 때문에 이 부분을 변경해야 함
    - 방법1 해싱된 상태의 비밀번호가 저장이 되도록 한다. (현재는 이 방법으로 구성)
    - 방법2 비밀번호는 게시글에 저장하지 않도록 한다. (테스트는 해봄)
  - 패스워드, 수정, 삭제 에러 관련 동작에서 모달창이 뜨고 그 모달창을 닫는 이벤트리스너가 콘솔에서 에러를 발생시키는데 이 부분을 해결해야한다.
    - 방법2 패스워드 부분은 p태그로 표기하고 수정, 삭제는 본인이 쓴 게시글이 아니면 버튼이 안보이도록 한다.
    - 방법2로 수정 해놓았는데 이벤트리스너에 대해 좀 더 찾아보고 모달창 다시 시도해볼 생각
  - 수정, 삭제 권한이 없으면 아이에 가능하지 않도록 했으니 이제 수정에서 데이터를 변경할 때 입력한 비밀번호와 해싱한 비밀번호를 확인하는 로직을 추가해야 함
  - 삭제할 때 비밀번호 확인이 필요한가...? 좀 고민해봐야 함 애초에 권한 유무로 삭제하기 때문에 굳이 라는 생각도 들기 때문에 좀 의견을 물어볼 필요가 있음
  - 로그인이 안된 상태에서 게시글을 볼 수 없어서 이 부분을 수정해야함
    - 수정하긴 했는데 다른 방법으로 변경하려고 생각중
    - const user = req.session.user 만 사용해서 생각중
  - 수정 페이지에서 비밀번호가 틀렸을 때 스크립트를 추가해서 모달창이 뜨도록 해줘야 함 그리고 비밀번호 틀리고 다시 그 페이지로 리다이렉트될 때 수정했던 내용이 보이도록 해야한다.

<br />

# 오늘 느낀 점

- 수정 페이지에서 비밀번호가 틀렸을 때 다시 그 수정 페이지를 보여주도록 하는 부분에서 return을 빼먹어서 계속 에러가 발생했는데 이런 자잘한 실수도 조심을 해야할 것 같다. 에러를 보고 왜 에러가 발생하지 생각했는데 분명 봤던 에러인데 기억이 잘 안났었는데 확인해보니 return을 빼먹어서 if문에서 코드가 실행되고 그 다음으로 넘어가버리면서 중복으로 발생해서 생긴 문제였다. 항상 제대로 확인하는 습관을 가져야한다고 생각한다.

- 게시글 생성할 때 비밀번호를 확인해 비밀번호 오류가 있을 때 모달창을 띄우도록 하는 UX를 사용하고 싶었는데 이벤트리스너 에러를 해결하지 못해서 나중에 해보려다가 좀 꽂혀서 계속 찾아보니 if문을 사용해서 처리하는 방법을 보게되어 그 방법대로 했는데 콘솔창에서 에러가 발생하지 않아서 다시 스크립트를 사용해서 모달창을 닫을 수 있게 수정해주었는데 UI/UX면에서 너무 만족스럽다.

- 로그인이 안된 상태에서 게시글 내용을 볼 수 없는 부분이 좀 골치였는데 이 부분은 chatgpt의 도움을 받아서 해결하긴 했는데 내 스타일대로 좀 변경을 해보려고 생각중이다. 내가 기존에 해봤다고 생각한 방식으로 여러번 수정해서 테스트 해보았는데 해결이 되지않아서 결국 chatgpt 도움을 받고 해결하긴 했는데 뭔가 좀 아쉽다는 생각이 들고, 코드의 통일성이 좀 부족한거 같아서 좀 변경을 해볼 생각중인데 아니면 좀 더 코드를 줄이는 쪽으로도 생각을 해봐야할 것 같다.

<br />

# 내일 할 일

- JS, ExpressJS, MongoDB로 게시판 제작 + (EJS)

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- Python으로 웹 스크래퍼 만들어보기

- Python, PHP 공부할 거 찾아보기

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기

- Python 데이터 분석도 한번 봐보기
