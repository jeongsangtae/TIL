# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 댓글에서 구성한 textarea와 채팅에서 구성한 textarea 비교 및 댓글 추가와 수정 합치는 내용 정리
    - 댓글 추가와 수정 컴포넌트를 왜 분리했는지 내용을 찾는 도중에, 댓글과 답글에서 textarea를 "react-textarea-autosize" 라이브러리로 구성한 것을 확인하고 어떤 이유로 저 라이브러리를 사용했는지 관련된 내용을 다시 살펴보고, 채팅에서도 textarea를 사용했는데 어째서 해당 라이브러리를 사용하지 않고 구성했는지에 대한 내용을 정리하고, 댓글 추가와 수정 컴포넌트를 그 당시에 하나의 컴포넌트로 구성한 상태에서 왜 분리했는지 관련 내용을 정리
    - 댓글, 답글에서 구성한 textarea와 채팅에서 구성한 textarea
      - 댓글, 답글을 textarea로 구성해놓고, 테스트를 하던 도중에 textarea 높이가 늘어나는 것은 문제가 없었지만 줄어드는 부분에서 문제가 생겨서 OnInput, 스타일을 지정해서 작업 등 여러 시도를 했으나 해결하지 못함
        - 이로 인해 다른 방법을 찾다가 ref를 사용하는 방법을 찾았는데, 그 때 ref를 예시로만 접해보고 제대로 사용해보지 않아서 좀 단순하게 구현을 하려고 했는데 생각보다 쉽지 않아서 결국 "react-textarea-autosize" 라이브러리를 사용해서 구성하게 됨
      - 채팅 textarea는 처음에 input으로 구성하고, 이후에 여러 줄 입력할 수 없는 것을 확인하고 textarea로 변경해준 후에 ref를 사용해서 높이를 감지하고 조절할 수 있게 구성
        - 이 때 ref는 채팅 컨테이너에서 먼저 스크롤 관련 내용을 구현하기 위해서 사용해본 상태였기 때문에 쉽게 구현할 수 있었음
      - 처음에 댓글과 답글 textarea를 구성할 때는 ref를 제대로 사용해보지 않고, 연습만 해봐서 useState와 비슷한 용도인 줄 알고 함께 사용하면 안된다고 생각했으나, 나중에 관련 내용을 찾아보니 함께 사용하는 것은 매우 일반적인 방식이고 문제가 없다는 것을 알게되었음
        - 함께 사용하면 오히려 복잡한 상태나 참조 관리가 필요한 경우에서 유용하게 사용할 수 있음
        - ex) 스크롤 관련, textarea 높이가 자동으로 늘어나고 줄어드는 내용 구현 등 높이 같은 부분이나 포커스되는 내용에서도 유용하게 사용 가능
      - 댓글, 답글 내용에서 사용되는 라이브러리는 수정해야 하는가?
        - 굳이 수정까지 할 필요는 없는 것 같고, 이런 방법도 있다는 용도로 놔두고 나중에 참고하면 된다고 생각
    - 댓글 추가와 수정 컴포넌트를 분리한 이유
      - 예전에 CommentForm 컴포넌트 하나만 사용해서 구성했으나, 댓글을 추가한 후에 내용이 초기화되지 않는 문제로 인해서 분리해서 구성해주었음
      - CommentForm 컴포넌트 하나로 해결을 하려고 했으나, 여러 방법을 테스트해도 해결되지 않아서 결국 분리해서 작업을 해줌
      - 정리했던 내용을 다시 살펴보니, 분리해주는 것이 더 타당하다고 판단되며 현재 이 상태로 유지해야 할 것 같다.

  <br />

  - 채팅 관련 코드에 설명을 위한 주석 내용 추가
    - 채팅 내용과 관련된 코드에서 설명이 필요하다고 생각되는 부분에 주석을 추가해서 코드에 대한 설명을 추가해주었다.
    - 프론트엔드 구성
      - Chats
        - WebSocket 연결 및 실시간 메시지 수신 동작이 중요하기 때문에, 주석으로 명확하게 설명을 추가
          - 실시간 메시지와 관련된 로직은 주석이 없으면 이해하기 어려울 수 있으므로 추가
        - 메시지 전송 로직에서 비동기적으로 서버와 통신하는 부분은 중요하면서 채팅의 주요 로직이기 때문에 주석 추가
          - 전송 후에 입력 필드가 어떻게 되는지도 함께 주석을 추가
        - 채팅창을 열고 닫을 때 어떤 동작이 발생하는지 명확하게 설명하기 위해서 주석 추가
      - ChatInput
        - 기존의 주석 내용의 위치를 조금 옮기고, 추가로 설명이 더 필요한 부분은 설명을 덧붙여줌
        - 특히, textarea 최대 높이를 설정하고 특정 높이에서 스크롤이 사용되는 내용은 설명이 추가로 필요하다고 생각되어 주석 내용 수정
        - 전송 버튼이 어떤 이유로 활성화/비활성화 되는지 명확하게 설명하기 위한 주석 추가
        - Enter 키 이벤트가 왜 필요한지, 어떤 조건에서 작동하는지 설명이 필요하다고 생각되어 주석 추가
      - useChatScroll
        - 이미 추가된 주석 내용에서, 좀 더 간단하게 변경할 부분은 변경해주고 추가로 설명이 필요한 부분은 덧붙여줌
        - 새로운 메시지가 추가되었을 때, 스크롤이 어떤 조건에 따라서 어떻게 동작이 되는지 조금 자세하게 주석 추가
          - 스크롤에 추가로, 조건에 따라 어떤 버튼이 보여지는지 조건문마다 설명을 추가
        - 함수 이름이 명확하게 구성이 된 것 같긴 하지만, 그래도 주석을 추가해서 어떤 기능을 하는지 알 수 있도록 구성
      - useAutosizeChatHeight
        - 필요없는 주석은 삭제하고, 좀 더 설명이 필요한 주석은 추가
        - textarea 높이에 관한 useState에서 초기 높이 설정 같은 주석은 굳이 필요없다고 생각되어 삭제
        - 채팅 컨테이너 높이가 textarea 높이에 따라서 조정이 된다는 것을 설명하기 위해 주석 추가
        - 버튼 컨테이너 또한 textarea 높이에 따라서 위치가 조정되기 때문에 주석 추가
    - 테스트 결과, 주석을 추가해주면서 어떤 코드가 어떤 역할을 하는지 이전보다 명확하게 알 수 있게 된 것 같다는 생각이 들지만, 또 한편으로는 너무 많은 내용의 주석을 추가한 것 같다는 생각도 들어서 적정선을 찾으면서 주석을 추가해야 한다.
      - 모든 코드에 주석을 다는 것이 아닌, 코드의 가독성과 이해를 돕기 위해서 추가해야 하지만, 현재 그 것을 구분하는 것이 쉽지 않다고 생각되어서 주석 추가에 관련된 내용을 좀 살펴보고 참고해서 추가해야 할 것 같다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/06b2406178e300b30917e2928abcec121f93b4c9)

  <br />

  - 주석을 효과적으로 사용하는 방법
    - 자명한 코드에 주석을 달지 않는다.
      - 코드 자체로 명확하게 의도가 드러나는 경우 주석이 필요하지 않다.
      - ex) 변수 이름이 이미 충분히 설명적이라면 주석이 필요 없을 수 있음
    - 복잡한 로직이나 비즈니스 로직에 주석을 사용
      - 코드의 의도나 동작 방식이 복잡하거나, 특정 비즈니스 요구사항을 반영하는 경우 주석이 도움됨
      - 코드의 복잡한 부분이나 특수한 상황에 대한 설명이 필요할 때 주석을 다는 것이 좋음
    - 의도를 설명하는 주석을 사용
      - 코드가 "무엇을" 하는지보다는 "왜" 그렇게 하는지에 대한 주석이 더 유용
    - 주석 대신 의미 있는 이름을 사용
      - 함수나 변수의 이름이 코드의 의도를 충분히 설명할 수 있다면, 주석을 줄일 수 있음
    - 코드가 아닌 주석을 유지보수 해야 할 때가 있음
      - 주석이 코드와 불일치하게 되면 오히려 혼란을 초래할 수 있으므로, 주석이 필요 없다면 지양하는 것이 좋다.
    - 결론, 주석은 필요할 때 특히 코드의 목적이나 의도가 명확하지 않을 때, 비즈니스 로직이 복잡할 때만 사용하는 것이 좋다.
      - 주석은 코드의 가독성을 높이기 위한 도구일 뿐, 주석 자체가 목적이 되어서는 안된다.
      - 주석은 코드의 결함을 보완하기 위한 것이 아니라, 코드의 가치를 높이는 것이어야 함

<br />

- 추가 및 해결 해야 할 내용
  - 컴포넌트를 분리해줄만한 곳이 있는지 확인해봐야 함
    - 컴포넌트 분리만이 아닌, 조건부나 이런 내용에서 중복된 부분을 줄이고 코드 가독성을 향상 시켜줘야 함
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 전체적으로 코드에 주석을 추가해서 어떤 코드가 어떤 기능을 하는지 알 수 있도록 해줘야 함
  - 페이지로 구성되어있는데, action 함수가 사용되지 않는 부분을 확인해야 함
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중

# 오늘 느낀 점

- 댓글 추가와 수정 컴포넌트는 원래 하나의 컴포넌트에서 구성되어 있다가, 댓글을 추가한 후에 내용이 초기화되지 않는 문제로 인해서 해당 문제를 해결해보려고 했지만, 결과적으로 해결하지 못해서 결국 컴포넌트 분리를 했었다. 예전에 작성한 TIL 내용을 다시 읽어보니 왜 분리를 했는지 납득하게 되었고, 현재 이 상태를 유지한채로 다른 내용을 살펴봐야 할 것 같다. 주석을 조금씩 추가해주고 있는데, 너무 많은 주석을 추가하면 오히려 가독성이 떨어지고 주석 때문에 코드가 복잡해보일 수 있으며, 유지보수에도 어려움이 있을 수 있기 때문에 정말 중요한 코드나, 이해가 좀 더 필요한 코드, 어떤 의도의 코드인지 알 수 있도록 명확한 설명이 필요한 코드 위주로 추가해줄 생각이다. 결국 주석을 추가하는 것도 해봐야 어느정도 감이 잡힌다고 생각되며, 이번 기회에 여러 시행착오를 통해서 주석 처리 방법도 익혀볼 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
