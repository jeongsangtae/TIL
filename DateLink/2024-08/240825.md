# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 관리자 페이지에서 구성된 예외 처리 내용들 에러 메시지 변경 및 로그인 컴포넌트 수정
    - 관리자 페이지의 컴포넌트에서 구성된 fecth 함수에 예외 처리 내용이 있는데, 예외 처리에서 에러 발생 시 출력되는 에러 메시지 내용이 통일성을 가지도록 수정해주고,사용자와 관리자 로그인 구분이 되지 않아서 로그인 컴포넌트에서 오류 수정
    - 프론트엔드 구성
      - AdminChats
        - 메시지 조회하는 fecth 함수
          - throw new Error 메시지 수정
          - 예외 처리 에러 메시지 수정
        - 메시지 전송하는 fetch 함수
          - response를 확인하는 내용을 간결하게 구성
      - AdminUserList, AdminComments, AdminPosts, AdminReplies, AdminUsers
        - throw new Error 메시지 내용 수정
        - 예외 처리 에러 메시지 수정
      - AdminComment, AdminReply, AdminUser
        - 예외 처리 에러 메시지 수정
      - AdminRootLayout
        - 예외 처리에 사용되는 alert 내용의 메시지 수정
      - Chats
        - WebSocket 연결 및 실시간 메시지 수신하는 내용과 메시지 전송 함수에 예외 처리 추가
        - 예외 처리를 추가하고 response를 확인하는 내용을 간결하게 구성
      - Login
        - Context API을 사용해서 로그인하는 내용에 await를 추가해서 비동기 함수의 실행이 완료될 때까지 기다린 후 코드가 실행되어, 관리자 로그인을 판단할 수 있도록 구성
    - 테스트 결과, 예외 처리의 에러 메시지가 통일성을 유지한채로 구성된 것을 확인할 수 있었고, 예외 처리가 누락된 fetch 함수에 추가해주면서 코드의 안정성을 높여주었다.
      - 예외 처리 오류 메시지에 전체적으로 "새로고침 후" 라는 내용을 추가해서 명확한 오류 메시지를 전달하도록 구성
      - 관리자 로그인을 시도했을 때, 관리자 페이지 이동이 되지않는 문제가 발생해서 확인해보니 await를 삭제해버려서 오류가 발생했는데, 다시 추가해주면서 문제없이 관리자 로그인은 관리자 페이지로 이동되는 것을 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/96bd2922f60b1b5096fcbfce5f1796f58ff95a46)

  <br />

  - 사용자 페이지, 관리자 페이지, 페이지 라우터에서 구성된 예외 처리 내용들 에러 메시지 변경
    - 사용자 페이지, 관리자 페이지, 페이지 라우터에서 구성된 fecth 함수에 예외 처리 내용이 있는데, 예외 처리 내용에서 에러 발생 시 출력되는 에러 메시지 내용이 통일성을 가지도록 수정해주었는데, 여기서 조회는 불러오기로 변경, 저장은 추가로 변경, 삭제는 그대로 유지하고 모든 예외 처리 오류 메시지에 "새로고침 후"를 추가해서 명확한 오류 메시지를 전달하도록 구성해주었다. 추가로 로그인이나 회원가입에서 "사용자" 내용을 빼서 조금 간결하게 구성해주고, 게시글 세부 페이지의 삭제에만 작동되는 action 함수에 수정까지 포함되어 주석과 예외 처리 오류 메시지가 구성되어 있어서 이 부분을 수정해주었다.
    - 프론트엔드 구성
      - AdminChats, AdminUserList, Chats, Comment, EditComment, PostForm, Reply, ReplyForm, Login, Signup, AdminPostDetailsPage, AdminPostsPage, AdminRootLayout, PostsPage
        - 예외 처리 오류 메시지 수정
      - Comments, CreateComment, Posts, Replies, Profile
        - 예외 처리 오류 메시지 수정
        - response 확인하는 내용의 오류 메시지 수정
      - PostDetailsPage
        - 예외 처리 오류 메시지 수정, 수정 내용을 빼고 삭제로만 구성
        - 주석에 수정과 관련된 내용을 빼고 삭제 내용으로만 구성
    - 테스트 결과, 예외 처리의 에러 메시지가 통일성을 유지한채로 구성된 것을 확인할 수 있었다.
      - 추가로, 게시글 세부 페이지에서 사용되는 action 함수를 다시 확인해보면서 주석과 에러 메시지가 잘못된 것 같다는 생각이 들어서, 게시글 세부 페이지 내용과 관련된 컴포넌트 파일과 라우터 파일을 다시 확인하고 확실하게 삭제 작업만 진행되는 것을 체크하고 주석과 에러 메시지를 수정해주었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/218f7ed63cbb3e99d8b809e9a5c9da3c22b68f6f)

<br />

- 추가 및 해결 해야 할 내용
  - 컴포넌트를 분리해줄만한 곳이 있는지 확인해봐야 함
    - 컴포넌트 분리만이 아닌, 조건부나 이런 내용에서 중복된 부분을 줄이고 코드 가독성을 향상 시켜줘야 함
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 전체적으로 코드에 주석을 추가해서 어떤 코드가 어떤 기능을 하는지 알 수 있도록 해줘야 함
  - 페이지로 구성되어있는데, action 함수가 사용되지 않는 부분을 확인해야 함
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 존재하지 않는 게시글 세부 페이지에 대해 처리해줘야 함
    - 원래 로딩 인디케이터가 보였으나, 예외 처리를 해주면서 현재 게시글 내용이 없는 빈 게시글 세부 페이지가 보여짐
  - 화면이 작아졌을 때 UI가 필요함
    - 반응형 CSS를 추가해야 함
  - 프론트엔드에서 추가한 예외 처리 내용을 확인하고, 추가 수정이 필요한 곳과 통일성이 제대로 유지 안되는 곳을 다시 확인해야 함
    - 추가/수정 에러 메시지가 출력되는 부분은 분리하는 것도 고려해야 함
    - 에러 메시지가 간결하고 통일성이 유지되는 지 확인해야 함
    - response를 확인하는 내용에서 간결하지 않은 부분은 수정해줘야 하고, response를 확인하지 않는 곳은 확인하도록 수정해야 함
    - 특히, 페이지 라우터의 loader, action 함수의 예외 처리 내용을 다시 확인해야 함
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
    - 추가로, 게시글 세부 페이지에서 삭제에 실패했을 때 no-access라는 경로를 사용하면 리소스를 찾을 수 없다는 페이지가 아닌 내용이 없는 페이지로 이동하기 때문에 확인을 해줘야 함
      - 이 내용은 아마도 게시글 세부 페이지의 postId와 관련된 문제 같은데, 존재하지 않는 postId에 대한 처리가 필요할 것으로 생각되며, 현재 게시글 번호가 아닌 일반 문자나 존재하지 않는 게시글 번호임에도 페이지가 이동되어 빈 게시글 세부 페이지가 보여지기 때문에 처리가 필요함
      - 그리고, 관리자 페이지의 게시글 세부 페이지에서 오류가 발생하면 no-access로 redirect하는 것은 문제가 없지만, 사용자 페이지의 게시글 세부 페이지에서만 문제가 되므로 확인 필요

# 오늘 느낀 점

- 예외 처리 에러 메시지 내용을 수정해주는 데, 생각보다 문장을 수정하는 중에 어색한 부분이 있어서 여러번 수정하고 이전보다 적절한 문장을 만드는 작업이 생각보다 어렵고 쉽지 않았던 것 같다. 사용자가 오류 메시지를 접했을 때 바로 이해가 되고 어떤 행동을 취해야 하는 지에 대해 알려주기 위해서 에러 메시지가 조금 길어지더라도 명확하게 전달하는 것도 중요하다고 생각되어 이전보다 조금 길게 내용을 구성하게 되었다. 그리고 문장을 구성하는데, 사용자 페이지와 관리자 페이지가 동일하게 구성되도록 해주면서 추가와 수정, 삭제 내용이 기본 틀 안에서 해당 항목에 따라 오류 메시지가 보여지도록 하다보니 좀 더 생각을 많이 하게 되었는데 지금 구성된 오류 메시지가 적절하다고 생각되어 이대로 마무리해줄 생각이다. 게시글 삭제와 관련된 action 함수 내용의 response를 확인하는 내용에서 예외 던지기가 아닌, 리디렉션 방식을 사용하는데 통일성을 위해서 예외 던지기로 수정하는 것을 고려 했지만, 현재 방식인 리디렉션 방식이 조금 더 UX 측면에서 좋다고 생각이 되며, 중요한 작업에서는 리디렉션이 더 나은 접근 방식이기 때문에 그대로 유지해주었다. 남은 작업으로 추가/수정을 분리해서 구성해주고, 전체적으로 예외 처리 내용이 통일성을 가진채로 구성이 되었는 지 확인해주고 사용자 페이지의 게시글 세부 페이지에서 게시글 번호와 관련된 내용에 신경쓰이는 오류가 있어서 이 부분에 대해 추가 확인해줘야 한다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
