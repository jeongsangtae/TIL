# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 관리자 인증, 채팅, 메인, 사용자 페이지 관련 코드에 설명을 위한 주석 내용 추가
    - 관리자 인증, 채팅, 메인, 사용자 페이지와 관련된 코드에서 설명이 필요하다고 생각되는 부분에 주석을 추가해서 코드에 대한 설명을 추가해주었다.
    - 프론트엔드 구성
      - AdminAuthentication
        - 조건부 내용이 구성된 곳에서 로그인 유무, 로컬 스토리지에 저장된 항목 확인 등에 대한 주석 내용을 추가
      - AdminChats
        - 메시지 입력 상태, 메시지 목록, socket, 입력 필드 상태에 관련된 주석 추가
        - 커스텀 훅을 사용하는 부분에 주석 추가
        - 기존 메시지를 가져오고, socket과 관련된 내용에 주석 추가
        - socket 연결과 실시간 메시지 수신과 관련된 내용에 주석 추가
        - 서버로 새로운 메시지를 받을 때마다 메시지가 추가되는 부분에 주석 추가
        - 특정 사용자의 채팅방에 참여하는 함수 내용에 주석 추가
        - 메시지 전송 함수에 주석 추가
        - 서버로 메시지를 POST 요청으로 전송하는 부분에 주석 추가
        - 전송 후 입력 필드와 높이 초기화하는 부분에 주석 추가
      - AdminUserItem
        - 사용자 항목을 클릭했을 때 호출되는 함수에 주석 추가
        - 선택된 사용자의 ID와 이름을 selectUser 함수로 전달하는 부분에 주석 추가
      - AdminUserList
        - 사용자 데이터와 마지막 메시지를 병합하여 상태를 업데이트하는 useEffect에 주석 추가
          - useEffect 내용에서 각 사용자의 마지막 메시지를 가져오는 비동기 작업에 주석 추가
          - useEffect 내용에서 모든 사용자의 메시지를 병합한 후 상태를 업데이트하는 내용에 주석 추가
        - 채팅 토글 핸들러, 사용자 채팅방 토글 핸들러, 특정 사용자 채팅방으로 이동하는 함수에 주석 추가
        - 검색어에 따라 필터링된 사용자 목록을 생성하는 부분에 주석 추가
        - JSX 코드 내의 사용자 목록을 보여주는 내용, 사용자 검색 입력 필드, 사용자 목록 렌더링, 선택된 사용자와의 채팅창, 채팅 토글 버튼 내용에 주석 추가
      - AdminMainHeader
        - 네비게이션 링크의 활성화 상태에 따라 클래스 설정하는 부분에 주석 추가
        - 관리자로 로그인된 경우에만 네비 메뉴와 사용자 목록이 표시되는데 이 부분에 주석 추가
        - 관리자가 접근할 수 있는 사용자 목록과 채팅 기능 부분에 주석 추가
      - AdminUsers
        - 사용자 목록을 새로고침하는 useEffect에 주석 추가
          - 이 내용은 사용자가 삭제된 후에도 최신 사용자 목록을 유지하는 코드이기 때문에 주석 추가
        - 사용자 삭제하는 함수에 주석 추가
          - 해당 함수 내의 삭제된 사용자를 목록에서 제거한 후 상태 업데이트하는 부분에 주석 추가
        - 사용자 수를 보여주는 내용, 사용자 목록을 렌더링하거나 사용자가 없는 경우 메시지를 표시하는 부분에 주석 추가
      - AdminUser
        - 사용자 삭제하는 함수에 주석 추가
          - 사용자 삭제를 위한 API 요청에 주석 추가
          - 부모 컴포넌트로 사용자 삭제 이벤트 전달하는 부분에 주석 추가
      - Chats
        - 커스텀 훅과 관련된 내용에 주석 추가
      - AdminRootLayout
        - 사용자 목록을 AdminUsers가 아닌, AdminRootLayout에서 가져오는 이유에 대한 주석을 추가
    - 관리자 페이지의 인증, 채팅, 메인헤더, 사용자 내용에 관한 주석을 추가해주고, 사용자 페이지의 채팅 컴포넌트에서 주석을 조금 더 추가하고, 관리자 루트 레이아웃에서 좀 더 자세한 설명을 위한 주석을 추가해주었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/5a90da32f8ed62734af8a7e1b38e04c6e3d87c11)

  <br />

  - 관리자 페이지의 게시글, 댓글, 답글 관련 코드에 설명을 위한 주석 내용 추가
    - 관리자 페이지의 게시글, 댓글, 답글 내용과 관련된 코드에서 설명이 필요하다고 생각되는 부분에 주석을 추가해서 코드에 대한 설명을 추가해주었다.
    - 프론트엔드 구성
      - AdminComments
        - 컴포넌트가 마운트될 때 댓글 데이터를 서버에서 가져오는 useEffect에 주석 추가
          - 서버에서 특정 게시글에 대한 댓글을 가져오는 API 호출 부분에 주석 추가
        - 답글 수를 업데이트하는 함수에 주석 추가
        - JSX 코드에서 전체 댓글 및 답글 수 표시, 댓글이 있는 경우에만 렌더링하는 부분에 주석 추가
      - AdminComment
        - 댓글 삭제하는 함수에 주석 추가
          - 댓글 삭제 요청에 주석 추가
        - 답글 수를 상위 컴포넌트에 전달하는 함수에 주석 추가
      - AdminPosts
        - Posts와 마찬가지로 URL 쿼리 매개변수, 게시글 관련 상태 관리, 서버에서 게시글 데이터 가져오는 내용, 로딩 상태 관련 내용, 페이지 변경과 관련된 내용, 검색과 관련된 내용에 대한 주석 추가
      - AdminPost
        - Posts와 마찬가지로 게시글 내용에서 줄바꿈, 미리보기 내용과 관련된 주석을 추가
        - 그 외에 게시글 제목과 내용 클릭 시 게시글 상세 페이지로 이동하는 내용에 주석 추가
        - 미리보기 내용과 더 많은 내용이 있으면 "..."으로 표시되는 부분에 주석 추가
      - AdminPostDetails
        - 게시글 로드가 완료되지 않은 경우 로딩 표시되는 부분에 주석 추가
        - 게시글 삭제 함수에 주석 추가
        - 드롭다운 버튼 함수의 상위 요소로 이벤트가 전파되는 것을 방지하는 부분에 주석 추가
        - 드롭다운 메뉴 외부 클릭 시 닫히는 함수에 주석 추가
      - AdminSearch
        - 검색 필드 선택 옵션, 필드 선택, 옵션들 내용, 필드 이름, 검색어 입력과 검색 버튼 내용에 주석 추가
      - AdminReplies
        - 컴포넌트가 마운트될 때 답글 데이터를 서버에서 가져오는 useEffect 내용에 주석 추가
          - 서버에서 특정 게시물의 특정 댓글에 대한 답글을 가져오는 API 내용에 주석 추가
        - 답글이 있는 경우 밑줄이 렌더링되는 내용, 답글이 있을 경우 렌더링되는 내용에 주석 추가
      - AdminReply
        - 답글 삭제하는 함수와 답글 삭제 요청에 주석 추가
      - Post
        - 주석 위치 변경
    - 관리자 페이지의 게시글, 댓글, 답글 내용에 주석을 추가해주었는데 사용자 페이지의 내용과 거의 유사해서 비교적 쉽게 주석을 추가할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/e67b3b8cf95a83920e99039bd5eeb26ba82fa76b)

  <br />

  - 라우터, context api 관련 코드에 설명을 위한 주석 내용 추가 및 사용하지 않는 파일 삭제
    - 라우터 내용이 모아져있는 main 컴포넌트와 context api 내용에서 설명이 필요하다고 생각되는 부분에 주석을 추가해서 코드에 대한 설명을 추가해주고, 사용하지 않는 파일을 삭제해주었다.
    - 프론트엔드 구성
      - main
        - 라우터 설정의 각 경로에 대한 컴포넌트, 로더, 액션 등의 전체 정의가 있는 곳에 주석 추가
        - 메인 레이아웃 컴포넌트에 주석 추가
        - 주석 처리된 errorElement 부분에 나중에 필요시 활성화되는 내용에 관한 주석 추가
        - 게시글 목록 페이지, 게시글 데이터를 가져오는 loader 함수에 주석 추가
        - 게시글 추가 및 수정 action에 대한 주석 추가
        - 게시글 세부 페이지의 useRouteLoaderData에 사용될 routeId 내용에 주석 추가
        - 게시글 세부 정보 loader, 게시글 세부 정보 페이지에 주석 추가
        - 게시글 삭제 action, 게시글 수정 action에 주석 추가
        - 접근 권한과 관련된 주석 추가
        - 관리자 페이지의 채팅, 사용자 페이지 useRouteLoaderData에 사용될 routeId 내용에 주석 추가
        - 관리자 페이지에서 사용자 데이터를 가져오는 loader, 관리자 페이지 레이아웃 컴포넌트에 주석 추가
        - 관리자 페이지에서 게시글 데이터를 가져오는 loader에 주석 추가
        - 관리자 페이지의 게시글 세부 페이지 useRouteLoaderData에 사용될 routeId 내용에 주석 추가
        - 관리자 페이지의 게시글 세부 정보 가져오는 loader, 게시글 삭제 action에 주석 추가
        - 404 페이지, 즉 경로가 없을 때 표시하는 부분에 주석 추가
        - 게시글 생성 페이지, 게시글 수정 페이지, 프로필 페이지, 관리자 홈 페이지, 관리자 게시글 페이지 등 인증이 필요한 내용에 주석 추가
        - React 앱의 진입점인 루트 엘리먼트를 생성하고, AuthContextProvider로 앱을 감싸는 부분에 주석 추가
      - auth-context
        - AuthContext를 생성하고 초기 상태를 정의하는 내용에 주석 추가
          - 로그인 여부, 사용자 정보, 로딩 상태, 테마 모드에 주석 추가
          - 로딩 상태를 설정하는 함수, 로그인 함수, 로그아웃 함수, 토큰 갱신 함수, 리프레쉬 토큰 만료 시간 갱신 함수, 테마 모드 토글 함수에 주석 추가
        - 인증 및 테마 관련 상태와 함수들을 제공하는 AuthContextProvider 컴포넌트 시작 부분에 주석 추가
        - 테마 모드 상태를 로컬 스토리지에서 불러와 관리하는 부분에 주석 추가
        - 사용자가 로그인된 상태인지 확인하는 함수에 주석 추가
          - 사용자 정보를 상태로 설정, 사용자 역할을 저장하는 부분에 주석 추가
        - 토큰 갱신하는 함수에 주석 추가
          - 1시간 유효, 만료 시간 저장하는 부분에 주석 추가
        - 리프레시 토큰 만료 시간을 갱신하는 함수에 주석 추가
          - 토큰 만료 시간 저장하는 부분에 주석 추가
        - 로그인 여부에 따라 사용자 인증 및 토큰 갱신을 확인하는 useEffect에 주석 추가
          - 토큰 만료를 확인하고 필요 시 갱신하는 함수에 주석 추가
            - 토큰 갱신 후 로그인 상태 유지, 리프레시 토큰 만료 시 로그아웃되는 내용에 주석 추가
          - 초기 확인 부분에 주석 추가
          - 일정 시간마다 토큰 만료 확인하는 내용에 주석 추가
          - 컴포넌트 언마운트 시 인터벌 정리하는 내용에 주석 추가
        - 앱이 처음 로드될 때 로그인 상태 확인하는 useEffect에 주석 추가
          - 로컬 스토리지에서 로그인 상태를 불러오는 내용에 주석 추가
        - 테마 모드 변경 시 로컬 스토리지에 저장하는 useEffect에 주석 추가
        - 로그인 처리 함수, 로그아웃 처리 함수에 주석 추가
          - 로그인 처리 함수의 사용자 정보 확인, 리프레시 토큰 만료 시간 갱신 부분에 주석 추가
          - 로그아웃 처리 함수의 관리자 로그아웃 시 홈으로 이동하는 내용에 주석 추가
          - 로그아웃 시 로컬 스토리지가 초기화되는 내용에 주석 추가
        - 사용자 이름 설정, 테마 모드 토글 함수, 테마에 따른 클래스 설정 내용에 주석 추가
        - AuthContext를 사용하는 컴포넌트들이 children으로 전달되는 내용에 주석 추가
      - AdminCommentsPage
        - 사용하지 않는 파일이므로 삭제
    - 라우터 전체 내용을 관리하는 main 컴포넌트와 context api를 관리하는 auth-context 파일 내부에서 주석을 추가해주었는데 이 내용들은 페이지 라우터와 여러 곳에서 재사용되는 Context API 내용이기 때문에 조금 더 자세하게 주석을 추가해주었고, 사용하지 않는 파일인 AdminCommentsPage 컴포넌트 파일을 삭제해주었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/4591b45a1e779703bf8a56b3791b805d19c21770)

<br />

- 추가 및 해결 해야 할 내용
  - 컴포넌트를 분리해줄만한 곳이 있는지 확인해봐야 함
    - 컴포넌트 분리만이 아닌, 조건부나 이런 내용에서 중복된 부분을 줄이고 코드 가독성을 향상 시켜줘야 함
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 전체적으로 코드에 주석을 추가해서 어떤 코드가 어떤 기능을 하는지 알 수 있도록 해줘야 함
  - 페이지로 구성되어있는데, action 함수가 사용되지 않는 부분을 확인해야 함
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 관리자 페이지의 게시글 삭제 버튼과 관련된 className 내용을 다시 살펴봐야 함
    - opacity가 필요 없어보임

# 오늘 느낀 점

- 프론트엔드에서 주석은 다 추가해준 것 같기 때문에 마지막으로 프론트엔드 파일들을 전체적으로 한 번 살펴보고 빠진 곳이 있는지 확인해줘야 할 것 같다. CSS 파일에서 사용되지 않고 주석 처리된 내용은 삭제를 좀 해줘야 하고, 주석을 꼭 추가해야 하는지 일단 확인이 필요하고 만약 추가해야 한다면 정말 복잡하거나 중요한 CSS에만 추가하는 것으로 방향을 잡아야 할 것 같다. 그리고 백엔드에서 주석을 추가해줘야 하는데 여기 내용은 특히 더 신경써서 자세히 추가해줘야 할 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
