# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 반응형 구성 정리

    - 반응형을 적용해야 할 컴포넌트 및 페이지
      - 메인헤더
        - 관리자 페이지의 메인헤더
      - 게시글 목록
        - 관리자 페이지의 게시글 목록
      - 게시글 세부 페이지
      - 게시글 생성 페이지
      - 게시글 수정 페이지
      - 채팅창
        - 관리자 페이지의 채팅
      - 관리자 페이지의 사용자 관련 내용
    - 반응형이 적용되어야 하는 목록의 세부 내용
      - 메인헤더 (관리자 페이지 포함)
        - 중앙에 로고 내용이 보여지고, 오른쪽에 햄버거 모양의 버튼이 보여져야 함
        - 햄버거 모양의 버튼 클릭 시, 아래로 내용이 슬라이드 되며 홈과 게시판 그리고 드롭다운 메뉴 버튼이 보여져야 함
        - 드롭다운 메뉴 버튼 클릭 시, 아래로 내용이 슬라이드 되며 로그인, 로그아웃, 테마 모드 변경 버튼이 보여져야 함
        - 로그인, 로그아웃 버튼 클릭 시 해당 모달이 화면 전체를 덮으며 보여지도록 해야 함
      - 게시글 목록
        - 게시글 목록 상단에 어떤 페이지인 지 알려주는 내용과 총 게시글 수가 보이도록 해주고, 상단에 위치한 글쓰기 버튼은 보이지 않도록 해줄 생각
          - 하단에 있는 글쓰기 버튼은 안보이도록 해줄 생각
        - 간단하게 한 줄씩 게시글 번호, 제목 태그, 제목, 내용, 작성자 이름, 작성 날짜, 조회 수가 보여지도록 해야 함
        - 검색 기능도 깨지지 않고 일정 간격을 유지한 채로 보여지도록 해야 함
          - 검색 기능과 글쓰기 버튼이 한 줄로 보이고, 그 아래에 페이지네이션이 보이도록 해줘야 함
      - 게시글 세부 페이지
        - 제일 상단에 어떤 페이지인 지 알려주는 내용이 보여지도록 해줄 생각
          - 크기를 조절해서 조금 작게 구성해줄 생각
        - 제목 태그와 제목 내용이 한 줄로 표시되도록 구성해야 함
        - 작성자가 한 줄, 작성된 날짜와 조회 수가 한 줄로 구성되도록 해서 이 두 개의 내용이 하나의 div에 속해서 보여지도록 구성 해야 함
        - 게시글 내용은 크기만 맞춰서 잘 보이도록 구성해야 함
        - 여기서 드롭다운 메뉴는 삭제하고 수정과 삭제 버튼이 게시글 내용 아래에 보여지도록 구성해야 함
        - 댓글 내용은 크기만 맞춰서 잘 보여지도록 구성해야 함
      - 게시글 생성 페이지, 게시글 수정 페이지
        - 어떤 페이지인 지 알려주는 내용이 제일 상단에 그대로 보여지지만 크기를 줄여서 UI가 깨지지 않도록 해줘야 함
        - 제목과 내용을 입력하는 부분이 크기가 화면에 맞춰지도록 해주고 작성자 이름이 보여져야 함
        - 등록과 취소 버튼도 한 줄로 보이도록 구성해야 함
      - 채팅창
        - 채팅 버튼을 클릭하면, 하단에 있는 채팅 버튼 위에 채팅창이 열리면서 채팅 버튼을 제외한 윗 부분의 전체 화면을 가리면서 채팅창이 보이도록 구성해야 함
          - 이 경우 백드롭이 어둡게 되어서 다른 내용이 보이지 않고 채팅에 집중할 수 있도록 하는 것을 고려 중
      - 관리자 페이지의 사용자 관련 내용
        - 어떤 페이지인 지 알려주는 내용을 축소해서, 왼쪽에 페이지 이름 그리고 오른쪽에 전체 사용자 수를 보여주도록 구성해야 함
        - 사용자 아이디와 이름이 보여지고 삭제 버튼이 보여지도록 해주는데, 크기를 잘 맞춰서 짤리지 않도록 해줘야 함
    - React에서 반응형 작업을 하는 여러 방법

      - CSS 미디어 쿼리를 활용한 조건부 렌더링 (가장 전통적인 방법)

        - CSS 미디어 쿼리를 사용해 "display: none" 등의 속성을 적용하여 특정 컴포넌트를 숨기고 다른 컴포넌트를 보여주는 방식
        - 작은 화면에서는 간호화된 컴포넌트가 보여지도록 할 수 있음
        - 간단하고 CSS만으로 처리할 수 있지만, 모든 컴포넌트가 DOM에 렌더링되고 있을 수 있기 때문에 퍼포먼스가 다소 떨어질 수 있음

        ```
        // CSS 미디어 쿼리 예시

        function MyComponent() {
          return (
            <>
              <div className="desktop-only">
                {/* 큰 화면에서만 보이는 컴포넌트 */}
                <DesktopMenu />
              </div>
              <div className="mobile-only">
                {/* 작은 화면에서만 보이는 컴포넌트 */}
                <MobileMenu />
              </div>
            </>
          );
        }
        ```

      - React의 상태와 윈도우 크기 이벤트를 이용한 조건부 렌더링

        - React의 상태와 window 객체를 활용해 화면 크기를 감지하고, 이에 따라 다른 컴포넌트를 렌더링하는 방법
        - React 상태로 처리하면, 실제로 화면 크기에 따라 컴포넌트가 전환되기 때문에 불필요한 컴포넌트 렌더링을 피할 수 있지만, 약간의 JS 로직이 필요

        ```
        // React의 상태와 윈도우 크기 이벤트를 이용한 조건부 렌더링 예시

        import React, { useState, useEffect } from "react";

        function MyComponent() {
          const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);

          useEffect(() => {
            const handleResize = () => {
              setIsMobile(window.innerWidth <= 768);
            };

            window.addEventListener("resize", handleResize);
            return () => window.removeEventListener("resize", handleResize);
          }, []);

          return (
            <>
              {isMobile ? (
                <MobileMenu />
              ) : (
                <DesktopMenu />
              )}
            </>
          );
        }
        ```

      - React 라이브러리 사용

        - `react-responsive` 라이브러리를 사용해서 미디어 쿼리와 비슷한 방식으로, 컴포넌트 내에서 조건부 렌더링을 쉽게 구현할 수 있음
        - 미디어 쿼리 기반의 조건부 렌더링을 보다 쉽게 구현할 수 있고, 코드가 깔끔하게 유지되며, 조건에 따라 컴포넌트의 렌더링을 제어할 수 있어 성능 면에서도 유리

        ```
        // React 라이브러리 사용 예시

        import React from "react";
        import { useMediaQuery } from "react-responsive";

        const MyComponent = () => {
          const isMobile = useMediaQuery({ query: "(max-width: 768px)" });

          return (
            <>
              {isMobile ? (
                <MobileMenu />
              ) : (
                <DesktopMenu />
              )}
            </>
          );
        };
        ```

      - 반응형 UI를 구성할 때, 특정 화면 크기에서 다른 컴포넌트를 렌더링하는 방법은 유효한 방법으로, 화면 크기에 따라 컴포넌트를 분리해서 사용하면 UX와 퍼포먼스 모두 개선할 수 있는 효과적인 방법이 됨
      - 추가로, Custom Hook으로 추상화할 수 있음
        - Custom Hook으로 React스러운 방식으로 재사용 가능한 코드를 구성할 수 있음
        - Custom Hook을 사용해서, window 객체와의 상호작용을 React의 선언적 프로그래밍 스타일에 맞춰 처리
      - 결론은, React에서 반응형 작업을 할 때 React스럽게 구성하는 방법은 Custom Hook을 사용하여 창 크기 이벤트를 관리하거나, `react-responsive` 같은 라이브러리를 사용하는 것이 좋다.
        - 이 내용을 사용하면 코드가 더 유지보수하기 쉬워지고, 퍼포먼스도 향상되며, 필요에 따라 조건부 렌더링을 유연하게 관리할 수 있음

<br />

- 추가 및 해결 해야 할 내용
  - 컴포넌트를 분리해줄만한 곳이 있는지 확인해봐야 함
    - 컴포넌트 분리만이 아닌, 조건부나 이런 내용에서 중복된 부분을 줄이고 코드 가독성을 향상 시켜줘야 함
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 화면이 작아졌을 때 UI가 필요함
    - 반응형 CSS를 추가해야 함
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
  - auth-context 파일의 내용을 분리하는 것도 고려해야 함
    - 하나의 파일에 Context API 내용이 너무 모아져 있는 것 같아서 분리를 고려해야 함

# 오늘 느낀 점

- 추가 및 해결 해야 할 내용을 한 번 쭉 살펴본 후에 처리한 내용들은 다시 한 번 확인한 후에 내용을 삭제해주고, 아직 부족하거나 추가해야 할 기능의 내용은 남겨놓았다. 그리고 반응형 작업을 하기 전에 어떤 페이지와 컴포넌트에 반응형을 적용시킬 것이며, 컴포넌트와 페이지 내용에 반응형이 적용되면 어떤 식으로 화면에 출력되도록 할 것인 지에 대한 내용을 정리해주었다. 추가로 React에서 반응형 작업을 어떤 방식으로 처리하는 지에 대해 찾아보고 정리를 한 후에, CSS 미디어 쿼리를 사용하는 방식으로 구성을 하려고 했으나, 작업을 진행하면 생각보다 반응형 작업이 좀 복잡할 것 같다는 생각도 들어서 windw 크기 이벤트를 사용하는 방법이나 "react-responsive" 라이브러리를 사용하는 방법을 생각 중이다. 일단 전체적으로 어떤 식으로 코드 구성이 변경될 지 좀 생각을 해보고, JSX 코드나 컴포넌트 내의 구조가 많이 변경되는 지도 확인해서 어떤 방식으로 반응형 작업을 해줄 지 확실하게 정하고 작업을 진행해봐야 할 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
