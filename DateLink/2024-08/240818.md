# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 게시글, 댓글, 답글 관련 라우트에 예외 처리 추가
    - board-routes 파일의 게시글, 댓글, 답글 관련 라우트에 예외 처리를 추가해서 오류가 발생했을 때 시스템이 비정상적으로 종료되지 않도록 방지해주고, 오류를 로깅해서 문제를 더 쉽게 진단할 수 있도록 해주었다.
    - 백엔드 구성
      - 게시글, 댓글, 답글 관련 라우트에서 예외 처리 추가
        - 예외 처리를 통해서 오류가 발생하면, catch 블록으로 넘어가서 error 내용이 백엔드에 출력되고 프론트엔드로 error가 전달되도록 구성
      - 이미 예외 처리가 추가된 라우트에서는 console.error를 추가해서 백엔드 서버에서 알 수 있도록 구성
      - post, comment, reply 내용을 DB에서 조회하는데, 찾지 못하는 경우 바로 종료되도록 구성
      - 게시글, 댓글, 답글을 수정, 삭제할 때 본인인지 확인하는 내용을 수정해서 일치하는 지가 아닌, 불일치하는 지 확인하고 불일치한다면 그대로 권한이 없다는 내용과 함께 종료되도록 구성
        - 만약 일치한다면 정상적으로 다음 코드가 진행되도록 구성
      - 프론트엔드에서 넘어오는 "req.body.content" 같은 내용을 따로 변수를 선언하지 않고, 바로 사용하도록 변경
        - 해당 변수를 한 번만 사용하는데, 변수를 사용해서 굳이 불필요하게 복잡한 구성할 필요가 없다고 생각되었고 간결성이나 직관성을 고려하여 직접 사용하도록 변경해주었다.
    - board-routes 파일에 구성된 모든 라우트에 예외 처리를 추가했는데, 코드가 100줄 가량 늘어났지만 코드의 안정성은 더 높아졌다고 생각이 되며, 예상치 못한 상황이나 오류가 발생했을 때 애플리케이션이 적절하게 대응할 수 있도록 구성이 되었다고 생각이 된다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/8935470bc02904aa5c1bf26dd55c7bd91a4b7766)

  <br />

  - 회원가입, 로그인, 토큰, 로그아웃, 프로필 라우트에서 예외 처리 추가
    - user-routes 파일 내용의 회원가입, 로그인, 토큰, 로그아웃, 프로필 라우트에 예외 처리를 추가해서 애플리케이션 안정성을 향상시켜주었다.
    - 백엔드 구성
      - 회원가입, 로그인, 토큰, 로그아웃, 프로필 라우트에 예외 처리 추가
        - 예외 처리를 통해서 오류가 발생하면, catch 블록으로 넘어가서 error 내용이 백엔드에 출력되고 프론트엔드로 error가 전달되도록 구성
      - 회원가입의 예외 처리에서 이메일이 이미 존재하는지 확인하는데, 이 때 사용되는 return의 위치를 변경해주었다.
        - "res.status(...).json(...)" 내용 이후에 return이 오도록 구성해서 명확하게 전달되도록 구성했으나, 코드가 길어지는 단점이 있어서 가독성이 떨어진다고 생각되어 "return res.status(...).json(...)"이 한 줄로 간결하게 구성되어 더 짧고 직관적으로 보이도록 변경
        - 이 내용은 아마 팀으로 프로젝트를 한다면 팀 상황에 맞춰서 선택해야 함
        - 명확한 것을 좋아하지만, 간결하게 구성되는 것도 중요하다고 생각되어 변경
      - 로그인에서 이메일이 존재하지 않거나 비밀번호가 일치하지 않는 경우 오류 메시지를 전송하는데, 이 때 if-else문에 if문을 중첩해서 사용하기 때문에 가독성이 떨어진다고 생각되어, if문을 각각 사용하도록 구성을 변경
        - 이메일 존재 여부에 대해 if문을 사용해서 일치하지 않을 때 종료되도록 해주고, 해시된 비밀번호가 일치하는지 확인해서 일치하지 않는 경우 바로 종료되도록 구성을 변경해주었다.
      - 로그인 부분에서 이메일과 비밀번호가 모두 올바르면 JWT 토큰을 생성하여 쿠키에 저장하는 부분이 있는데, 해당 내용은 try-catch문을 사용해서 예외 처리를 해주고 있지만 이 내용은 로그인 라우터 전체 예외 처리와 중복되기 때문에 삭제해서 하나의 try-catch 문으로 로그인 라우터 내용이 전체 예외 처리되도록 변경해주었다.
    - user-routes 파일에 구성된 모든 라우트 내용에서도 예외 처리를 추가해주고 내용을 다시 살펴보는데 중복되는 예외 처리 내용이 너무 많다고 생각되어서, 중복을 줄일 수 있도록 헬퍼 함수를 추가하는 것도 고려를 해봐야 할 것 같다.
      - 헬퍼 함수를 사용해서 코드 중복을 줄이고 가독성을 높이며, 일관된 오류 처리를 해줄 수 있다.
      - 헬퍼 함수를 추가한다면, 사용될 부분은 catch 블록의 내용과 board-routes 내용의 post, comment, reply를 확인하는 부분에서 사용해야 할 것 같다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/857daa3645520d3953c08b6a31234cc4365c3b04)

<br />

- 추가 및 해결 해야 할 내용
  - 컴포넌트를 분리해줄만한 곳이 있는지 확인해봐야 함
    - 컴포넌트 분리만이 아닌, 조건부나 이런 내용에서 중복된 부분을 줄이고 코드 가독성을 향상 시켜줘야 함
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 전체적으로 코드에 주석을 추가해서 어떤 코드가 어떤 기능을 하는지 알 수 있도록 해줘야 함
  - 페이지로 구성되어있는데, action 함수가 사용되지 않는 부분을 확인해야 함
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 존재하지 않는 게시글 세부 페이지에 대해 처리해줘야 함
    - 원래 로딩 인디케이터가 보였으나, 예외 처리를 해주면서 현재 게시글 내용이 없는 빈 게시글 세부 페이지가 보여짐
  - 화면이 작아졌을 때 UI가 필요함
    - 반응형 CSS를 추가해야 함
  - 백엔드에 예외 처리를 구성해주는데 중복된 코드가 너무 많아서, 헬퍼 함수를 추가하는 것도 고려해야 함

# 오늘 느낀 점

- try-catch문이 사용된 라우트에서 내용을 수정해 간소화를 하려고 했으나, try-catch문이 사용되지 않은 라우트가 훨씬 많았고 해당 라우트들에서 try-catch문을 추가해주면서 오히려 코드가 많이 늘어나게 되었다. 하지만 코드가 늘어남에도 예외 처리는 애플리케이션 안정성 향상에 도움이 많이 되기 때문에 라우트마다 예외 처리를 추가해주었다. 예외 처리를 해주면서 문제점을 몇 가지 발견했는데, 첫 번째로 예외 처리 내용의 catch 블록에서 error를 확인하는 부분이 모두 같은 내용으로 중복되기 때문에 이 중복을 줄일 헬퍼 함수를 추가해줘야 한다는 것이고, 두 번째로 게시글 세부 페이지 URL에서 게시글 번호 대신에 존재하지 않는 게시글 번호나 문자를 입력하면 접근 권한이 없는 페이지나 리소스가 없는 페이지로 이동하는 것이 아닌, 아무런 내용이 없는 게시글 세부 페이지로 이동하기 때문에 이에 대한 예외 처리나 인증, 접근 권한 처리를 해줘야 한다. 그리고 아직 관리자 페이지의 예외 처리는 해주지 않은 상태이기 때문에 빠르게 처리해줘야 하고, 채팅 관련 내용에서도 예외 처리를 해줘야 한다. 마지막으로 CSS 내용에서 반응형에 대한 내용을 간단하게 추가해줄 생각인데, 모바일이나 모니터 화면이 작은 상태에서 UI가 망가지지 않고 작은 상태로 내용이 모두 보여질 수 있도록 반응형 작업을 해줘야 할 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
