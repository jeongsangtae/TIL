# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - NotFound 컴포넌트의 Link 컴포넌트 경로 수정 및 로딩 인디케이터 테마 모드 class 추가
    - 사용자 페이지와 관리자 페이지에서 오류가 발생하면 NotFound 컴포넌트 내용이 출력되는데, 이 때 홈으로 돌아가기 버튼을 누르면 각각의 페이지 홈으로 이동되는 것이 아닌, 사용자 페이지의 홈으로 이동되기 때문에 Link 컴포넌트의 to 내용이 조건부로 사용되어 사용자 페이지와 관리자 페이지에서 각각 다른 홈으로 이동되도록 구성해주고, 로딩 인디케이터 내용이 다크 모드에서 그대로 흰색 배경이 보이기 때문에, 테마 모드를 추가해서 다크 모드가 적용되도록 구성해주었다.
    - 프론트엔드 구성
      - NotFound
        - Link 컴포넌트에서 사용되는 to 내용이 조건부로 바뀌도록 변수를 추가해서 사용
        - 로컬 스토리지에서 role 항목을 가져와서 "user" 라면 "/"로 이동
        - role 항목이 "user"가 아니라면 "/admin"으로 이동되도록 구성
      - LoadingIndicator
        - Context API를 사용하기 위한 내용 추가
        - 로딩 인디케이터의 배경이 되는 부분에 Context API의 테마 모드 class를 추가
    - CSS 구성
      - lds-ring
        - margin과 padding을 0으로 구성
        - height를 100vh로 변경
        - 이렇게 구성해서 빈 공간과 스크롤이 없는 상태로 화면을 꽉 채우도록 구성
      - lds-ring.dark-mode
        - 배경에 미리 구성된 다크 모드 배경색 변수를 사용
    - 테스트 결과, 사용자 페이지와 관리자 페이지에서 오류가 발생하고 리소스가 존재하지 않는 페이지로 이동되었을 때, "홈으로 돌아가기" 버튼을 클릭하면 각 페이지의 홈으로 이동되는 것을 확인할 수 있었고, 로딩 인디케이터가 보여질 때 테마 모드에 따라서 배경이 다르게 보이는 것을 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/93869d25d63a8f2f08710e7fae513edfda801a0f)

  <br />

  - 예외 처리 내용 마지막 확인 및 Context API에서 구성된 내용에 예외 처리 추가
    - 추가한 예외 처리 내용을 마지막으로 확인해주기 위해서 모든 파일을 다시 검토하던 중에 Context API에서 구성된 함수와 useEffect 내용에 예외 처리 내용이 빠진 것을 확인하고 추가해주었다.
    - 프론트엔드 구성
      - auth-context
        - 로그인 여부에 따라 사용자 인증 및 토큰 갱신을 확인하는 useEffec에 예외 처리 추가
          - 이 내용의 예외 처리는 2개로 나눠서 처리할 수도 있으나, 하나의 예외 처리만 추가해서 간결하게 구성되도록 해줌
          - catch 블록에서 에러 헬퍼 함수를 사용할 수도 있었으나, console.error만 사용해서 콘솔에 오류가 출력되도록 해주고, 오류가 발생하면 로그아웃되도록 구성
        - 로그인 처리 함수에 예외 처리 추가
          - 로그인 처리 과정 중에 오류가 발생하면 로그인 상태를 해제하고 오류 메시지가 표시되도록 구성
          - 오류 메시지는 에러 헬퍼 함수를 재사용해서 출력되도록 구성
        - 로그아웃 처리 함수에 예외 처리 추가
          - 로그아웃과 관련된 fetch 함수에 예외 처리를 추가하고, response를 확인하는 내용을 수정
          - response가 올바른 응답일 경우, role 항목을 확인하고 로컬 스토리지 내용을 초기화하는 작업이 진행됐으나, 해당 내용을 변경해서 response를 확인하고 올바른 응답이 아닐 경우 바로 에러를 던지고, 올바른 응답일 경우 role 항목 확인과 로컬 스토리지 내용을 초기화하는 작업이 진행되도록 변경
          - 오류 메시지는 에러 헬퍼 함수를 재사용해서 출력되도록 구성
    - Context API의 일부 내용을 제외하고 모두 구성된 것을 확인할 수 있었고, Context API에서 빠진 예외 처리 내용도 모두 추가 구성해준 후에 테스트를 진행해서 문제없이 작동되는 것을 확인해주었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/1180070d2280ac0a4bb57fb0d3c2d139e5904752)

<br />

- 추가 및 해결 해야 할 내용
  - 컴포넌트를 분리해줄만한 곳이 있는지 확인해봐야 함
    - 컴포넌트 분리만이 아닌, 조건부나 이런 내용에서 중복된 부분을 줄이고 코드 가독성을 향상 시켜줘야 함
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 전체적으로 코드에 주석을 추가해서 어떤 코드가 어떤 기능을 하는지 알 수 있도록 해줘야 함
  - 페이지로 구성되어있는데, action 함수가 사용되지 않는 부분을 확인해야 함
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 존재하지 않는 게시글 세부 페이지에 대해 처리해줘야 함
    - 원래 로딩 인디케이터가 보였으나, 예외 처리를 해주면서 현재 게시글 내용이 없는 빈 게시글 세부 페이지가 보여짐
  - 화면이 작아졌을 때 UI가 필요함
    - 반응형 CSS를 추가해야 함
  - 프론트엔드에서 추가한 예외 처리 내용을 확인하고, 추가 수정이 필요한 곳과 통일성이 제대로 유지 안되는 곳을 다시 확인해야 함
    - 마지막 확인 한 번 해줘야 함
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중

# 오늘 느낀 점

- 예외 처리에 대해 전체적으로 빠진 곳은 없는 지 체크해주었고, Context API에서 누락된 부분을 확인하고 처리해 주었다. 그리고 리소스가 존재하지 않는 페이지의 "홈으로 돌아가기" 버튼에 대해 각 페이지에서 다르게 이동되도록 구성을 해주고, 로딩 인디케이터의 배경이 테마 모드에 따라서 다른 색이 보여지도록 구성을 해주었다. 이제 마지막 남은 작업으로 반응형 작업과 관리자 채팅의 마지막 메시지 실시간 반영에 대한 부분인데, 여기서 반응형은 바로 작업을 해줄 생각이지만 관리자 채팅에서 마지막 메시지가 실시간으로 반영되는 부분은 굳이 필요없다는 생각도 들어서 일단은 추가하지 않을 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
