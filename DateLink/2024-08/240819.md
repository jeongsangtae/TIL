# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 사용자 채팅, 관리자 페이지, 관리자 채팅 관련 라우트에 예외 처리 추가
    - 사용자 채팅, 관리자 페이지의 게시글, 댓글, 답글, 관리자 채팅 관련 라우트에 예외 처리를 추가해서 오류가 발생했을 때 시스템이 비정상적으로 종료되지 않도록 방지해주고, 오류를 로깅해서 문제를 더 쉽게 진단할 수 있도록 해주었다.
    - 백엔드 구성
      - 사용자 채팅, 관리자 페이지의 게시글, 댓글, 답글, 관리자 채팅 관련 라우트에서 예외 처리 추가
        - 예외 처리를 통해서 오류가 발생하면, catch 블록으로 넘어가서 error 내용이 백엔드에 출력되고 프론트엔드로 error가 전달되도록 구성
      - admin-routes 파일의 post, comment, reply, user 내용을 DB에서 조회하는데, 찾지 못하는 경우 바로 종료되도록 구성
      - 관리자 페이지에서는 게시글, 댓글, 답글, 사용자를 삭제할 때 본인인지 확인하는 내용이 딱히 필요 없기 때문에 삭제하려는 항목의 존재 유무만 확인하고 바로 삭제되도록 구성
      - admin-router 파일의 이름을 admin-routes로 변경
        - 다른 파일은 모두 routes로 구성을 해놓은 상태였는데, 관리자 페이지의 라우트 파일만 router로 해놓은 상태라서 해당 파일의 이름을 수정해주었다.
    - user-chat-routes, admin-routes, admin-chat-routes 파일에서 구성된 라우트에 예외 처리를 해주면서 모든 라우트 내용에 예외 처리를 추가해주었는데, 여기서 catch 블록 내용이 중복으로 사용되기 때문에 해당 내용을 재사용할 수 있는 헬퍼 함수 내용을 따로 만들어서 모든 라우트 파일에서 사용할 수 있도록 해줘야 한다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/b0f2c1e05f0844e7cfad332c6bf513d5062d652b)

  <br />

  - 헬퍼 함수 추가 및 사용
    - utils 폴더를 백엔드에 추가하고, error-handler 라는 파일을 생성해서 해당 파일에 헬퍼 함수를 구성해주고, 모든 라우트 내용의 catch 블록에서 헬퍼 함수를 재사용하도록 해주었다.
    - 백엔드 구성
      - utils 폴더 추가
        - utils 폴더에 error-handler 파일 추가
      - error-handler
        - errorHandler 함수를 추가
        - errorHandler 함수에서는 매개변수로 res, error, message를 받도록 구성
        - console.error에 메시지 내용과 error.message 내용이 출력되도록 구성
        - res.status.json을 통해서 프론트엔드로 에러 메시지를 전달하도록 구성
        - module.exports를 통해서 errorHandler를 내보내고 사용될 수 있도록 구성
      - board-routes, user-routes, user-chat-routes, admin-routes, admin-chat-routes 파일의 모든 라우트에서 errorHandler를 import하고 catch 블록에서 사용할 수 있도록 구성
        - 모든 라우트의 catch 블록에서 기존의 내용 대신에, errorHandler를 사용하고 res, error 그리고 각 라우트에서 사용되는 에러 메시지 내용이 전달될 수 있도록 구성
      - 정상적으로 응답이 처리되었을 때 res.status.json을 통해서 성공 메시지를 전달하는데, 이 내용에서 "Success" 대신에 정확하게 어떤 내용이 처리되었는지 알 수 있도록 내용 수정
        - 몇몇 라우트를 제외하고 다 변경해주었지만, 아직 수정이 안된 라우트가 있어서 추가로 수정해주었다.
      - jwt-auth
        - refreshToken, refreshTokenExp 함수의 responseData 변수를 삭제하고, 해당 내용이 바로 return을 통해서 반환되도록 구성 변경
        - 커밋한 내용을 확인해보니 중간에 확인을 위해서 테스트한 코드가 잘못 커밋된 것을 확인하고 내용을 다시 수정해주었음
    - 헬퍼 함수를 사용해서 catch 블록의 내용을 모두 간결하게 처리해주었고, 중복된 코드를 줄이고 유지보수가 더 쉬워지도록 구성해주었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/61161fae72b1fb22f222f07c1926489664ba7953)
    - [jwt-auth 수정한 내용](https://github.com/jeongsangtae/mini-community-platform/commit/59f021e5e35807c7db6e4804c08182f44e3a377d)

<br />

- 추가 및 해결 해야 할 내용
  - 컴포넌트를 분리해줄만한 곳이 있는지 확인해봐야 함
    - 컴포넌트 분리만이 아닌, 조건부나 이런 내용에서 중복된 부분을 줄이고 코드 가독성을 향상 시켜줘야 함
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 전체적으로 코드에 주석을 추가해서 어떤 코드가 어떤 기능을 하는지 알 수 있도록 해줘야 함
  - 페이지로 구성되어있는데, action 함수가 사용되지 않는 부분을 확인해야 함
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 존재하지 않는 게시글 세부 페이지에 대해 처리해줘야 함
    - 원래 로딩 인디케이터가 보였으나, 예외 처리를 해주면서 현재 게시글 내용이 없는 빈 게시글 세부 페이지가 보여짐
  - 화면이 작아졌을 때 UI가 필요함
    - 반응형 CSS를 추가해야 함

# 오늘 느낀 점

- 백엔드의 예외 처리 내용은 모두 구성이 되었고, 프론트엔드에서 추가로 예외 처리가 필요한 지 확인하고 필요하다면 프론트엔드에서도 추가를 해줘야 할 것 같다. 그리고 존재하지 않는 게시글 세부 페이지에 대해 처리를 해줘야 하는데, 게시글 세부 페이지에 인증과 관련된 보호 라우트를 구성하게되면 로그인하지 않은 사용자는 게시글 세부 내용을 확인할 수 없기 때문에 보호 라우트가 아닌, NotFound 즉 경로가 없는 404 페이지가 보여지도록 이에 대한 처리해줄 생각이다. 이 내용과 반응형 내용까지 추가해주면 이제 배포를 해도 된다고 생각이 되며, 최대한 빠르게 마무리해서 배포까지 해줄 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
