# 오늘 한 일

### 100일 코딩 챌린지 (68~69일차)

- Quiz 20. File Uploads

  - “파일 업로드”에 프런트엔드와 백엔드가 모두 포함되는 이유는 무엇인가요?
    - 사용자가 파일을 선택할 수 있어야 하고 해당 파일을 일부 원격 시스템에 저장해야 하기 때문입니다.
  - 웹사이트에 파일 선택기를 어떻게 추가할 수 있습니까?
    - HTML 코드에 input type="file" 요소를 추가합니다.
  - 선택한 이미지의 미리보기를 어떻게 표시할 수 있습니까?
    - 선택한 파일에 반응하고 미리보기를 표시하려면 고유한 JS 로직을 작성해야 합니다.
  - 업로드된 파일을 서버에서 어떻게 처리할 수 있습니까?
    - 들어오는 요청 본문에서 구문 분석할 수 있습니다.
  - 업로드된 파일을 처리할 때 “multer"와 같은 미들웨어 패키지가 어떻게 도움이 되나요?
    - 들어오는 파일을 구문 분석하고 저장하는데 도움이 됩니다.

  <br />

- Ajax & HTTP

  - Ajax 란? 그리고 왜 필요한가 ?
    - 비동기식 자바 스크립트 XML을 의미한다. (Asynchronous JavaScript And XML)
    - JS를 통해 HTTP 요청을 보내는 것에 관한 개념, 아이디어를 나타낸다.
    - JS를 사용해 배후에서 요청을 보내는 아이디어로 설명된다.
    - NodeJS가 아닌 브라우저에서 실행되는 JS를 얘기하는 것 (브라우저 측 JS에 관한 이야기)
    - Ajax 기능을 활용하는데 도움이 되는 두 가지 내장 브라우저 측 JS 기능이 있다.
      - 브라우저 측 JS에 내장된 두 가지 주요 구성으로 JS 코드에서 구성하고 JS 코드 내부에서 서버로 HTTP 요청을 보낼 수 있다.
      - XML HTTP 요청 객체
      - 코드에서 사용할 수 있는 fetch() (fetch 함수)
    - Sending Http requests without Ajax (Ajax 없이 Http 요청 보내기)
      - JS 내부에서 HTTP 요청을 보내는 장점
      - URL을 입력할 때마다 브라우저는 자동으로 해당 URL로 get 요청을 보냄 (url)
      - 브라우저에서 표시할 수 있는 일부 HTML 문서 또는 일부 HTML 코드로 서버에 응답한다.
      - 링크를 클릭하면 브라우저가 완전히 자동으로 해당 URL에 get 요청을 보내는 거의 동일한 일이 발생 (link)
      - 양식 제출 관련된 작업 (form)
      - get 또는 post 요청을 보낼지 여부를 제어할 수 있음
      - 이 모든 메소드의 공통점은 사용하기에 절대적으로 훌륭하고 일반적이지만 결국에는 항상 요청을 보내고 새 HTML 페이지를 반환한다는 것
      - 항상 서비스 측 코드에서 템플릿을 렌더링하거나 HTML 코드 조각이나 문서를 보내거나 다른 페이지로 리디렉션해서 템플릿을 렌더링해서 응답한다.
      - 따라서 항상 요청을 보내고 브라우저에 의해 렌더링되고 표시될 새 페이지를 얻는다.
      - 잘못된 것은 없지만 HTTP 요청을 보내는데 이러한 메소드만 있다면 이 접근 방식으로 처리할 수 없는 중요한 사용 사례가 하나 있다.
      - 바로 JS 내부에서 Ajax로 HTTP 요청을 보낼 수 있게 해주는 Ajax를 가지고 있는 이유이다.
      - 결국 브라우저가 요청을 보낸 곳에서 브라우저는 응답을 처리해야 했다.
      - 브라우저가 이를 처리하는 방법을 알고 해당 HTML 문서를 기반으로 페이지를 표시할 수 있기 때문에 응답이 일반적으로 HTML 문서 또는 일부 HTML 코드인 이유이다.
    - Sending Http requests with Ajax (Ajax 로 Http 요청 보내기)
      - 브라우저 측 JS 내부에서 단순히 요청을 보내는 것이 아니라 JS 코드에서 응답도 처리한다는 것
      - 실제로 JS 요청을 보낸 다음 JS에서 응답을 처리할 수 있다.
      - 이것이 의미하는 바는 내가 반드시 페이지를 다시 로드하거나 새 페이지를 로드할 필요가 없다는 뜻
      - 대신 데이터를 보내고 응답의 일부로 데이터를 다시 가져올 수 있다.
      - 따라서 전체 HTML 페이지를 다시 가져오지 못할 수도 있지만 필요한 데이터가 포함된 작은 데이터 패키지일 수도 있다.
      - 그 다음 JS에서 이 데이터를 사용해 현재 로드된 페이지의 일부를 업데이트할 수 있다.
    - 결과적으로 Ajax를 사용하지 않았을 때는 버튼같은 걸 클릭할 때마다 완전히 새로운 페이지를 가져와야한다. 전체 페이지를 새로 가져와야 하는 것, 물론 가능하지만 약간의 대역폭을 낭비하고 사용자의 경우 버튼같은 걸 클릭하면 페이지가 실제로 다시 로드되므로 스크롤의 위치도 재설정되거나 조금 불편할 수 있다.
    - Ajax를 사용하면 예로 버튼을 클릭하면 이제 전체 페이지를 다시 로드하고 페이지의 모든 HTML 코드를 가져오는 대신 JS의 뒤에서 일부 섹션 데이터만 가져온다. JS를 사용해 페이지의 일부인 특정 섹션만 업데이트를 할 수 있다. 따라서 완전 새로운 페이지를 로드하지 않고, 기본 페이지를 업데이트 한다. 현재 로드된 페이지에서 업데이트한다. 일부 데이터를 다시 가져온 다음 사용자가 보는 것을 업데이트하는 것
  - Ajax 란? 그리고 왜 사용하는가 ?
    - XML HTTP 요청 객체 (XMLHttpRequest)
      - 브라우저에서 사용할 수 있는 내장 객체이다.
      - 결국 Http 요청을 보내고 해당 요청에 관한 응답을 처리하기 위한 많은 유틸리티 메소드를 제공한다.
      - 원래 XML 데이터를 전송하기 위해 개발되었다.
      - 이 객체가 작동하고 사용할 수 있지만 사용하기가 약간 투박하다.
      - 사용하기에는 너무 복잡하고 일반적으로 요즘에는 적어도 미 가공 양식으로는 거의 아무도 사용하지 않기 때문이다.
      - 하지만 일부 타사 패키지 양식으로 매우 일반적으로 사용되긴 한다.
      - 프로젝트에 추가할 수 있는 일부 타사 라이브러리에서
      - 가장 인기 있는 XMLHttpRequest 기반 라이브러리는 무료로 사용할 수 있는 `Axios`라이브러리
        - 프로젝트에 포함할 수 있는 오픈소스이다.
        - 내장 XMLHttpRequest 객체에 관한 래퍼이며, 훨씬 더 쉽고 사용하기 편하다.
        - 일반적으로 사용되는 라이브러리고 JS 내부에서 HTTP 요청을 보내고 해당 요청의 응답을 처리하는데 사용하기에 절대적으로 좋다.
      - XML과 함께 작동할 뿐만 아니라 JSON에서도 완벽하게 작동한다.
    - 코드에서 사용할 수 있는 fetch() (fetch 함수)
      - 내장 `XMLHttpRequest` 객체의 대안이다.
      - 브라우저에 내장되어 있고 XMLHttpRequest와 마찬가지로 브라우저 측 JS 코드에 내장된 기능으로 코드 내부에서 HTTP 요청을 보낸 다음 해당 요청에 관한 응답을 처리할 수 있다.
      - 여기서 차이점은 fetch 함수가 몇 년 전에 JS에 추가되었기 때문에 XMLHttpRequest보다 훨씬 더 현대적이라는 것
      - 이 함수의 비동기 특성을 처리하기 위해 프로미스와 같은 최신 JS 기능을 사용하므로 응답 센서를 켜면 결국 실행되어야 하는 코드를 정의한다.
      - 기본 제공되는 XMLHttpRequest는 프로미스를 지원하지 않는다.
      - XMLHttpRequest를 기반으로 하는 액세스 라이브러리는 프로미스를 지원한다. (Axios)
      - 프로미스 지원이 내장되어 있고, 프로미스를 사용하면 비동기 코드 및 비동기 작업을 좀 더 편리하게 처리할 수 있다.
      - XMLHttpRequest보다 사용하기 쉽고 실제로 사용하기가 비교적 간단하다.
      - `XMLHttpRequest` 객체 또는 `Axios`와 같은 라이브러리에 관한 훌룡한 대안이다.

  <br />

- XML 데이터란 ? 그리고 왜 더 이상 사용하지 않는가 ? (+ JSON)

  - XML은 확장성 생성 언어의 약자이다.
  - 기본적으로 HTML과 매우 유사한 열기 및 닫기 텍스트가 있는 특정 형식을 따르는 일부 원시 텍스트이다.
  - XML은 머신이 읽을 수 있는 방식으로 텍스트 데이터를 형식화하거나 구조화하기 위한 데이터 형식이다.
  - 예로 JS를 사용해서 백그라운드에서 서버에 일부 데이터를 보내 서버에 새 게시물 댓글이 저장되어야 한다고 알리고 싶다면 텍스트 파일이나 이와 같은 형식의 텍스트 조각을 전송할 수 있다.
  - HTML과 매우 유사한데 HTML은 기본적으로 XML을 기반으로 하기 때문이다.
  - HTML은 표준화 되어있고, XML은 그렇지 않다.
  - 따라서 HTML은 XML의 표준화된 버전이라고 할 수 있다.
  - 자체 데이터를 자체 서버로 보내기 위해 자체 데이터에 XML을 사용할 때 원하는 대로 구조화할 수 있고 모든 XML 태그를 발명할 수 있다.
  - 서버에서 이를 구문 분석하기 위한 코드도 작성할 것이기 때문이다.
  - 데이터를 랩핑하는데 사용하는 텍스트를 알고 있는 한 원하는대로 만들 수 있다.
  - XML은 구조화되지 않은 텍스트 데이터를 구조화된 머신이 읽을 수 있는 형식으로 바꾸는데 실제로 매우 유용하다.
  - 하지만 XML은 매우 장황하다. XML은 너무 장황하기 때문에 실제로 더 이상 사용되지 않는다.
  - 모든 추가 텍스트를 추가하고, 주요 콘텐츠 주위에 모든 것을 래핑하는 것은 결국 불필요한 작업이기 때문이다.
  - 생태계와 웹 개발의 환경이 다른 데이터 형식으로 옮겨간 이유이다. 그게 바로 JSON (JavaScript Object Notation)
  - JSON
    - JSON은 JS 객체와 매우 유사해 보이며, JS객체에 사용하는 구조를 따르고, 주요 차이점은 이러한 모든 키 제목 또는 댓글 텍스트와 같은 이러한 모든 속성 이름이 큰 따옴표로 묶여 있고, 여기에 큰 따옴표를 사용해야 하고 생략해서는 안된다.
    - 텍스트값, 문자열도 큰 따옴표로 묶는다. JS와 달리 작은 따옴표는 허용되지 않는다.
    - JSON은 JS가 아니고, 텍스트 파일이며 텍스트 형식이고 텍스트 콘텐츠를 구조화하는 특별한 방법일 뿐이다.
    - 숫자 불리언, 중첩 배열, 중첩 객체와 같은 다른 값도 JSON에서 지원된다.
    - 실제로 컴퓨터에 데이터를 설명하는데 필요한 모든 기능을 사용해서 머신이 읽을 수 있는 방식으로 텍스트 콘텐츠를 구성하는 좋은 방법이다.

  ```
  // XML 데이터

  <post-conment>
    <title>This was great!</title>
    <comment-text>Thanks a lot - this was really helpful!</comment-text>
  </post-conment>


  // JSON 데이터
  {
    "title": "This wa great!",
    "commentText": "Thanks a lot - this was really helpful!"
  }
  ```

- json 메소드는 render()가 내장 메소드인 것처럼 이 response 객체의 내장 메소드이다.

  - render()는 템플릿을 렌더링하기 위한 내장 메소드
  - json()은 json 데이터를 다시 보내기 위한 내장 메소드이다.

<br />

# 오늘 느낀 점

- 주로 Ajax가 왜 필요한지에 대해 배운거같은데 결과적으로 전체 페이지가 다시 로드되지않고, 일부 섹션 데이터만 가져와 업데이트한다는게 중요한 내용같다. 전체 페이지를 다시 로드하게되면 대역폭도 낭비하게 되고, 스크롤의 위치도 재설정되며 여러가지로 불편하기 때문에 일부 데이터만 가져와 사용자가 보는 것을 업데이트한다. 꼭 기억 웹 페이지 전체를 다시 로드하지않고, 웹 페이지의 일부만을 갱신한다. Ajax를 이용하면 백그라운드 영역에서 서버와 통신해 그 결과를 웹 페이지의 일부분에만 표시할 수 있다. 중요!

- 그리고 XML은 더이상 사용하지않는데 그 이유는 불필요하게 장황하고 모든 추가 텍스트를 추가하고, 주요 콘텐츠 주위에서 모두 래핑하는게 비효율적이라서 이제는 JSON을 사용한다.

- XMLHttpRequest 이 것은 Ajax를 사용하기 위한 하나의 방법중 하나이며 다른 방법으로 fetch 함수를 사용하는 방법이 있다. 추가로 XMLHttpRequest는 Axios라는 라이브러리를 함게 사용할 수도 있다.

<br />

# 내일 할 일

- 100일 코딩 챌린지 계속 진행하기 (속도보단 복습과 꾸준한 연습으로 튼튼하게 다지기)

- ExpressJS에 대해 더 깊게 공부하기 (EJS와 함께)

- Advanced-js(고급 JS)에 대해 공부하며 이해하기

- multer 패키지 한번 더 자세히 들여다보기

- addEventListener 키워드 정리
