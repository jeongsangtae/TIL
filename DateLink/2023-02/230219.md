# 오늘 한 일

### 100일 코딩 챌린지 (72~73일차)

- 쿠키로 작업할 수 있는 패키지 ( [cookie-parser](https://www.npmjs.com/package/cookie-parser) )

  - `cookie-parser`
  - 쿠키란 ?
    - 클라이언트와 브라우저로 전송되는 방식
    - 브라우저가 자동으로 저장해준다.

  <br />

- 권한 부여 vs 인증 (Authentization vs Authentication)

  - 일종의 관련성이 있는 두 용어지만 이들은 서로 다른 것을 설명한다.
  - 인증 (Authentication)
    - 자신이 누구라고 주장하는 사람을 확인하는 절차이다.
    - 자격 증명을 사용 가입 및 로그인하는 것 제한된 리소스 및 페이지에 관한 액세스 권한을 사용자에게 부여하기 위해 세션에 데이터를 저장
    - 특정 페이지를 보호하거나 사용자가 취할 수 있는 특정 작업을 피하는 것에 관한 것
    - 사용자로 로그인해서 인증을 받았다고 해서 여전히 모든 작업이 허용되는 건 아니다.
    - 주어진 사용자가 특정 리소스에 액세스할 수 있는지 여부를 서버에 저장해야한다. (중요)
  - 권한 부여 (Authentization)
    - 가고 싶은 곳으로 가도록 혹은 원하는 정보를 얻도록 허용하는 과정이다.
    - 권한 부여를 통해 사용자가 수행할 수 있는 작업 또는 사용자가 인증된 경우에도 방문할 수 있는 페이지를 제한한다.
    - 일반적인 예로 온라인 상점
      - 내가 로그인하면 내가 주문한 내역만 볼 수 있는 걸 생각
      - 모든 사용자의 모든 주문을 볼 수는 없다.
    - 또 다른 예로 블로그를 구축하는 경우
      - 블로그 게시물을 삭제, 편집 및 작성할 수 있는 관리자로 로그인할 수 있는 것
      - 일반 사용자로 로그인해서 댓글을 남길 수도 있지만 블로그 게시물을 삭제하거나 편집할 수 없다.

  <br />

- ExpressJS : res.locals

  - 수집한 정보를 특정 위치에 저장하기 위해 사용하는 특별한 Express 기능
  - 데이터를 명시적으로 전달하지 않고, 모든 템플릿에서 액세스할 수 있고 모든 미들웨어의 다른 모든 부분에 액세스할 수 있다.
  - 전역 데이터를 설정하는데 정말 유용하고 모든 템플릿에 수동으로 전달할 필요가 없게 해준다.
  - locals를 사용하면 전체 그 요청 응답 주기 동안 사용할 수 있는 일부 전역 값, 선택한 값을 설정할 수 있다. 하지만 그 요청 응답 주기에만 해당된다. 새 요청에는 해당 데이터가 없고 그 데이터를 다른 곳에서 갖고 싶지 않기 때문에

  ```
  app.use(async function (req, res, next) {
    const user = req.session.user;
    const isAuth = req.session.isAuthenticated;

    if (!user || !isAuth) {
      return next();
    }

    const userDoc = await db
      .getDb()
      .collection("users")
      .findOne({ _id: user.id });
    const isAdmin = userDoc.isAdmin;

    res.locals.isAuth = isAuth;
    res.locals.isAdmin = isAdmin;

    next();
  });
  ```

- Quiz 22. Authentication

  - “인증”이란 무엇인가요?
    - 웹 사이트에서 어떤 사용자가 어떤 작업에 액세스할 수 있는지 제어하는 겁니다.
  - “인증”은 일반적으로 표준 웹사이트에서 어떻게 구현되나요?
    - 세션과 쿠키를 사용하여 로그인한 사용자를 저장하고 제어합니다.
  - 데이터베이스에 암호를 어떻게 저장해야 합니까?
    - 제출된 비밀번호는 해싱 후 저장합니다.
  - "세션"이란 무엇입니까?
    - 세션은 서버(예: DB)에서 생성 및 저장되는 "데이터 조각"입니다. 세션 쿠키를 통해 클라이언트에 연결됩니다.
  - "쿠키"란 무엇입니까?
    - 쿠키는 서버에서 브라우저로 전송된 다음 브라우저에 저장되는 "작은 데이터 조각"입니다. 모든 요청과 함께 브라우저에서 자동으로 서버로 전송됩니다.

<br />

# 오늘 느낀 점

- 쿠키로 작업을 하게 된다면 cookie-parser 패키지를 사용한다.

- 권한 부여와 인증은 비슷하지만 다른데 인증은 사용자에게 권한을 부여하기 위해 섹션 데이터에 저장하는 것이고, 권한 부여는 가고 싶은 곳을 가도록 혹은 원하는 정보를 얻도록 허용해주는 과정이다. 물론 권한 부여를 해도 모든 페이지나 정보를 얻을 수 있는 것은 아니며, 제한이 될 수 있다.

- res.locals 기능은 전역 데이터를 설정해 모든 템플릿에 수동으로 전달할 필요없게 해준다. 전역 변수라고 생각해도 될거같다는 생각이다. 전역 변수는 프로그램의 어디에서나 접근할 수 있다는 개념인데 비슷하다고 생각된다. 공통 로직을 처리하는 개념에서 동일하다.

- 세션과 쿠키에 대한 개념이 조금 부족했던거 같은데 퀴즈로 세션과 쿠키에 대한 정의는 좀 가닥이 잡힌거같다.

<br />

# 내일 할 일

- 100일 코딩 챌린지 계속 진행하기 (속도보단 복습과 꾸준한 연습으로 튼튼하게 다지기)

- ExpressJS에 대해 더 깊게 공부하기 (EJS와 함께)

- Advanced-js(고급 JS)에 대해 공부하며 이해하기

- multer 패키지 한번 더 자세히 들여다보기

- addEventListener 키워드 정리

- 세션 & 쿠키 부분 한번 더 다시보기
