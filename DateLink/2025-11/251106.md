# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 그룹 채팅방 내의 온라인 사용자 목록 확인 관련 내용 테스트
  - 참여한 모든 그룹 채팅방 목록을 조회하고 찾은 그룹 채팅방 내의 사용자 목록에서 현재 온라인 상태의 사용자를 찾도록 구성
  - 백엔드
    - app
      - registerUser 소켓 이벤트 수정
        - groupChats 변수 추가
          - 그룹 채팅방 컬렉션 내의 users 내용에 userId를 확인해 일치하는 모든 채팅방을 조회하도록 구성
          - 조회한 그룹 채팅방 목록을 콘솔에 출력
        - 그룹 채팅방 내의 온라인 상태 참여자를 찾는 내용 추가
          - 그룹 채팅방에 forEach를 사용하도록 구성
          - participants 변수 추가
            - 그룹 채팅방 내의 사용자 목록 조회
          - onlineParticipants 변수 추가
            - 조회한 사용자 목록에 filter를 사용해 onlineUsers Map 내용에 포함되는 사용자만 걸러내도록 구성
          - 온라인 상태의 사용자 목록을 확인하는 콘솔 로그 추가
      - joinRoom 소켓 이벤트 수정
        - 해당 소켓 이벤트 내에 구성한 내용은 테스트 후 주석 처리
        - roomData 변수 추가
          - roomId를 사용해 groupChats 컬렉션에서 그룹 채팅방을 찾도록 구성
          - roomData가 존재하는지 확인
        - participants 변수 추가
          - 찾은 그룹 채팅방 내의 사용자 목록을 조회
        - onlineUsers 변수 추가
          - onlineUsers Map에 저장된 사용자 목록을 불러오도록 구성
        - 찾은 그룹 채팅방 내의 사용자 목록과 온라인 사용자 목록 확인을 위한 콘솔 로그 추가
        - onlineParticipants 변수 추가
          - 그룹 채팅방에 속한 모든 사용자 목록에 filter를 사용해 onlineUsers Map 내용에 포함되는지 확인
        - 온라인 사용자 목록에 그룹 채팅방 참여한 사용자 목록이 존재하는지 확인하는 콘솔 로그 추가
        - 그룹 채팅방 참여한 사용자 목록 중에 온라인 상태의 사용자를 확인하는 콘솔 로그 추가
  - 방에 참여할 때 해당 채팅방에 참여한 사용자 목록을 조회하고 그 사용자 목록에서 온라인 상태의 사용자를 찾는 내용과 로그인하면 참여한 모든 채팅방을 조회하고 참여한 모든 채팅방 내의 사용자 목록을 조회해 온라인 상태의 사용자를 찾도록 구성해 확인한 결과, 두 내용에서 모두 그룹 채팅방 내의 사용자 목록에서 온라인 상태의 사용자를 조회하는 것을 확인할 수 있었다.
    - 그룹 채팅방 내의 사용자 목록에서 온라인 상태의 사용자를 조회하긴 하지만, 해당 내용을 소켓 이벤트로 바로 전달할 것인지, 아니면 조회한 온라인 상태의 사용자 ID로 사용자 정보를 조회해 전달할 지 테스트해봐야 함
    - 수정한 채팅 목록 구조와 버튼들이 문제없는지 다시 한 번 확인을 해봐야 함
    - 로그인, 회원가입 페이지 배경에 사용되는 여러 이미지를 더 추가해 테스트해봐야 함
    - 해야 할 일에 정리된 내용 처리 필요
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/fd77547f1c91e3f0327a8a7fffb02f6686d045ba)

# 오늘 느낀 점

- 그룹 채팅방 내의 사용자 목록에서 온라인 상태의 사용자만 뽑아내는 것은 해결을 했지만, 해당 사용자들 ID를 바로 소켓 이벤트로 전달하는 것이 맞는지 또는 ID로 사용자 정보를 조회해 그 내용을 전달하는 것이 맞는지 확신이 생기지 않아서 내용을 더 추가해 테스트해볼 생각이다. 그룹 채팅방 내의 사용자 목록에서 온라인 유무를 어떤식으로 조회하고 처리하는지 내용을 다시 확인해볼 필요가 있고, 해당 내용을 참고해 어떤 정보를 소켓 이벤트로 전달할 지 확실하게 정할 생각이다. 소켓 이벤트로 데이터만 전달하면 로그인 시에 즉시 온라인 유무가 반영되어 친구가 아닌 사용자도 온라인 또는 오프라인 상태로 보여질 수 있다고 생각이 되며, 데이터만 문제없이 전달되도록 수정해볼 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
