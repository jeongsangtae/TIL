# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 그룹 채팅방 사용자 컴포넌트에 전달하는 props, 해당 내용과 관련된 타입 정의 수정 및 사용자 프로필 컴포넌트에 props 전달 및 사용자 프로필 수정, 출력
  - 그룹 채팅방 사용자 컴포넌트에 사용자 ID를 추가로 전달하고, 해당 내용과 관련된 타입 정의 수정 그리고 토글을 위한 useState 그리고 함수를 추가해 사용자 클릭 시에 사용자 프로필 컴포넌트에 닉네임, 아바타 이미지, 아바타 색, 온라인 유무 등 여러 내용이 props로 전달되도록 구성하고 해당 내용을 전달받아 사용자 프로필 컴포넌트에서 출력될 수 있도록 구성
  - 프론트엔드
    - GroupChatUsers
      - JSX 코드 내용 수정
        - 온라인/오프라인 관련된 내용 모두 수정
        - GroupChatUser 컴포넌트에 \_id props를 추가로 전달
          - onlineUser.\_id, offlineUser.\_id 내용을 전달
    - GroupChatUser
      - props에 대한 타입 정의 수정
        - Pick를 Omit으로 수정하고 제외하는 내용은 email, username, date로 구성
      - toggle useState 추가
        - 초기값은 false로 구성
      - userProfileHandler 함수 추가
        - setToggle을 통해 toggle 내용이 반대로 전환되도록 구성
      - JSX 코드 내용 수정
        - 전체 내용을 프래그먼트로 감싸도록 구성
        - toggle을 확인해 true일 때만 UserProfile 내용이 보여지도록 구성
          - props를 통해 userId, nickname, avatarImageUrl, avatarColor, onlineChecked 내용이 전달되도록 구성
    - UserProfile
      - useAuthStore Zustand에서 userInfo 상태를 불러오도록 구성
      - useFriendStore Zustand에서 friends, otherUserFriends 상태 그리고 loadFriends, loadOtherUserFriends 액션을 불러오도록 구성
      - useGroupChatStore Zustand에서 groupChats 상태를 불러오도록 구성
      - mutualGroupChats 함수 추가
        - groupChats 내용에 filter를 사용
        - userInfo와 userId props 내용이 존재하는 지 확인하는 조건부 추가
        - users 변수 추가
          - 그룹 채팅방 내의 사용자 목록이 존재하는지 확인하고 undefined일 경우 빈 배열로 구성
        - users 변수에 includes를 사용해 userInfo에 저장된 \_id와 userId props가 포함되는지 확인하고 둘 다 포함될 경우 반환
        - 그룹 채팅방 내에 저장된 사용자 목록을 확인해 로그인한 사용자와 프로필을 클릭한 사용자 모두 포함될 경우 반환하도록 구성
      - JSX 코드 내용 수정
        - 전체 영역을 감싸는 div 추가
          - user-profile-wrapper className 추가
        - userInfo.\_id와 userId가 일치하는지 확인해 일치할 경우 프로필 편집 내용이 보여지고, 일치하지 않을 경우 닉네임과 아바타 이미지 등 내용이 보여지도록 구성
          - 사용자 목록에서 로그인한 사용자가 본인을 클릭했을 때 프로필 수정하는 버튼이 보여지고, 다른 사용자를 클릭했을 때 해당 사용자 정보가 보여지도록 조건부로 구성
  - CSS
    - GroupChatUser
      - group-chat-user:hover
        - 배경색을 기존색보다 조금 어두운 색으로 구성
        - 커서 추가
  - 그룹 채팅방 사용자 컴포넌트에 사용자 ID props를 추가로 전달해 이와 관련된 타입 정의를 수정하고, 사용자 프로필 컴포넌트에 사용자 ID를 포함한 닉네임, 아바타 이미지 등 여러 내용을 props로 전달해 사용자 클릭 시에 닉네임, 아바타 이미지, 아바타 색, 온라인 유무, 함께 참여한 채팅방 수 같은 내용이 보여지도록 구성해 확인한 결과, 그룹 채팅방 내의 사용자 목록에서 본인이 아닌 다른 사용자 클릭 시에 닉네임, 이미지, 함께 참여한 그룹 채팅방 수가 보여지는 것을 확인할 수 있었다.
    - 사용자 본인을 클릭할 경우 다른 내용 대신 프로필 편집하는 내용이 보여지는 것을 확인했고, 다른 사용자 클릭 시에 온라인 유무가 아직 보이지 않아 이 부분에 대한 수정 필요
    - 아바타 이미지 또는 아바타 색 둘 중 하나만 보이도록 구성이 필요하며, props로 넘어오는 내용에 대한 타입 정의 또한 추가 필요
    - 사용자 프로필이 현재 그룹 채팅방 내의 사용자 목록 아래에 보여지므로 이 내용이 사용자 목록 우측에 보여지도록 구성 필요
    - 사용자 프로필에서 내용 클릭 시에 모달창으로 세부 내용이 보여지도록 구성 필요
    - 로그인, 회원가입 페이지 배경에 사용되는 여러 이미지를 더 추가해 테스트해봐야 함
    - 해야 할 일에 정리된 내용 처리 필요
    - 다이렉트 채팅방 순서가 변경될 때 부드럽게 변경되는 기능
    - 그룹 채팅방 위치를 자유롭게 변경하는 기능
    - 그룹 채팅방 우클릭 시에 보여지는 컨텍스트 메뉴 CSS 수정 필요 (위치, UI 등)
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/32506760497198a7a7038d1ca805cc3ae46178df)

# 오늘 느낀 점

- 그룹 채팅방 사용자 컴포넌트에 사용자 ID를 전달하면서 타입 정의를 함께 수정해 타입 에러가 없도록 해주었고, 사용자 클릭 시에 사용자 프로필 컴포넌트가 열리며 사용자 ID, 닉네임, 아바타 이미지, 아바타 색, 온라인 유무가 전달되어 보이도록 구성했는데 여기서 닉네임과 아바타 이미지는 문제없이 보이지만 온라인 유무 내용이 조건부로 구성되지 않아서 보이지 않기 때문에 추가로 수정이 필요한 상황이다. 그리고 로그인한 사용자 본인이 본인을 클릭할 경우 프로필 편집과 관련된 내용이 보이도록 구성을 해주었고, 현재 사용자 프로필 관련 내용이 사용자 목록 우측에 보이는 것이 아닌 하단에 보이기 때문에 이 부분에 대한 수정도 해줄 생각이다. 아바타 이미지와 아바타 색 내용은 둘 중 하나만 보이도록 조건부로 수정해야 하며 함께 아는 친구 내용 또한 구성해 출력될 수 있도록 해볼 생각이다. 아직 수정해야 할 부분과 추가해야 할 부분이 많아서 조금 어지럽지만 하나씩 차근차근 추가하면 금방 전체적인 틀이 잡힐 것으로 생각되며 최대한 빠르게 구성해 사용자 프로필 모달까지 진행해볼 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

- 다크 모드 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
