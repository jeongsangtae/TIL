# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 스크롤 로직 수정
    - 스크롤 로직의 조건부를 수정해서 스크롤이 맨 밑에 있는 경우, 새로운 메시지가 추가될 때 새로운 메시지 버튼이 뜨지 않고 스크롤이 아래로 이동하도록 구성해주고, 스크롤이 맨 밑이 아닌 경우에는 스크롤을 맨 밑으로 이동시키도록 구성해주고, 스크롤이 맨 밑에 있는지 확인하는 조건부에서 오차를 줄이기 위해 내용을 수정해주었다.
    - 프론트엔드 구성
      - handleScroll 함수에서 조건부를 조금 수정해서, 스크롤이 맨 밑에 있는 경우를 먼저 확인해서 맨 밑인 경우에는 새로운 메시지 버튼이 생기지 않도록 구성
        - 반대로 스크롤이 맨 밑이 아닌 경우 새로운 메시지 버튼이 보여지도록 구성
        - 스크롤 맨 밑을 확인하는 조건부에서 오차를 줄이기 위해서 스크롤 높이에 -1을 추가해서 확인하도록 구성
      - useEffect의 if문 조건부에서 스크롤이 맨 밑에 있는 것을 확인하도록 구성해주고, 맨 밑에 있는 경우 새로운 메시지 버튼이 띄워지지 않고 스크롤이 맨 밑으로 이동하도록 구성
        - 스크롤이 맨 밑에 있는 것을 확인하는 조건부에서 오차를 줄이기 위해서 스크롤 높이에 -1 추가
    - 테스트 결과, 스크롤이 맨 밑에 있는 경우에는 새로운 메시지 버튼이 채팅창에 노출되지 않으면서 스크롤이 이동되는 것을 확인했고, 스크롤이 맨 밑에 있지 않은 경우에 새로운 채팅을 입력하면 바로 스크롤이 맨 밑으로 내려오도록 구성이 되었다.
      - 스크롤이 맨 밑이 아닌 경우에, 새로운 메시지가 넘어오면 바로 이동되지 않도록 구성하려고 했으나, 이 구성은 내가 채팅을 입력했을 때가 아닌 상대방의 채팅이 전달했을 때 이 동작이 이루어져야 하기 때문에 관리자와 채팅을 연결하고 작업을 다시 해줘야 함
      - 채팅을 위로 올렸을 때 새로운 메시지 버튼이 아닌, 아래로 향하는 버튼을 따로 추가해서 사용하도록 변경해줘야 함
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/e41663b00a815f62015e74f7ce35da9b8d521a36)

  <br />

  - 스크롤이 아래로 향하도록 해주는 버튼을 변경해주고, 해당 버튼에 대한 CSS를 추가
    - 새로운 메시지 버튼으로 스크롤이 아래로 향하도록 해주고 있었는데, 이 버튼 대신에 아래로 향하는 버튼을 따로 추가해서, 해당 버튼이 useEffect, handleScroll 함수에서도 사용되도록 변경해주고 CSS 내용을 추가해주었다.
    - 프론트엔드 구성
      - 스크롤을 맨 밑으로 이동시켜주는 버튼을 보여주는 유무를 판단하는 useState 추가
      - 채팅창을 닫는데 사용되는 버튼 아이콘을 재사용해서, 채팅창 내에서 클릭 시 스크롤이 맨 밑으로 이동되도록 구성
        - scrollToBottomHandler 함수가 onClick에서 사용되도록 구성
      - handleScroll 함수에서 새로운 메시지를 보여주는 버튼 대신에, 아래를 향하는 버튼을 사용하도록 구성을 변경
      - useEffect에서 새로운 메시지를 보여주는 버튼 대신에 아래를 향하는 버튼을 사용하도록 변경
    - 테스트 결과, 새로운 메시지 버튼 대신에 아래로 향하는 버튼이 보여지는 것을 확인했고, 작동에도 문제가 없는 것을 확인할 수 있었다.
      - 이제 여기서 내용을 좀 더 추가해서, 스크롤이 위에 있을 때 아래로 향하는 버튼이 보이다가 새로운 메시지가 있다면 아래로 향하는 버튼 대신에 새로운 메시지 버튼이 보이도록 구성을 추가해줘야 한다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/38d0921905c89528623ca9906e0025aaf0a42699)

<br />

- 추가 및 해결 해야 할 내용
  - 채팅과 관련된 내용 구성
    - 출력되는 메시지 UI 수정 필요
      - 본인이 작성한 메시지는 오른쪽, 상대방 메시지는 왼쪽에 보이도록 구성해야 함
    - 사용자-관리자 사이의 방 번호를 설정해서 서로 채팅이 보이도록 구현해야 함
    - 스크롤 작동에서 추가 작업을 해봐야 함
      - 새로운 메시지가 뜨면, 아래로 가는 버튼이 사라지고, 새로운 메시지 버튼만 보이도록 해야 함
    - 채팅창에서 사용되는 함수 이름 변경도 생각을 해봐야 하는데, 좀 더 명확하게 표현할 필요성을 느낌
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - ul 요소 안의 자식이 li가 아닌, div나 프래그먼트로 사용되는 부분을 수정해야 함

# 오늘 느낀 점

- 새로운 메시지 버튼 대신에, 아래로 향하는 버튼을 사용해서 스크롤이 맨 밑으로 이동하도록 구성을 변경했는데 문제없이 작동하는 것을 확인했고, 이제 여기서 추가로 스크롤이 맨 밑이 아닌 경우, 새로운 메시지가 넘어온다면 아래로 향하는 버튼 대신에 새로운 메시지 버튼이 보여지도록 구성을 추가해줘야 한다. 현재 사용자 본인이 채팅을 입력하면 바로 맨 밑으로 이동하면서 사용자가 제출한 채팅이 보여지도록 구성이 되어있기 때문에, 상대방이 새로운 메시지를 전달하고 스크롤이 맨 밑이 아닌 경우에만 아래로 향하는 버튼이 사라지고 새로운 메시지 버튼이 보여지게 구성을 해줘야 한다. 이 구성을 해주기 위해선, 우선 사용자와 관리자 간의 채팅을 연결해줄 필요가 있고 서로 입력한 채팅이 상대방에게 정상적으로 전달이 되는지 확인해줄 필요가 있다. 이 구성은 방 번호를 설정해서 구성하면 되는 것으로 내용을 찾았었는데, 해당 내용에 관한 정보를 추가로 찾아보고 구성해서 테스트를 진행해야 할 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
