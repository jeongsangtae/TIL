# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 채팅 입력창 높이 조절 관련 오류 수정 및 채팅 메시지 출력 관련 오류 수정
  - 채팅 입력창에서 줄바꿈을 적용하고 내용을 제출한 뒤, 다시 초기 상태로 입력창이 돌아가지 않는 오류를 해결하고, 줄바꿈을 적용해 추가한 채팅 메시지가 보여질 때 줄바꿈이 아닌 띄어쓰기가 적용되어 보이는 오류를 수정
  - 백엔드
    - chat-routes
      - 마지막으로 읽은 메시지 ID를 저장하는 POST 라우터 수정
        - 불필요하게 지속적으로 확인하는 콘솔 로그 삭제
  - 프론트엔드
    - ChatInput
      - sendMessageHandler 함수 수정
        - textarea 변수 추가
          - textareaRef에서 현재 값을 가져오도록 구성
        - textarea를 확인하는 조건부 추가
          - textarea.style.height를 54px로 만들도록 구성
          - textarea.style.overflow를 hidden으로 만들도록 구성
          - 메시지가 제출된 후에 채팅 입력창 높이를 초기 높이로 만들고 이전에 적용된 스크롤도 없애 완전한 초기 상태로 만들도록 구성
  - CSS
    - Chat
      - chat-message
        - white-space를 pre-line으로 설정해 줄바꿈이 적용되어 보이도록 구성
        - 이전에 구성한 white-space: pre-wrap 내용은 주석 처리
      - chat-messages
        - white-space를 pre-line으로 설정해 줄바꿈이 적용되어 보이도록 구성
    - ChatInput
      - input-wrapper textarea
        - overflow-y 내용을 auto에서 hidden으로 변경
        - height를 54px로 구성
  - 채팅 입력창에서 줄바꿈 적용 시에 스크롤이 생겨나고 그 상태에서 내용을 제출하면 늘어난 채팅 입력창이 그대로 유지되지 않고 다시 초기 상태로 초기화되도록 내용을 수정하고, 줄바꿈을 적용해 제출한 채팅 메시지가 화면에 그대로 적용된 상태로 보이도록 내용을 구성해 확인한 결과, 늘어난 채팅 입력창은 메시지 제출 시에 초기 상태로 다시 돌아가는 것을 확인했고, 줄바꿈이 적용된 채팅 메시지는 화면에 그대로 적용되어 출력되는 것을 확인할 수 있었다.
    - 채팅 입력창과 채팅 메시지 출력 관련 오류를 해결했지만, 아바타 위치에 대한 문제가 발생해서 추가 수정 필요
    - 채팅 입력창에서 줄바꿈 시에 보여지는 내용이 조금씩 떨어져있지 않고 붙어있기 때문에 추가 수정 필요
    - 수정한 채팅 목록 구조와 버튼들이 문제없는지 다시 한 번 확인을 해봐야 함
    - 로그인, 회원가입 페이지 배경에 사용되는 여러 이미지를 더 추가해 테스트해봐야 함
    - 해야 할 일에 정리된 내용 처리 필요
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/016e210d8f9510b03ca29d43bdb3edfd606b4293)

# 오늘 느낀 점

- 채팅 입력창에서 줄바꿈을 적용하면 채팅 입력창이 늘어나고 일정 크기까지 늘어날 경우 스크롤이 생겨나는데, 이 상태로 내용을 입력하고 제출하면 늘어난 채팅 입력창 크기가 다시 줄어들지 않고 늘어난 상태로 유지가 되므로, 채팅 메시지를 제출하면 다시 초기 상태의 크기로 돌아가도록 내용을 수정하고, 줄바꿈이 적용된 채팅 메시지 내용이 띄어쓰기인 것처럼 보이는 것을 확인해 해당 내용 또한 수정해 해결해주었다. 해당 내용들을 수정하고 새로운 문제를 발견해서 추가로 수정을 해야 하는데, 줄바꿈을 적용한 채팅 메시지 내용이 출력되는 것은 문제가 없지만 그로 인해 사용자 아바타 위치가 채팅 메시지 중간에 위치하려는 문제가 발생해 이 부분을 수정해야 하고, 채팅 입력창에서 줄바꿈 적용 시에 줄 간격이 너무 붙어있어 보기 불편하기 때문에 이 부분 또한 함께 수정해줄 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 채팅 입력창에 적용된 스크롤 기능 추가 수정 필요

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
