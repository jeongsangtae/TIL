# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 아바타 이미지 URL 관련 내용 수정 및 아바타 이미지 URL 전달 관련 내용 추가 및 아바타 이미지 URL 관련 타입 정의 추가
  - 아바타 이미지 URL 관련 useState, 함수 그리고 해당 내용을 전달하는 함수 등 여러 내용을 수정하고, 전달하는 아바타 이미지 URL 관련 내용이 타입 에러가 발생하지 않도록 여러 컴포넌트에서 아바타 이미지 URL 관련 타입 정의 추가
  - 프론트엔드
    - authStore
      - AuthStore 타입 정의 수정
        - editUserProfileForm 관련 내용을 객체를 인자로 받고 그 안에서 비구조화하는 방식으로 수정
        - avatarImageUrl를 추가해 선택적으로 들어올 수 있도록 구성하고 string으로 타입 정의
        - modalData 내에도 avatarImageUrl을 추가해 선택적으로 들어올 수 있도록 구성하고 string으로 타입 정의
      - editUserProfileForm 액션 수정
        - 매개변수로 넘어오는 내용을 객체 기반 방식으로 전달받도록 구성
          - avatarImageUrl도 포함해 받도록 수정
        - requestBody 변수 수정
          - avatarImageUrl 내용을 조건부로 사용해 존재할 경우, avatarImageUrl이 전달되며 반대로 존재하지 않을 경우 avatarColor 내용이 전달되도록 구성
          - 스프레드 문법을 사용해 조건에 따라 객체의 속성이 하나만 펼쳐지도록 구성
            - 즉, avatarImageUrl 유무에 따라 avatarImageUrl와 avatarColor 둘 중 하나만 포함됨
    - SideBar
      - userProfileEditHandler 함수 수정
        - toggleModal 액션 modalData 부분에 전달하는 내용으로 avatarImageUrl를 추가하고, avatarImageUrl를 통해 전달하는 내용은 사용자 정보 내의 avatarImageUrl에서 불러오도록 구성
    - EditUserProfileForm
      - avatarImageUrl useState 수정
        - 초기값은 modalData.avatarImageUrl이 들어가고, 만약 해당 내용이 null이거나 undefined일 경우 빈 문자열이 들어가도록 구성
      - avatarModeChangeHandler 함수 수정
        - event에 대한 타입 정의 추가
      - submitHandler 함수 수정
        - 조건부를 추가해 editUserProfileForm 액션에 다른 내용이 전달되도록 구성
          - avatarMode를 조건부로 사용해 true라면 avatarImageUrl을 포함한 내용이 전달되고 false라면 avatarColor가 전달되도록 수정
        - 위치 기반 방식으로 전달하는 내용을 추가하고 주석 처리
      - JSX 코드 내용 수정
        - 아바타 헤더 영역
          - avatarMode 상태를 조건부로 사용해 true면 아바타 이미지, false면 아바타 색 텍스트가 보이도록 구성
          - avatarMode 상태를 조건부로 사용해 true면 아바타 색으로 전환하는 버튼, false면 아바타 이미지로 전환하는 버튼이 보이도록 구성
        - 아바타 관련 내용 영역
          - avatarMode 상태를 조건부로 사용해 true면 이미지 미리보기 내용과 이미지 URL을 넣는 입력창이 보이도록 구성
          - avatarMode 상태가 false면 이전에 구성한 아바타 색 변경과 관련된 내용이 보이도록 구성
    - types
      - UserInfo
        - avatarImageUrl 항목을 추가해 string으로 타입 정의
  - 아바타 이미지 URL 내용 전달할 수 있도록 구성하고, 해당 내용을 전달할 때 타입 에러가 발생하지 않도록 여러 내용을 수정해 확인한 결과, 아바타 이미지 URL을 전달할 수 있도록 구성된 것은 확인했지만 해당 데이터를 전달해보지 않아서 문제가 없는지 확인은 하지 못했고, 아바타 이미지 URL을 전달하면서 발생한 타입 에러는 모두 수정되어 더이상 발생하지 않는 것을 확인할 수 있었다.
    - 아바타 이미지 URL을 전달하는 것을 구성했기 때문에 문제없이 전달이 되는지, 그리고 저장 관련 내용을 수정해 저장할 수 있도록 해야 함
    - 아바타 이미지 URL을 넣었을 때 미리보기로 보여지는 공간에 대한 CSS, 아바타 색과 아바타 이미지 URL 내용에 대한 CSS도 수정 필요
    - 수정한 채팅 목록 구조와 버튼들이 문제없는지 다시 한 번 확인을 해봐야 함
    - 로그인, 회원가입 페이지 배경에 사용되는 여러 이미지를 더 추가해 테스트해봐야 함
    - 해야 할 일에 정리된 내용 처리 필요
    - 아바타에서 단순히 배경색만 변경하는 것이 조금 아쉽다는 생각이 들어서, 이미지 파일 자체를 추가하는 것이 아닌 이미지 URL을 가져와 사용할 수 있도록 구성하는 것을 고려중
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/467054e47a4f47b228396a804136e8c2db7f0aa8)

# 오늘 느낀 점

- 아바타 이미지 URL 내용과 관련된 여러 내용을 수정하고 해당 내용이 전달될 수 있도록 구성한 뒤 타입 에러가 발생해 이와 관련된 내용은 모두 고쳐주었지만, 정작 테스트는 해보지 못해서 문제없이 전달되는지 확인을 해보지 못한 상황이기 때문에 해당 내용을 확인해볼 생각이다. 그리고 전달된 내용이 DB에 저장될 수 있도록 백엔드 내용을 수정해줘야 하며, 수정된 내용이 실시간으로 반영되는지 확인이 필요하고 프론트엔드에서 아바타 이미지 URL을 불러와 아바타 색 대신에 보여지도록 구성해줘야 하며, 아바타 이미지 URL이 없을 때는 어떤식으로 처리할 지 이 부분도 추가로 수정이 필요하다. 불러온 아바타 이미지 URL 내용을 통해 보여지는 이미지가 아바타 크기를 벗어나지 않는지 확인이 필요하며 아바타 크기를 벗어난다면 이에 대한 조치도 해줄 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
