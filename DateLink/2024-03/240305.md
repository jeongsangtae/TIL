# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 게시글, 댓글, 답글의 내용이 줄 바꿈이 적용되어 출력되도록 수정
    - 현재 게시글, 댓글, 답글 form에서 내용을 줄 바꿈하고 제출해도 띄어쓰기만 되며, 줄 바꿈이 적용이 되지 않았는데 이 부분을 수정해서 줄 바꿈하고 제출하면 화면에 줄 바꿈한 내용이 정상적으로 출력되도록 내용을 추가해주었다.
    - 프론트엔드 구성 (CSS 구성에 내용을 추가해서 해결)
      - 정말 간단한 내용으로, 출력하는 부분의 CSS에 `white-space: pre-line`을 추가해서 줄 바꿈이 되어 보여지도록 구성해주었다.
    - 현재는 정상적으로 구현되어, 줄 바꿈을 해주고 입력한 뒤에 제출하면 줄 바꿈이 된 부분은 백엔드에서는 "\n"과 같은 내용으로 저장되고, 화면에는 줄 바꿈이 된 채로 내용이 출력되게 변경되었다.
      - 백엔드에서 변경을 시도 했지만, 적용되지 않아서 여러가지 방법을 찾아보던 중에 CSS에서 줄 바꿈을 적용시킬 수 있는 방법 찾게되어, 사용해보았는데 문제없이 해결할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/937ffedebda05b329db287c2817f292eda5510b6)

  <br />

  - form 입력으로 사용하고 있는 textarea 크기 고정 추가
    - textarea의 크기를 마음대로 줄이고 늘릴 수 있었고, 너무 작은 크기로 구성이 되어있기 때문에 크기를 좀 키워주고 크기 조절을 할 수 없도록 해주었다.
    - 프론트엔드 구성 (CSS 구성)
      - width, height 크기를 지정해주고, 크기 조절을 할 수 없도록 resize를 none으로 설정해주었다.
    - 적당한 크기의 입력 form이 구성되었고 사용자가 임의로 더 이상 크기 조절을 불가능하도록 설정해주었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/0fd783281e239c51500946eb349f930a88876633)

  <br />

  - 게시글, 댓글 삭제 시 하위 내용도 함께 삭제되도록 구성 추가
    - 게시글과 댓글을 삭제 했을 때 하위 내용도 함께 DB에서 삭제가 되어야 하는데, 이전에는 게시글과 댓글만 삭제가 되고 하위 내용은 DB에서 그대로 남아있었기 때문에 이 내용을 수정해주었다.
    - 백엔드 구성
      - 게시글 삭제 시에 그 아래에 있는 댓글과 답글 모두 삭제되도록 하기 위해서, 게시글의 \_id를 활용해서 댓글과 답글에 저장된 post_id를 확인하고 게시글 삭제 시 모든 댓글과 답글이 함께 삭제가 되도록 deleteMany를 사용해서 구성
      - 댓글 삭제 시에 그 아래에 있는 답글이 모두 삭제되도록 하기 위해서, 댓글의 \_id를 활용해서 답글에 저장된 comment_id를 확인하고 댓글 삭제 시 모든 답글이 함께 삭제가 되도록 deleteMany를 사용해서 구성
    - 테스트 해본 결과, 게시글 삭제 시에 해당 게시글과 작성된 댓글과 답글의 모든 데이터가 모두 삭제되는 것을 확인할 수 있었고, 댓글 또한 마찬가지로 삭제 시에 댓글과 함께 작성된 답글의 모든 데이터가 삭제되는 것을 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/28a4b0c91d0f0f37da54c2d4f5abfb116ad4a397)

<br />

- 추가 및 해결 해야 할 내용
  - 회원가입 form에서 잘못된 입력을 제출 했을 때, session에 데이터가 저장되는데, 기존의 session 데이터에서 업데이트되는 방식이 아닌 매번 제출할 때마다 새로운 session이 추가되고 있기 때문에 백엔드 코드에서 수정이 필요하다.
    - 계속 원인을 찾아보려고 이것저것 시도해보았지만 아직 어떤 코드가 정확히 원인인지 찾지 못해서 하나씩 천천히 테스트가 필요함
    - 일단 이걸 테스트 해보기전에 먼저 정상적으로 세션 만료가 되는지 확인해보았는데 정상적으로 세션 만료가 되기 때문에, 로그인을 먼저 구성해보고 정상적으로 로그인이 되는지 확인을 해보고 안된다면, session에 저장되는 부분을 다시 확인해봐야 할 것 같다는 생각
  - 로그인 후에, 새로고침 시 로그아웃 되어버리는 상황도 수정을 해야 함
    - 현재 로그인 한 후에, useEffect를 통해서 데이터를 확인하고 토큰이 유효하다면 정상적으로 로그인 유지는 되지만, 새로고침 시 깜빡거리면서 메인헤더가 변경되는 것이 보이기 때문에 이 부분을 수정할 수 있으면 수정할 생각이다.
  - 로그인을 유지하고 있을 때, token이 만료 시간에 가까워지면 자동으로 갱신되는 로직을 추가 해야 함
    - 대충 구성만 되어 있는 상태로, 좀 더 자세한 코드와 테스트가 필요함
  - 게시글 추가 form 크기 조절 추가 필요
  - 댓글, 답글 CSS 추가해서 구분하기 쉽도록 해줄 필요
    - 추가로 댓글과 답글이 추가된 날짜를 가져와서 보여주도록 구성 필요

# 오늘 느낀 점

- 처음에 줄 바꿈과 관련된 내용을 백엔드에서 구성하기 위해 replace를 사용해서 구성했으나, 정상적으로 작동하지 않고 단순하게 `<br />`을 문자열로 변경해서 백엔드에 저장되는 것을 확인하고 이 방법으로는 해결될 것 같지 않아서, CSS에 `white-space: pre-line` 내용을 추가해서 줄 바꿈이 되도록 구성을 해보았는데, 이 방법으로도 해결되지 않아서 어떻게 처리해야 하는지 곤란했었다. 다시 확인해보니 form이 아닌, 출력이 되는 부분에서 줄 바꿈 코드를 추가해야 했는데 form과 관련된 CSS에서 줄 바꿈 코드를 추가해서 줄 바꿈 적용이 되지 않아서 해당 내용을 수정해주니 정상적으로 줄 바꿈이 적용된 내용이 화면에 출력되는 것을 확인할 수 있었다. 이제는 정상적으로 줄 바꿈과 관련된 내용도 출력이 되고, textarea의 크기 수정, 크기를 조절할 수 없게 해주면서 댓글 창이라는 것을 알 수 있게 해주었다. CSS를 좀 더 추가해서 댓글과 답글을 구분해주고 알아볼 수 있도록 해줄 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
