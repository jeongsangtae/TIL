# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 새로고침 시에 메인헤더의 조건부 렌더링 변경에 따른 깜빡임 현상 문제
    - 깜빡임 확인을 위해 다시 테스트 진행
      - F12 관리자 도구를 키고 테스트
        - 게시판 페이지는 메인헤더의 깜빡임이 없음
        - 홈, 프로필 페이지는 메인헤더의 깜빡임이 조금 남아 있음
      - F12 관리자 도구를 키지 않고 테스트
        - 게시판 페이지 메언헤더의 깜빡임이 없음
        - 홈, 프로필 페이지에서는 어쩌다가 한 번 깜빡임이 생김
      - 관리자 도구를 켜놓은 상태로 테스트하면 렌더링 과정을 느리게 만들 수 있기 때문에 이로 인해 깜빡임이 더 잘 보일 수 있음
      - 관리자 도구를 꺼놓은 채로 테스트하면 확실히 주의 깊게 보지 않는 이상 잘 느껴지지 않을 수 있다고 생각이 됨
    - localStorage와 useEffect를 활용하여 상태 관리를 최적화하고 있는데, 아직은 조금 부족하다는 생각이 든다.
      - 여기에서 localStorage, useEffect를 더 개선하려고 코드를 변경해볼 수도 있지만, 그 방법 대신에 로딩 인디케이터나 스켈레톤 로딩을 추가해서 로딩 경험을 개선해보려고 생각 중이다.

  <br />

  - 게시글 추가 페이지에서 useLoaderData, loader 함수 삭제 및 ErrorPage 컴포넌트 삭제
    - 게시글 추가 페이지에서 더 이상 사용하지 않는 Hook, 함수 등을 삭제하고, ErrorPage 컴포넌트도 사용하지 않기 때문에 삭제를 진행했다.
    - 프론트엔드 구성
      - 게시글 추가 페이지에서 useLoaderData를 통해서 가져오는 데이터 대신에, Context API에서 가져오는 데이터를 사용하기 때문에 해당 코드는 더 이상 사용하지 않으므로 삭제
      - 라우트 구성에서 게시글 추가 페이지부분에 postsLoader 함수를 추가해서 사용하고 있었는데, useLoaderData를 삭제함으로써 더 이상 사용되지 않기 때문에 함께 삭제해주었다.
      - ErrorPage 컴포넌트도 더이상 사용하지 않으며, NotFound라는 이름의 컴포넌트를 사용하기 때문에 ErrorPage 컴포넌트는 삭제를 진행해주었다.
    - 당연하게도 더 이상 사용하지 않는 내용들을 삭제한 것이기 때문에 테스트해도 작동에 문제가 없었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/0bdc2bd18d39a47e36b3e810937826c29be9d76e)

  <br />

  - 로딩 인디케이터 또는 스켈레톤 구성
    - 메인헤더나 다른 내용에서 새로고침 시, 조건부 렌더링 변경 때문에 깜빡임이 조금 남아 있는데, 이 부분을 해결하기 위해서 localStorage나 useEffect를 사용하고 있음에도 좀 부족하기 때문에 추가로 로딩 인디케이터나 스켈레톤을 사용하려고 생각했기 때문에 해당 내용을 조금 정리
    - 로딩 인디케이터
      - 사용자에게 데이터 로딩 중임을 알리는 시작적 요소
      - 일반적으로 원형 프로그레스 바나 스피너가 사용된다.
      - 간단하고 명확한 피드백을 제공하지만, 사용자가 실제로 어떤 내용이 로딩되고 있는지는 알 수 없다.
    - 스켈레톤 로딩
      - 페이지의 레이아웃을 대략적으로 표현하는 빈 공간으로, 실제 데이터가 로딩되기 전에 표시된다.
      - 사용자에게 로딩 중인 콘텐츠의 구조를 미리 보여주어, 로딩 시간이 길어도 덜 답답하게 느껴지게 한다.
    - 원래 생각은 로딩 인디케이터를 구현하려고 했으나, 최근 트렌드는 스켈레톤 로딩이 UX면에서 더 선호되기 때문에 스켈레톤 로딩으로 구현을 하려고 생각 중이다.
      - 스켈레톤 로딩은 사용자에게 로딩 중인 콘텐츠의 구조적인 힌트를 제공하여, 로딩 시간 동안의 불편함을 줄여주기 때문이다.
      - 로딩 인디케이터는 로딩 중임을 알리는 데는 효과적이지만, 사용자가 기다리는 동안 무엇을 기대해야 할지에 대한 정보는 제공하지 않는 것이 단점
    - 스켈레톤 로딩 추가 방법
      - 예전에 한 번 스켈레톤 로딩을 추가했었는데 그 때는 챠크라 UI를 사용해서 그 안에 있는 스켈레톤 컴포넌트를 사용해서 구성했었는데 이번에는 다른 라이브러리를 사용하거나, 직접 만들어볼 생각이다.
      - 챠크라 UI
        - 스켈레톤 컴포넌트는 단일 부분 컴포넌트로, 모든 스타일링이 스켈레톤 요소에 직접 적용된다.
      - 다른 라이브러리 사용
        - react-content-loader, react-loading-skeleton 등이 있음
        - 라이브러리들은 사용하기 간편하고, 커스터마이징도 용이하다고 함
        - 라이브러리들은 사용하면 복잡한 구성 없이도 빠르게 스켈레톤을 구현할 수 있고, 다양한 형태의 스켈레톤을 쉽게 만들 수 있다고 함
      - 직접 구성
        - 기본적으로는 배경색과 애니메이션을 적용한 div 요소를 사용해 로딩 중임을 나타내는 UI를 구성해야 함
        - 직접 구성하면 프로젝트의 요구사항에 맞춰 더 세밀하게 스켈레톤을 디자인할 수 있지만, 시간과 노력이 더 많이 필요함
      - 결론
        - 라이브러리를 사용하면 시간을 절약할 수 있고, 직접 구성하면 더 맞춤화된 UI를 만들 수 있는데, 나는 여기에서 라이브러리를 한 번 써보는 쪽으로 마음이 가고 있기 때문에 일단 라이브러리를 사용해볼 생각이다.
        - 라이브러리를 사용한다고 커스터마이징이 불가능한 것도 아니며, 다양한 형태로 구성을 할 수 있다고 하기 때문에 라이브러리를 사용해볼 생각이다.
        - 챠크라 UI 사용도 고려중

<br />

- 추가 및 해결 해야 할 내용
  - 회원가입 form에서 잘못된 입력을 제출 했을 때, session에 데이터가 저장되는데, 기존의 session 데이터에서 업데이트되는 방식이 아닌 매번 제출할 때마다 새로운 session이 추가되고 있기 때문에 백엔드 코드에서 수정이 필요하다.
    - 계속 원인을 찾아보려고 이것저것 시도해보았지만 아직 어떤 코드가 정확히 원인인지 찾지 못해서 하나씩 천천히 테스트가 필요함
    - 일단 이걸 테스트 해보기전에 먼저 정상적으로 세션 만료가 되는지 확인해보았는데 정상적으로 세션 만료가 되기 때문에, 로그인을 먼저 구성해보고 정상적으로 로그인이 되는지 확인을 해보고 안된다면, session에 저장되는 부분을 다시 확인해봐야 할 것 같다는 생각
    - 이 부분은 session을 삭제하게 되면 더 이상 신경쓰지 않아도 되지만, 현재는 session을 그냥 놔둔 상태이기 때문에 잠시 유지
  - 로그인을 유지하고 있을 때, token이 만료 시간에 가까워지면 자동으로 갱신되는 로직을 추가 해야 함
    - 대충 구성만 되어 있는 상태로, 좀 더 자세한 코드와 테스트가 필요함
  - 커스텀 Hook에 대한 고려 및 세션 제거 작업
    - 세션과 연동이 가능한 부분이 있는지도 테스트가 필요함
      - 불가능, 세션이나 jwt 토큰 중 하나만 사용하는 것이 좋다.
      - 세션을 삭제하는 작업을 아직 하지 않아서 해줘야 함
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 백엔드의 user-router.js에서 accessToken, login/success, profile router에서 모두 accessToken 함수 내용을 재사용하고 있는데, 굳이 3개의 router로 나눌 필요가 있는 지 확인해보고 필요가 없다면 하나로 줄여줘야 함
    - 명확하게 하기 위해서 일단은 하나로 합치지 않고, 그대로 나눠서 사용하도록 유지
    - 내용이 엄청 많은 코드로 구성된 것이 아니기 때문에 현재로서는 크게 문제 없다고 생각되어 그대로 유지
  - 액세스 토큰, 리프레시 토큰 버튼을 메인헤더에서 제거해야 함
    - 일단 주석처리해서 사용하지 않도록 변경
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 메인 헤더 깜빡임 확인
    - 게시판에서 새로고침 시에는 깜빡임이 없으나, 프로필, 홈 화면에서는 메인헤더의 변경 깜빡임이 조금 있기 때문에 추가 확인 필요

# 오늘 느낀 점

- 어제 계획했던 내용 3개중에서 하나는 처리를 했고, 다른 하나는 여러 테스트와 정보를 찾아보고 결국 스켈레톤 로딩으로 구성하는 것을 생각해놓은 상태인데, 남은 하나는 아직 손을 못댄 상태이기 때문에, 우선은 스켈레톤 로딩과 관련된 내용부터 처리를 해줄 생각이며, 그 내용을 처리한 후에 아직 수정을 해보지 못한 세션과 관련된 내용을 처리해줄 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
