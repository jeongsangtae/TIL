# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - react-loading-skeleton 라이브러리 추가 및 사용
    - react-loading-skeleton 라이브러리를 추가해서 스켈레톤을 구성해봤는데, CSS에 문제가 있는 지 스켈레톤이 움직이는 느낌이 없어서 현재 다른 방법을 생각하고 있다.
    - 프론트엔드 구성
      - react-loading-skeleton 라이브러리 추가
      - 스켈레톤 UI 컴포넌트 추가
        - 여기에 스켈레톤 UI 관련 내용 함수를 추가하고 다른 컴포넌트에서 가져와서 사용할 예정으로 추가
      - 스켈레톤 UI 컴포넌트에서 react-loading-skeleton 라이브러리 import, react-loading-skeleton/dist/skeleton.css import
        - 테스트하기 위해서 heading 부분만 구성
        - 사용하려는 컴포넌트의 className을 가져와서 사용
        - width와 height만 구성해서 테스트
      - Posts 컴포넌트에서 테스트하기 위해서 로그인 유무를 조건부로 추가하고, 스켈레톤 UI 내용을 사용
    - 테스트 결과 뭔가 스켈레톤이 역동적으로 변경되면서 티가 나지 않아서 다른 방법을 테스트해봐야 함
      - 적용이 된 것 같은데, CSS가 꼬인건지 역동적인 변화가 없음
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/a3c9780cd9980b0bcf39665c1034a37434f3448e)

  <br />

  - 스켈레톤 UI를 자체적 구성 추가 및 사용
    - react-loading-skeleton 라이브러리가 원하는 것과 다르게 표시가 되기 때문에 한 번 자체적으로 구성해보기 위해서 내용을 추가하고 사용
    - 프론트엔드 구성
      - Posts 컴포넌트의 heading 부분에서 className에 조건부로 내용이 들어가도록 구성
      - CSS에서 keyframes를 사용해서 애니메이션을 추가
      - heading의 다른 조건부 className에 들어갈 CSS 내용 구성
        - 기존의 텍스트가 보이지 않도록, `text-indent: -9999px`추가
        - 애니메이션 추가
        - 백그라운드 사이즈 추가
        - 스켈레톤 크기 지정 내용 추가
    - CSS에서 구성한 내용을 테스트해본 결과, 역동적인 변화는 생겼지만 뭔가 크기가 좀 맞지 않아서 확인해보니, 전체적으로 CSS 구성된 내용에서 line-height가 추가되어 있기 때문에 크기가 뭔가 부자연스럽게 맞지 않은 것을 확인했다.
      - 이 내용을 고치기위해서 온갖 방법을 시도했으나, 만족스러운 결과를 얻지 못해서 현재 다른 방법을 생각 중이다.
      - 스켈레톤의 크기가 기존의 내용 크기에 맞지 않는 것도 영향이 있긴 했지만, 스켈레톤 내용을 사용하려는 컴포넌트마다 className을 조건부로 구성이 되도록 해줘야 하고, 추가로 CSS 파일마다 스켈레톤 구성을 해놓고 사용해야 하기 때문에 좀 번거롭다는 생각이 들었기 때문에 다른 방법을 생각 중이다.
      - 현재 `react-content-loader`는 사용해보지 않았기 때문에 `react-content-loader`도 한 번 추가해서 구성해보고, 이것도 뭔가 만족스럽지 못하다면 그냥 로딩 인디케이터로 구성하는 것도 생각 중이다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/6e91a6630972d1619a635e5c771f360f1ea667ec)

<br />

- 추가 및 해결 해야 할 내용
  - 회원가입 form에서 잘못된 입력을 제출 했을 때, session에 데이터가 저장되는데, 기존의 session 데이터에서 업데이트되는 방식이 아닌 매번 제출할 때마다 새로운 session이 추가되고 있기 때문에 백엔드 코드에서 수정이 필요하다.
    - 계속 원인을 찾아보려고 이것저것 시도해보았지만 아직 어떤 코드가 정확히 원인인지 찾지 못해서 하나씩 천천히 테스트가 필요함
    - 일단 이걸 테스트 해보기전에 먼저 정상적으로 세션 만료가 되는지 확인해보았는데 정상적으로 세션 만료가 되기 때문에, 로그인을 먼저 구성해보고 정상적으로 로그인이 되는지 확인을 해보고 안된다면, session에 저장되는 부분을 다시 확인해봐야 할 것 같다는 생각
    - 이 부분은 session을 삭제하게 되면 더 이상 신경쓰지 않아도 되지만, 현재는 session을 그냥 놔둔 상태이기 때문에 잠시 유지
  - 로그인을 유지하고 있을 때, token이 만료 시간에 가까워지면 자동으로 갱신되는 로직을 추가 해야 함
    - 대충 구성만 되어 있는 상태로, 좀 더 자세한 코드와 테스트가 필요함
  - 커스텀 Hook에 대한 고려 및 세션 제거 작업
    - 세션과 연동이 가능한 부분이 있는지도 테스트가 필요함
      - 불가능, 세션이나 jwt 토큰 중 하나만 사용하는 것이 좋다.
      - 세션을 삭제하는 작업을 아직 하지 않아서 해줘야 함
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 백엔드의 user-router.js에서 accessToken, login/success, profile router에서 모두 accessToken 함수 내용을 재사용하고 있는데, 굳이 3개의 router로 나눌 필요가 있는 지 확인해보고 필요가 없다면 하나로 줄여줘야 함
    - 명확하게 하기 위해서 일단은 하나로 합치지 않고, 그대로 나눠서 사용하도록 유지
    - 내용이 엄청 많은 코드로 구성된 것이 아니기 때문에 현재로서는 크게 문제 없다고 생각되어 그대로 유지
  - 액세스 토큰, 리프레시 토큰 버튼을 메인헤더에서 제거해야 함
    - 일단 주석처리해서 사용하지 않도록 변경
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 메인 헤더 깜빡임 확인
    - 게시판에서 새로고침 시에는 깜빡임이 없으나, 프로필, 홈 화면에서는 메인헤더의 변경 깜빡임이 조금 있기 때문에 추가 확인 필요

# 오늘 느낀 점

- "react-loading-skeleton", 자체적으로 추가한 스켈레톤 UI를 다 사용해본 결과, 만족스러운 결과를 얻지 못해서 "react-content-loader"도 한 번 추가해서 확인해볼 생각이다. 최대한 구성이 간편하다는 "react-loading-skeleton"를 테스트했는데 내 CSS가 뭔가 이상한지, 아니면 잘못 사용한 건지 제대로 적용이 안된 것 같아서 마지막으로 "react-content-loader"를 테스트해보려고 생각 중인데, 이 것 또한 기본적인 플레이스홀더를 사용하는 것은 매우 간단하기 때문에 추가해서 구성하고 테스트해본 후에, 이 것도 내 CSS에서 제대로 적용이 되지 않는다면 로딩 인디케이터를 구성하는 방향으로 생각을 하고 있다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
