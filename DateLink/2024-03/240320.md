# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 당장 추가 및 변경해줘야 할 내용
    - 컴포넌트 파일에서 Context API를 사용하고 있지만 불필요하게 사용하는 부분을 수정해야 함
      - 우선 여러 컴포넌트에서 Context API를 가져와서 사용하고 있는데, 여기서 로그인 유무와 관련된 내용을 가져와서 useState에 다시 저장하고, useEffect를 사용해서 실시간 업데이트 되도록 하고 있는데, 이 작업이 불필요해보이기 때문에 수정할 생각이다.
    - 백엔드에서 사용되고 있는, JWT 토큰과 관련된 코드를 router에서 중복으로 사용하고 있기 때문에 재사용될 수 있게 구성을 해줘야 함
    - 사용자 정보도 Context API에 저장되고 있기 때문에, 프로필에서 해당 내용을 사용해서 내용이 보여지도록 구성을 해줘야 함
      - 일단은 페이지 형식으로 내용이 보여지게 해주고, 추가 작업은 나중에 할 계획
    - 액세스 토큰 버튼과 리프레시 토큰 버튼을 메인헤더에서 제거해줘야 함
      - 굳이 지금 사용하지 않고, 필요 없기 때문에 주석 처리해주고 사용하지 않도록 변경해줘야 함
    - 코드에서 예외 처리가 필요한 부분을 찾아서 추가 작업을 해줘야 함
      - 특히, 백엔드에서 오류가 발생하면 애플리케이션 자체가 중지되어 프론트에서 계속 오류 화면이 띄워지기 때문에 오류가 발생하면 예외 처리를 통해서 애플리케이션 작동이 멈추지 않고, 오류 메시지를 전달하거나 해당 오류를 보여주는 페이지로 이동하도록 해줘야한다.

  <br />

  - 필요한 구성 또는 변경인지 다시 생각해봐야 하는 내용
    - 커스텀 Hook을 추가해서, 재사용할 수 있는 코드와 유지 보수할만한 내용을 옮겨야 한다.
      - 커스텀 Hook이 정말로 필요한 지, 다시 한 번 생각해봐야 한다.
      - 로그인과 관련된 내용도 Context API에서 구성해놓고 가져와서 사용하고 있기 때문에 정말로 필요한 지, 생각해보고 확실하게 판단을 해야 함
    - Context API에서 userInfo 외에, 따로 구성한 userName도 전달해서 사용하고 있는데 따로 구성할 필요가 있는 지 생각해봐야 함
    - 액세스 토큰, 리프레시 토큰을 자동 갱신 하는 것에 대해 다시 생각해봐야 함
      - 정말로 현재 구성에서 필요한 지 다시 생각해봐야 함
      - 리프레시 토큰은 자동 갱신이 필요 없을 것 같지만, 액세스 토큰은 리프레시 토큰이 존재하는 동안에는 자동 갱신이 필요할 수도 있기 때문에 다시 고려해보고 생각해봐야 한다.

  <br />

  - 새롭게 추가해줘야 하는 부분
    - URL 이동에 대한 처리가 필요함
      - 현재는 권한이 없음에도 URL로 이동할 수 있는 문제가 있기 때문에 이 부분을 전역적으로 컨트롤할 수 있는 내용이 필요함
      - 권한에 따라서, 페이지 이동이 가능하도록 구성을 해줘야 함
      - 오류 페이지를 보여주고, 이전 페이지나 메인 페이지로 이동하도록 해줘야 함
    - 로딩 스피너 또는 로딩 애니메이션 관련 내용
      - 무작정 빙글빙글 돌아가는 로딩 스피너로 구현하는 것이 아닌, 로딩 애니메이션을 사용하는 것도 생각 중
      - 스켈레톤을 사용해서, 데이터가 렌더링 되기 전에 로딩이 끝나고 어떤 형식으로 콘텐츠가 자리 잡는지 보여주는 방식도 괜찮다고 생각 중
    - 반응형 구성
      - 현재 반응형이 없어서 화면이 작아지면 엉망이기 때문에 추가해줘야 함
      - 우선 순위는 좀 낮지만, 반드시 필요한 작업 중 하나

<br />

- 추가 및 해결 해야 할 내용
  - 회원가입 form에서 잘못된 입력을 제출 했을 때, session에 데이터가 저장되는데, 기존의 session 데이터에서 업데이트되는 방식이 아닌 매번 제출할 때마다 새로운 session이 추가되고 있기 때문에 백엔드 코드에서 수정이 필요하다.
    - 계속 원인을 찾아보려고 이것저것 시도해보았지만 아직 어떤 코드가 정확히 원인인지 찾지 못해서 하나씩 천천히 테스트가 필요함
    - 일단 이걸 테스트 해보기전에 먼저 정상적으로 세션 만료가 되는지 확인해보았는데 정상적으로 세션 만료가 되기 때문에, 로그인을 먼저 구성해보고 정상적으로 로그인이 되는지 확인을 해보고 안된다면, session에 저장되는 부분을 다시 확인해봐야 할 것 같다는 생각
  - 로그인 후에, 새로고침 시 로그아웃 되어버리는 상황도 수정을 해야 함
    - 현재 로그인 한 후에, useEffect를 통해서 데이터를 확인하고 토큰이 유효하다면 정상적으로 로그인 유지는 되지만, 새로고침 시 깜빡거리면서 메인헤더가 변경되는 것이 보이기 때문에 이 부분을 수정할 수 있으면 수정할 생각이다.
  - 로그인을 유지하고 있을 때, token이 만료 시간에 가까워지면 자동으로 갱신되는 로직을 추가 해야 함
    - 대충 구성만 되어 있는 상태로, 좀 더 자세한 코드와 테스트가 필요함
  - 로그인 시 주어지는 토큰을 확인하고, 해당 토큰을 통해 인증하고 게시글, 댓글, 답글 관련 기능을 활성화해주는 코드를 구성해야 함
    - 전체적으로 저 인증을 확인할 수 있게 해주는 것이 1차 목표로, 애플리케이션 전체에서 인증을 확인할 수 있게 된다면 쉽게 구성이 될 것으로 예상된다.
      - Context API를 추가해서, 로그인 유무를 전체에서 알 수 있도록 구성해주고 필요할 때 내용을 가져와서 사용 할 수 있다.
        - 구성 함
    - 세션과 연동이 가능한 부분이 있는지도 테스트가 필요함
      - 불가능, 세션이나 jwt 토큰 중 하나만 사용하는 것이 좋다.
      - 세션을 삭제하는 작업을 아직 하지 않아서 해줘야 함
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 오류 페이지 이동에 대한 처리가 필요
    - ex) 게시글 추가 버튼이 로그인하지 않았음에도 활성화되어 클릭되면 오류 페이지로 이동해서 서버에서 문제가 생기지 않도록 조치가 필요함
    - ex) 로그인을 하지 않은 채로 강제로 URL을 통해서 이동하려고 할 때, 오류 페이지로 이동하도록 구성을 해줘야 함

# 오늘 느낀 점

- 로직을 짜기 전에, 우선 한 번 정리를 하고 가야 한다고 생각이 되어, 당장 추가 및 수정해야 할 부분을 정리해주고, 생각한 구성에서 정말 필요한 내용이 맞는지, 그리고 어떤 내용을 앞으로 추가해줘야 할 지를 정리해주었다. 계속 생각나는 대로 내용을 구성하고 있어서 좀 뒤죽박죽 정신없이 코드를 구성하는 것 같아서 정리를 한 번 해줬는데, 앞으로 어떤 내용을 추가해주고 구성해야 할 지 조금 가닥이 잡히는 것 같기 때문에, 정리한 내용을 바탕으로 내용 구성을 진행할 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
