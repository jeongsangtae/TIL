# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 테마 모드 전환하는 로직 추가
    - Context API에서 테마 모드를 전환하는 관련된 로직을 구성하고 테마 모드 전환 버튼을 클릭했을 때 테마 모드 내용이 로컬 스토리지에서 정상적으로 저장되고 전환되는지 확인
    - 프론트엔드 구성
      - 테마 모드를 저장할 useState 추가
        - useEffect에 의해 변경되는 내용을 저장
      - 테마 모드를 전환하는 useEffect 추가
        - 로컬 스토리지에 저장된 테마 모드를 확인하고, 새로운 값을 로컬 스토리지에 저장해서 테마 모드를 전환하도록 구성
      - 테마 모드 내용을 확인하고, 값이 변화할 때마다 새로운 값을 저장하는 useEffect 추가
        - 테마 모드를 의존성 배열로 추가
        - input 버튼 클릭 시, 테마 모드 전환 함수가 작동하고 의존성 배열이 변경된 내용을 감지해서 로컬 스토리지에 새로운 테마 모드 값을 저장
      - 테마 모드를 전환하는 함수 추가
        - 테마 모드가 라이트 모드면 다크 모드로 변경, 테마 모드가 다크 모드면 라이트 모드로 변경되도록 구성
      - 내보내기 위해서 초기값을 구성하고, value에 값을 추가해서 사용할 수 있도록 구성
      - 메인헤더의 모드 전환하는 input에 onClick prop을 추가하고, Context API에서 가져온 테마 모드 전환 함수를 사용하도록 구성
    - 테스트 결과, 테마 모드 전환 버튼 클릭 시 콘솔과 로컬 스토리지에서 테마 모드 내용이 변경되는 것을 확인할 수 있었다.
      - 아직 테마 모드 전환에 따른 CSS를 추가하지 않아서 UI는 확인할 수 없지만, 콘솔과 로컬 스토리지에서 정상적으로 변경되는 것을 확인
      - 추가 테스트 결과, 새로고침하면 테마 모드 전환 버튼이 초기화되는 것을 확인해서 이 부분을 수정해줘야 함
      - 새로고침해도 로컬 스토리지의 내용은 그대로 유지되는 것을 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/b34fc249aaa4039b3340401b7290a3a98b3986af)

  <br />

  - 테마 모드 전환하는 로직 변경 및 input에 defaultChecked를 추가해서 오류 수정 그리고 CSS에 간단한 내용을 추가해서 테스트
    - 앞에서 구성한 내용을 테스트한 결과, 새로고침 시에 input이 초기화되는 오류를 발견하고 해당 오류를 수정해주며, Context API에서 구성된 테마 모드 전환하는 코드를 좀 더 명확하고 간결하게 수정해주고, 테마 모드 전환이 정상적으로 적용되는 지 확인하기 위한 테스트 코드를 추가해주었다.
    - 프론트엔드 구성
      - 테마 모드 관련 첫 번째 useEffect
        - 로컬 스토리지에서 테마 모드 내용을 찾고, 존재한다면 그 내용을 useState에 저장
        - 로컬 스토리지에서 테마 모드 내용을 찾지 못한다면, useState에 라이트 모드 내용이 들어가고, 로컬 스토리지에도 추가되어 라이트 모드가 적용되도록 구성
      - 테마 모드 관련 두 번째 useEffect
        - if-else if로 구성된 내용에서 삼항 연산자로 변경해서 좀 더 간단한 코드가 되도록 구성
      - 테마 모드 전환하는 input에 defaultChecked 추가
        - defaultChecked를 추가해서 "authCtx.themeMode"가 다크 모드일 때는 체크박스가 체크되어 있으며, 라이트 모드일 때는 체크가 되지 않도록 해주며, 이로 인해 새로고침을 해도 이전에 적용되어있는 테마가 그대로 유지되게 된다.
      - 테마 모드 전환으로 className 내용이 동적으로 변경되는 상수 추가
        - 사용하고 있는 요소에 테마 모드와 관련된 className을 모두 조건부를 추가하면 코드 구성이 길어지기 때문에, 컴포넌트 파일 내부에서 재사용 사용될 수 있도록 구성
      - 메인헤더의 헤더 부분을 통해 테마 모드 전환이 잘 이루어지는 지 확인할 수 있도록 앞에서 추가한 상수를 className에 추가
    - CSS 구성
      - index.css에서 기본으로 사용되는 색상들을 모두 제거
        - 컴포넌트 파일 내부적으로 테마 모드 전환에 따른 CSS 내용를 관리하도록 구성해줄 생각이다.
      - 메인헤더가 테마 모드에 따라서 색상이 변경되도록 구성
        - 아직은 테스트를 위한 구성으로, 이후 CSS 내용은 변경될 예정
    - 테스트 결과, 새로고침해도 테마 모드가 정상적으로 유지되는 것을 확인할 수 있었고, UI에서도 라이트 모드와 다크 모드 전환이 되는 것을 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/68920b31236ebbcb4ee494b4995a30abb641a65c)

<br />

- 추가 및 해결 해야 할 내용
  - 커스텀 Hook에 대한 고려
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 백엔드의 user-router.js에서 accessToken, login/success, profile router에서 모두 accessToken 함수 내용을 재사용하고 있는데, 굳이 3개의 router로 나눌 필요가 있는 지 확인해보고 필요가 없다면 하나로 줄여줘야 함
    - 명확하게 하기 위해서 일단은 하나로 합치지 않고, 그대로 나눠서 사용하도록 유지
    - 내용이 엄청 많은 코드로 구성된 것이 아니기 때문에 현재로서는 크게 문제 없다고 생각되어 그대로 유지
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함

# 오늘 느낀 점

- 테마 모드와 관련된 로직이 구성이 되었기 때문에, 해당 내용을 필요한 컴포넌트에 추가해서 라이트 모드와 다크 모드에 각각 적용될 색을 추가 구성해줘야 한다. 테마 모드 관련된 색을 전역적으로 구성해주려고 했으나 오히려 좀 복잡할 수 있다고 생각이 되어, 컴포넌트 내에서 각각 구성하는 것으로 결정하게 되었다. 컴포넌트 내에서도 전체적으로 테마 모드를 적용하려고 했으나, 텍스트와 관련된 부분에서 따로 색을 지정하는 것이 문제가 되기 때문에 필요한 요소에 따로 구성을 해줄 생각이다. 테마 모드와 관련된 색을 다 구성해준 뒤에는 드롭 다운 메뉴와 관련된 CSS도 수정해주고 회원가입과 로그인 모달 관련 CSS 작업을 해줄 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
