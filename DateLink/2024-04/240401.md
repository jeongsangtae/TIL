# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - React Content Loader 추가 및 사용
    - 스켈레톤 UI를 구성하기 위해서 마지막으로 방법인 "react-content-loader"를 추가해서 구성하고 여러 테스트를 진행해보았다.
    - 프론트엔드 구성
      - "react-content-loader" 라이브러리 설치
      - 스켈레톤 UI 컴포넌트에서 "react-content-loader" 라이브러리를 import하고, "ContentLoader" 컴포넌트를 추가해서 구성
      - "ContentLoader" 내용에는 기본적인 박스 크기와 속도, 위치, 색상을 지정하고 내용으로 rect를 추가해서 위치, 크기, 등을 지정
      - Posts 컴포넌트에서 해당 내용을 import해서 사용
    - 테스트 결과, 생각보다 만족스러운 결과를 얻지 못했다.
      - 이유는 자유도가 있긴 하지만 뭔가 구성하는데 많이 불편하다는 생각이 들었고, "react-content-loader" 관련 웹 사이트에서 크기와 위치 등을 조정해보고 해당 내용을 가져와서 바로 사용할 수 있음에도 구성이 번거롭다는 생각이 들었다.
      - 사이트에서 내용을 구성하는데 수치를 변경하기 위해서 테스트하는데, 백스페이스바로 수치 변경하려고 하면 계속 블럭이 사라지는 문제가 있었다.
      - 무엇보다 제일 큰 불편함은 위치 지정하는게 생각보다 많이 성가셔서 많이 불편하다고 생각이 되었다.
    - "react-content-loader" 라이브러리 또한 결과는 만족스럽지 못해서, 그냥 좀 더 단순한 로딩 인디케이터로 구성하려고 생각 중이다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/128f224630414c01f94d668228ad5593baf30506)

  <br />

  - 로딩 인디케이터 추가 및 사용
    - 스켈레톤 UI를 구성하기 위해서 2개의 라이브러리와 자체적으로 구성한 방법을 테스트해봤으나, 만족스러운 결과를 얻지 못해서 로딩 인디케이터를 추가하고 사용해보았다.
    - 프론트엔드 구성
      - LoadingIndicator 컴포넌트를 추가
      - 내용은 따로 없고, div로만 구성
        - CSS로만 구성이 되어있음
        - CSS 구성이 들어오기 위해서 className은 추가
      - LoadingIndicator 컴포넌트에 사용할 CSS 추가
        - 이전에 사용하던 로딩 인디케이터 내용을 가져와서 사용
        - 원 형태로 돌아가는 로딩 인디케이터로 구성되어 있음
        - 화면 중앙에 오도록 내용 구성 추가
      - Posts 컴포넌트에서 LoadingIndicator 컴포넌트 import
      - isLoading 이라는 useState를 추가해서, 로딩 상황일 때 로딩 인디케이터가 보이도록 구성
        - isLoading 초기 값은 false로 시작
      - fetch 함수의 앞 뒤로 isLoading 내용 추가
        - 데이터가 넘어오기 전, isLoading이 true가 되고 데이터가 다 넘어온 뒤에는 false로 변경되어 로딩 인디케이터가 화면에 표시되도록 구성
      - try...finally 구문을 추가해서, 예외 상황에 대응하도록 구성
        - try...finally 구문이 없어도 정상적으로 작동되긴 함
      - setTimeout을 추가해서, 조금 딜레이를 주고 로딩 인디케이터가 확인되도록 구성
      - isLoading을 확인해서 true일 때 로딩 인디케이터가 보여지고, false로 변경되면 게시글 목록이 보여지도록 구성
    - 테스트 결과, 로딩 중일때는 로딩 인디케이터가 화면 중앙에서 표시되고 게시글 관련 데이터가 넘어오면 게시글 목록이 정상적으로 보이는 것을 확인할 수 있었다.
      - 현재 로딩 인디케이터를 사용하려는 컴포넌트 내에서 구성을 하고 있는데, 이 내용을 Context API나 커스텀 Hook을 통해서 전역적으로 사용할 수 있도록 변경해볼 생각이다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/a2cb7d79aa33848e3bc010566e94e14e73a38265)

<br />

- 추가 및 해결 해야 할 내용
  - 회원가입 form에서 잘못된 입력을 제출 했을 때, session에 데이터가 저장되는데, 기존의 session 데이터에서 업데이트되는 방식이 아닌 매번 제출할 때마다 새로운 session이 추가되고 있기 때문에 백엔드 코드에서 수정이 필요하다.
    - 계속 원인을 찾아보려고 이것저것 시도해보았지만 아직 어떤 코드가 정확히 원인인지 찾지 못해서 하나씩 천천히 테스트가 필요함
    - 일단 이걸 테스트 해보기전에 먼저 정상적으로 세션 만료가 되는지 확인해보았는데 정상적으로 세션 만료가 되기 때문에, 로그인을 먼저 구성해보고 정상적으로 로그인이 되는지 확인을 해보고 안된다면, session에 저장되는 부분을 다시 확인해봐야 할 것 같다는 생각
    - 이 부분은 session을 삭제하게 되면 더 이상 신경쓰지 않아도 되지만, 현재는 session을 그냥 놔둔 상태이기 때문에 잠시 유지
  - 로그인을 유지하고 있을 때, token이 만료 시간에 가까워지면 자동으로 갱신되는 로직을 추가 해야 함
    - 대충 구성만 되어 있는 상태로, 좀 더 자세한 코드와 테스트가 필요함
  - 커스텀 Hook에 대한 고려 및 세션 제거 작업
    - 세션과 연동이 가능한 부분이 있는지도 테스트가 필요함
      - 불가능, 세션이나 jwt 토큰 중 하나만 사용하는 것이 좋다.
      - 세션을 삭제하는 작업을 아직 하지 않아서 해줘야 함
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 백엔드의 user-router.js에서 accessToken, login/success, profile router에서 모두 accessToken 함수 내용을 재사용하고 있는데, 굳이 3개의 router로 나눌 필요가 있는 지 확인해보고 필요가 없다면 하나로 줄여줘야 함
    - 명확하게 하기 위해서 일단은 하나로 합치지 않고, 그대로 나눠서 사용하도록 유지
    - 내용이 엄청 많은 코드로 구성된 것이 아니기 때문에 현재로서는 크게 문제 없다고 생각되어 그대로 유지
  - 액세스 토큰, 리프레시 토큰 버튼을 메인헤더에서 제거해야 함
    - 일단 주석처리해서 사용하지 않도록 변경
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 메인 헤더 깜빡임 확인
    - 게시판에서 새로고침 시에는 깜빡임이 없으나, 프로필, 홈 화면에서는 메인헤더의 변경 깜빡임이 조금 있기 때문에 추가 확인 필요

# 오늘 느낀 점

- 스켈레톤 UI로 구성을 하고 싶었지만 생각보다 구성이 쉽지 않다고 느껴졌으며, 구성해보는 과정에서 많이 번거롭다고 생각이 되었다. 그리고 현재 게시글 목록, 게시글 추가, 등 여러 컴포넌트의 CSS가 완성된 상태가 아니기 때문에, 현재 상황에서 힘들게 스켈레톤 UI 위치를 잡아주고 내용을 구성해도 결국 변경된 CSS에 따라서 다시 스켈레톤 UI도 변경이 되어야 하기 때문에 지금 추가하는 것은 불필요한 작업이라고 생각이 되었다. 스켈레톤 UI를 만약에 추가할 생각이 든다면, 다른 CSS를 다 완성하고 그 때 추가를 해주는 것이 맞기 때문에 일단은 로딩 인디케이터를 사용하는 구성으로 진행할 생각이다. 앞으로 해야 할 부분은 로딩 인디케이터를 전역적으로 간편하게 사용하도록 해주는 것과 세션과 관련된 내용을 정리해주는 것인데, 스켈레톤 UI 구성을 여러가지 시도해보느라 많이 지체된만큼 빠르게 구성을 해봐야 할 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
