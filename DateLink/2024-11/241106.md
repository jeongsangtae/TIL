# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 관리자 페이지의 채팅 내용에서 스크롤 관련 오류 수정
    - 사용자 페이지의 채팅에서는 채팅창을 열면 스크롤이 제일 하단으로 내려가 있게 되면서 새로운 메시지 버튼이나 하단으로 이동하는 버튼을 클릭하지 않아도 되지만, 관리자 페이지의 채팅에서는 채팅창을 열면 스크롤이 이상하게 중간이나 맨 위에 위치하기 때문에 이에 대한 오류를 고쳐해주기 위해서 내용을 수정해주었다.
    - 프론트엔드
      - AdminChats
        - useEffect를 추가하고 부모 컴포넌트에서 넘어온 chatRoomToggle을 if문으로 확인하고, chatRoomToggle이 true가 되면 setTimeout이 작동해서 커스텀 훅 내용인 scrollToBottomHandler가 실행되도록 구성
        - useEffect의 의존성 배열로 chatRoomToggle를 넣어서 chatRoomToggle 내용이 변화되면 확인하도록 구성하고, setTimeout의 지연시간을 100으로 구성해서 chatRoomToggle이 문제없이 확인되도록 구성
    - useEffect를 추가하고 setTimeout 시간도 조절해서 테스트해본 결과, 관리자 페이지의 채팅에서 어떤 사용자의 채팅창을 열어도 스크롤이 중간이나 맨 위에 있는 것이 아닌, 스크롤이 무조건 제일 하단에 위치해서 바로 최신 메시지를 볼 수 있게 되었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/b7179236b7bd703ef921c9b772be8ff0ab425cfc)

  <br />

  - 관리자 페이지의 채팅 사용자 리스트에서 useRef 내용 삭제
    - 관리자 페이지의 채팅 관련 내용에서 구성된 사용자 리스트 컴포넌트에 useRef를 구성해 놓았었는데, 이 내용이 참조된 채로 사용되고 있지 않아서 삭제해주었다.
    - 프론트엔드
      - AdminUserList
        - useRef 내용을 삭제하고, 참조하고 사용하지 않는 내용도 삭제
        - ul 요소에서 구성된 ref 내용도 삭제
    - useRef 내용이 추가되어 있지만 제대로 사용되지 않은 것을 발견하고 삭제해 주었는데, 혹시나 작동에 문제가 있을 지 걱정했지만 문제가 없는 것을 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/b5aa14434038afc4c59a6f10a392b6e3aed85814)

  <br />

  - 미니 커뮤니티 플랫폼 결과 내용의 프론트엔드 컴포넌트 내용 작성
    - 관리자 페이지 컴포넌트
      - 사용자
        - 사용자 목록, 사용자
      - 채팅 사용자 리스트
        - 채팅 사용자 리스트, 사용자
    - 컴포넌트에서 핵심이 되는 코드만 세부적으로 설명을 하고, 단순한 기능을 담당하는 코드는 간략하게 설명해서 전체적인 흐름이 정리되도록 내용 추가
    - [코드 내용](https://github.com/jeongsangtae/TIL/commit/65da428a67f2ce747f7d471b880bd847c9e8e2cc)

<br />

- 추가 및 해결 해야 할 내용
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
  - 배포하는 과정에서 오류가 생겼던 부분과 해결한 오류에 관한 내용을 정리해줘야 함
    - CORS 오류, Rewrite 관련 내용 등
    - 로컬 스토리지 초기화 오류 해결한 방법에 대한 정리가 필요
  - 설계, 결과 이 부분에 대한 내용을 정리해줘야 하고, 발생했던 에러에 대해 최대한 정리해주는 것도 필요함
    - 설계는 완료
    - 결과 진행중
      - 백엔드, DB 완료
      - 프론트엔드 내용의 컴포넌트 내용을 처리해줘야 함

# 오늘 느낀 점

- 관리자 페이지의 채팅 내용에서도 사용자 페이지의 채팅처럼 채팅창을 열면 스크롤이 하단에 위치해서 새로운 메시지가 보여져야 하지만, 스크롤이 중간에 위치하거나 맨 위에 위치하는 문제가 발생해서 오류를 수정해주었다. 관리자 페이지의 채팅 내용에서 사용자 리스트가 보여지는 컴포넌트에서 useRef가 구성되어 있었지만 참조되지 않고 세팅만 되어 있는 것을 확인하고 삭제해주었는데, 왜 사용되지 않는 내용이 구성되어 있을까 하고 생각해본 결과, 아마도 예전에 커스텀 훅 내용을 옮기기전에 사용하다가 삭제하지 않은 것으로 예상이 된다. 결과 내용에서 커스텀 훅 내용과 Context API 내용만 정리해주면 되는데, 이 내용들을 정리하면서 코드를 다시 볼 생각인데 이 때 문제가 발견되거나 코드를 간결하게 해줄 수 있는 부분이 있다면 처리를 해줄 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
