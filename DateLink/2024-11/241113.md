# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 관리자 팝업 수정 컴포넌트 추가 및 팝업, 드롭다운 메뉴, 관리자 메인헤더 수정
    - 관리자 메인헤더에서 관리자 팝업 수정 컴포넌트를 열고 닫는 함수를 추가해서 사용될 수 있도록 드롭다운 메뉴에 토글 함수를 전달하고, 관리자는 드롭다운 메뉴에서 팝업 수정 버튼이 보여지도록 수정해주고, 팝업 수정 버튼 클릭 시 토글 함수가 작동되어서 관리자 팝업 수정 컴포넌트 내용이 보여지도록 구성
    - 프론트엔드
      - Popup
        - 여러 개의 p 태그 대신에 하나의 p 태그만 보여지도록 변경
      - DropDownMenu
        - 팝업 수정 버튼에 사용될 새로운 아이콘 추가
        - AdminMainHeader 컴포넌트를 통해 전달 받은 prop 내용 추가
        - 로컬 스토리지에서 role 항목을 확인해서 사용자면 기존의 프로필 버튼이 그대로 보여지고, 사용자가 아닐 경우에는 팝업수정 버튼이 보여지도록 변경
          - 팝업수정 버튼에 전달 받은 토글 함수 prop을 추가
      - AdminMainHeader
        - 관리자 팝업 수정 컴포넌트를 토글하는 함수와 그걸 관리하는 useState 추가
        - 드롭다운 메뉴 컴포넌트에 토글 함수를 prop으로 전달
        - 조건부를 추가해서 팝업 수정 토글이 true일 때 관리자 팝업 수정 컴포넌트가 보여지도록 구성
      - AdminPopupEdit
        - Modal 컴포넌트를 추가하고, 여러 개의 p 태그를 추가해서 내용이 보여지는 지 확인
    - CSS
      - AdminPopupEdit
        - 파일만 추가하고 내용 구성은 하지 않음
    - 관리자 페이지의 드롭다운 메뉴를 통해서 팝업수정 버튼이 보여지고, 버튼 클릭 시 모달 형태로 뜨는 것을 확인했고 사용자 페이지에서는 팝업수정 버튼 대신에 프로필 버튼이 보여지지만, 관리자 페이지에서는 팝업수정 버튼이 보여지는 것을 확인
      - 페이지로 내용을 구성하는 것이 아닌, 모달 형태로 구성
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/851c6ab37503686044a9891e396d7ee9d13019c0)

  <br />

  - 관리자 팝업 수정 컴포넌트 내용 추가, 관리자 메인헤더 수정 (프론트엔드) 및 admin-routes 파일에 팝업 수정 라우트 추가 (백엔드)
    - 팝업수정 버튼을 클릭하면 모달이 열리고 백드롭이나 취소 버튼을 누르면 닫히도록 구성해주고, 관리자 팝업 수정 컴포넌트 내용을 구성해서 팝업 수정 모달에서 내용을 입력하고 제출하면 그 내용이 DB에 저장되도록 구성해주었다.
    - 백엔드
      - admin-routes
        - 프론트엔드에서 입력한 데이터를 전달 받아서 기존 팝업 내용을 덮어 씌워서 업데이트
          - 만약 기존 팝업 내용이 없다면 upsert를 사용해서 새롭게 추가
        - 데이터를 저장하는데 오류가 발생한다면 헬퍼 함수를 통해서 에러 전달
    - 프론트엔드
      - AdminMainHeader
        - 관리자 팝업 수정 컴포넌트에 토글 함수 내용을 prop으로 전달
      - AdminPopupEdit
        - 입력한 팝업 내용을 저장하고 관리하는 useState
          - title, content 내용을 함께 관리
        - 입력한 팝업 내용의 변화를 감지하는 함수
          - 하나의 함수로 제목과 내용을 함께 처리
        - 입력한 팝업 내용을 백엔드로 전달하는 함수
          - fetch 함수를 통해서 입력한 내용을 전달
          - 팝업 수정 실패시 오류 메시지 전달
          - 전달이 완료된 후에 모달이 닫히도록 구성
        - input을 통해서 제목 내용을 입력하고, textarea를 통해서 내용을 입력
        - 등록 버튼과 취소 버튼으로 구성해서 제출 및 모달 닫기를 실행
    - CSS
      - Popup
        - z-index 내용을 수정해서 모달이나 다른 메뉴창 뒤에 팝업창이 보이도록 구성
    - 팝업 내용을 입력하고 제출하면 DB에 저장되는 것을 확인했고, 기존에 데이터가 없어도 문제없이 새롭게 추가되며, 기존 데이터가 있다면 업데이트 되어서 1개의 팝업 내용만 있는 것을 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/35ddea2be5d8cbdd5c8275840d1d405d30644e0e)

<br />

- 추가 및 해결 해야 할 내용
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
  - 배포하는 과정에서 오류가 생겼던 부분과 해결한 오류에 관한 내용을 정리해줘야 함
    - CORS 오류, Rewrite 관련 내용 등
    - 로컬 스토리지 초기화 오류 해결한 방법에 대한 정리가 필요
  - 설계, 결과 이 부분에 대한 내용을 정리해줘야 하고, 발생했던 에러에 대해 최대한 정리해주는 것도 필요함
    - 설계는 완료
    - 결과 진행중
      - 백엔드, DB 완료
      - 프론트엔드 내용의 컴포넌트 내용을 처리해줘야 함
  - 팝업창 관련 내용
    - 현재는 팝업창에 보여지는 문구가 프로젝트에서 수동으로 입력된 상태이기 때문에, 이 내용을 수정해서 관리자 페이지에서 팝업창 관련 문구를 직접 입력해서 변경할 수 있도록 해줘야 함
    - 추가 처리로 팝업에 전달할 내용이 없을 때 팝업창이 보여지지 않도록 해줄 필요성이 있어서 이에 대한 처리가 좀 필요함

# 오늘 느낀 점

- 관리자 페이지에서 팝업 내용을 입력해서 DB에 저장하는 것은 문제없이 작동하기 때문에, 이제 DB에 저장된 내용을 불러와서 보여지도록 해야 하며, 팝업 내용을 수정하는 컴포넌트의 CSS를 수정해서 깔끔하게 보이도록 해줘야 한다. 현재는 한 개의 팝업 내용만 보여지도록 해줄 생각이고, 추후에 여러 팝업이 필요하다고 생각되면 그 때 코드를 수정해서 여러 팝업창이 보여지도록 해줄 생각이다. 그리고 추가로 한 가지 처리해야 할 게 있는데, 팝업에 전달할 내용이 없을 경우에 팝업창이 처음부터 보이지 않도록 해줘야 하는데 이에 대한 처리를 좀 생각해보긴 했지만 확실하지 않아서 여러 방법을 테스트해 봐야 한다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
