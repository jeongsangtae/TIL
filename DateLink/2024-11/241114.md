# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 팝업 데이터 출력
    - 업데이트된 팝업 내용이 사용자 페이지에서 출력되기 위해서, 프론트엔드에서 fetch 함수를 구성하고 백엔드에서 라우터 내용을 설정해 팝업 데이터를 가져오고 가져온 팝업 데이터를 저장해서 화면에 출력해주었다.
    - 백엔드
      - board-routes
        - DB에서 popup 내용 조회
        - 조회 실패 시 찾을 수 없다는 메시지 출력
        - 조회 성공 시 프론트엔드에 팝업 내용 전달
    - 프론트엔드
      - Popup
        - Auth Context API 내용을 추가
        - 가져온 팝업 데이터를 저장할 useState 추가
        - useEffect에 fetch 함수를 추가해서 팝업 데이터 조회
          - 데이터 조회 실패 시에 오류 메시지 출력
          - 조회 성공 시에 useState에 저장
        - useState에서 title, content 내용을 가져와서 기존의 텍스트를 대체해서 출력
    - 배포된 페이지를 처음에 들어가면 팝업창이 보여지면서 관리자가 입력한 팝업 내용이 보여지는 것을 확인했고, 수정한 팝업 내용이 그대로 보여지는 것도 확인
      - 팝업 조회와 관련된 내용을 사용자 페이지 라우터에서 구성했는데, 내용 수정은 관리자가 하지만 보는 사람은 다른 일반 사용자가 보기 때문에 사용자 페이지 라우터에서 구성
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/9a83de7b43a6c2a9fdea686028f56b54bc899183)

  <br />

  - 팝업 수정 컴포넌트에서 input checkbox, active 속성 추가 및 팝업 표시 조건부 수정
    - 관리자가 전달할 팝업 내용이 없을 경우 팝업창이 불필요하게 뜨지 않도록 해주기 위해서 관리자 페이지의 팝업 수정 컴포넌트에서 팝업 활성화를 컨트롤하는 내용을 추가하고 백엔드에 활성화 여부를 저장한 다음, 팝업 컴포넌트에서 팝업 데이터를 가져올 때 활성화 여부도 함께 가져와서 조건부를 통해 확인하고 팝업을 표시하도록 구성해주었다.
    - 백엔드
      - admin-routes
        - newPopup 내용에 active 내용을 추가
    - 프론트엔드
      - AdminPopupEdit
        - useState에 active 속성을 추가하고 초기값은 false로 설정
        - popupChangeHandler 함수 수정
          - type, checked 속성을 추가
          - name에서 type을 확인하고 checkbox일 경우 checked 속성을 확인하고 아닐 경우 value 속성을 확인
        - input을 추가해서 checkbox로 구성
          - type을 checkbox로 구성
          - id, name 속성을 추가하고 active로 구성
          - checked 속성과 onChange 속성은 수정한 useState 내용과 함수 내용을 구성
        - 새롭게 추가한 input checkbox와 연결되는 label을 추가
          - htmlFor 속성을 추가하고 active로 구성해서 연결
      - Popup
        - 팝업을 표시하는데 사용하던 조건부 내용을 수정
        - 세션 스토리지에서 확인하는 내용과 if문을 팝업 활성화 여부와 합쳐서 조건부 하나로 팝업 표시 여부를 결정하도록 수정
          - fetch 함수를 통해서 팝업 데이터를 가져오고, 그 값으로 popup useState 업데이트
          - 서버에서 받아온 활성화 여부 내용을 확인해서 false일 경우, 조건부가 false가 되면서 팝업이 표시되지 않음
          - 활성화 여부가 true일 경우, 세션 스토리지 내용을 확인해서 값이 없다면 null을 반환해서 !null이 true가 되어 조건이 통과하므로 팝업 표시
          - 활성화 여부가 true일 경우, 세션 스토리지 내용을 확인해서 값이 있다면 true를 반환하고 !true가 false가 되어 조건이 통과하지 않으므로 팝업이 표시되지 않음
          - 활성화가 true일 때 세션에 저장된 항목을 확인해서 두 조건이 모두 만족될 때 팝업 내용을 화면에 표시하도록 구성
          - 활성화가 false이거나 세션에 저장된 항목이 있다면 조건이 만족되지 않아서 팝업이 표시되지 않음
    - 팝업 활성화를 시키면 팝업창이 뜨는 것을 확인했고, 팝업 활성화가 되어 있지만 닫기 버튼을 클릭하면 새로고침해도 팝업창이 뜨지 않는 것을 확인, 팝업을 비활성화하고 확인해보면 세션 스토리지에 항목이 없음에도 팝업창이 표시되지 않는 것을 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/4a04e382a59913387314805543e4d6224aa673c4)

<br />

- 추가 및 해결 해야 할 내용
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
  - 배포하는 과정에서 오류가 생겼던 부분과 해결한 오류에 관한 내용을 정리해줘야 함
    - CORS 오류, Rewrite 관련 내용 등
    - 로컬 스토리지 초기화 오류 해결한 방법에 대한 정리가 필요
  - 설계, 결과 이 부분에 대한 내용을 정리해줘야 하고, 발생했던 에러에 대해 최대한 정리해주는 것도 필요함
    - 설계는 완료
    - 결과 진행중
      - 백엔드, DB 완료
      - 프론트엔드 내용의 컴포넌트 내용을 처리해줘야 함
  - 팝업창 관련 내용
    - 팝업 수정창 UI 내용을 깔끔하게 변경해줘야 함
    - 팝업에 관련된 결과 내용 정리 필요

# 오늘 느낀 점

- 관리자 페이지에서 수정한 팝업 내용이 사용자 페이지에서 출력되는 것을 확인했고, 관리자 페이지에서 팝업 활성화 여부를 체크할 수 있도록 내용을 추가해주면서 관리자가 팝업창에 띄울 내용이 없다면 비활성화 시켜서 팝업창을 띄우지 않아도 되고, 전달할 내용이 있을 때만 활성화 시켜서 띄우기 때문에 UX 부분에서 많이 좋아졌다고 생각이 된다. 여기서 팝업 내용에 대한 추가 기능은 아직 고민중이고 일단은 팝업 내용을 수정하는 UI가 엉망이라서 이걸 깔끔하게 보이도록 수정해줘야 한다. 그리고 추가된 팝업 관련 내용을 정리해서 결과 내용을 업데이트해 줘야 한다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
