# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - socket.io 연결 성공
    - 프론트엔드와 socket.io 내용이 연결되었는지 확인하기 위해서, 프론트엔드에서 input을 통해서 내용을 입력하고, 버튼 클릭 시 socket.io에 해당 내용을 전달해서 socket.io 터미널에서 확인되도록 구성해주었다.
    - 백엔드 구성
      - nodemon 라이브러리 추가
      - 프론트엔드에서 input으로 입력한 내용이 socket.on을 통해서 메시지를 받도록 구성
    - 프론트엔드 구성
      - input에서 입력한 내용이 버튼 클릭 시, socket.emit을 통해서 socket 서버에 전달되도록 구성
    - 테스트 결과, socket 서버를 실행하면 프론트엔드 콘솔에서 소켓 연결이 정상적으로 이루어졌다는 메시지를 출력하고, 프론트엔드에서 input을 통해서 내용을 입력하고 버튼 클릭 시, socket 서버 터미널에서 입력한 내용이 출력되는 것을 확인할 수 있었다.
      - 정상적으로 socket이 프론트엔드와 연결된 것을 확인했기 때문에, 프론트엔드에서 먼저 입력한 내용이 DB에 저장되면서 동시에 socket 서버에 전달되도록 해야 할 것 같다.
      - DB에 채팅 내역이 저장되기 전에 기본적인 UI 구성도 필요하다고 생각되어, 일단 Chat 버튼과 버튼 클릭 시 나타나는 채팅창에 대한 구성을 해줘야 할 것 같다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/47f9abbab4bd636dc47e5add81ca4fc2e4aaa563)

  <br />

  - 채팅 버튼 icon 추가
    - 채팅 기능을 구성하기 전에, 우선 화면에서 채팅 버튼이 보여지고 해당 버튼의 위치 조정 및 CSS를 구성
    - 프론트엔드 구성
      - Chat 컴포넌트
        - Chat 컴포넌트에 react-icon 추가
          - BsChatFill라는 채팅과 관련된 아이콘 추가
        - chatToggle useState 추가
        - chatToggleHandler 함수 추가
          - 해당 버튼 클릭 시, 채팅창이 열고 닫히도록 구성
        - 채팅 아이콘을 추가하고 채팅 아이콘을 클릭해서 true가 되었을 때, 채팅창 관련 내용이 보이도록 구성
      - MainHeader 컴포넌트
        - Chat 컴포넌트가 전체적으로 보이도록 구성
      - MainContent 컴포넌트
        - 기본적인 테스트를 했기 때문에, 해당 컴포넌트에서 Chat 컴포넌트를 삭제하고 MainHeader 컴포넌트로 이동
    - CSS 구성
      - 채팅 버튼은 우측 하단에 위치하도록 구성
        - position: fixed, right, bottom 속성으로 우측 하단에 고정되도록 구성
      - 배경은 검정색, 동그란 원으로 구성
      - 채팅 버튼에 커서를 올렸을 때 채팅 버튼이 조금 커지도록 구성
        - transform에 scale 효과를 줘서 커지도록 구성
      - 채팅 버튼의 아이콘은 채팅 버튼의 반정도 되는 크기로 구성
        - 색은 흰색으로 구성
    - 테스트 결과, 채팅 버튼이 우측 하단에 고정된 상태로 스크롤 이동 시, 따라서 움직이는 것을 확인할 수 있었고, 채팅 버튼에 커서를 올리면 조금 커지는 효과를 얻을 수 있는 것도 확인할 수 있었다.
      - 채팅 버튼을 클릭했을 때 채팅창 내용이 보여져야 하는데, 아직 제대로 이 부분은 구성을 하지 않아서 보여지지 않기 때문에 이 부분에 대한 내용을 추가해야 한다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/8c9fbcc53b590140fe43226cc039e20971c1fa2f)

  <br />

  - 채팅 컨테이너, 채팅 닫는 icon 추가
    - 채팅 버튼을 클릭했을 때 채팅창 화면이 뜨도록 하기 위해서 기본적인 컨테이너를 구성하고, 해당 컨테이너를 닫을 수 있도록 해주는 icon 버튼을 추가
    - 프론트엔드 구성
      - react-icons에서 MdCancel icon 추가
      - 채팅 컨테이너를 추가해서, 그 안에 icon과 ul 요소 내용이 들어가도록 구성
      - icon에 chatToggleHandler를 onClick으로 추가해서, 해당 버튼 클릭 시 chatToggleHandler 함수가 작동해서 채팅 컨테이너가 닫히도록 구성
    - CSS
      - 우측 하단에 위치하도록 구성해주고, 세로가 가로보다 길게 구성
        - right, bottom을 채팅 버튼과 똑같은 수치로 구성해서, 채팅 버튼 클릭 시 그 위에 채팅 컨테이너가 보이도록 구성
        - 이 부분은 채팅 컨테이너가 채팅 버튼 위에 보이는 것이 아닌, 그 위에 보이도록 구성이 변경될 수 있음
      - 채팅 컨테이너는 닫는 아이콘은 오른쪽 끝에 위치하도록 구성
    - 테스트 결과, 채팅 버튼을 클릭하면 채팅 컨테이너가 채팅 버튼 위로 보이고, 닫기 아이콘을 클릭하면 채팅 컨테이너가 닫히면서 다시 채팅 버튼이 보이는 것을 확인할 수 있었다.
      - 해상도가 큰 화면에서는 채팅 버튼이나 채팅 컨테이너 위치가 문제가 없어보이는데, 작은 해상도에서는 스크롤 위에 위치하는 것을 확인했는데, 이 부분에 대한 수정이 필요해보인다.
      - 여기서 조금 수정해서, 채팅 버튼 클릭 시에 채팅 버튼을 가리는 것이 아닌, 그 위로 채팅 컨테이너가 열리고 닫히도록 하는 방법도 괜찮을 것 같아서 이 방법도 고려해봐야 함
      - 채팅 컨테이너가 열릴 때, transition을 추가해서 좀 더 자연스럽게 열리도록 하는 부분도 필요함
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/ecb1553dcdee595ac0205d33716285df53470edf)

<br />

- 추가 및 해결 해야 할 내용
  - 커스텀 Hook에 대한 고려
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 백엔드의 user-router.js에서 accessToken, login/success, profile router에서 모두 accessToken 함수 내용을 재사용하고 있는데, 굳이 3개의 router로 나눌 필요가 있는 지 확인해보고 필요가 없다면 하나로 줄여줘야 함
    - 명확하게 하기 위해서 일단은 하나로 합치지 않고, 그대로 나눠서 사용하도록 유지
    - 내용이 엄청 많은 코드로 구성된 것이 아니기 때문에 현재로서는 크게 문제 없다고 생각되어 그대로 유지
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함

# 오늘 느낀 점

- socket과 관련된 내용을 구성하기 전에, 우선 화면에서 채팅 버튼이 보여지고 UI가 좀 어울리도록 구성을 해줬는데, 현재까지는 만족스럽게 구성이 된 것 같다. 채팅 버튼은 더 이상 수정할 필요는 없어보이고, 채팅 컨테이너는 조금 수정이 필요한데 여기서 채팅 컨테이너가 채팅 버튼을 가리도록 구성해놓은 상태인데, 이 내용을 수정해서 채팅 버튼 위에 열리도록 하는 방법을 고려중이다. 채팅 버튼을 클릭해서 채팅 컨테이너가 열리고, 채팅 버튼을 다시 클릭하면 채팅 컨테이너가 닫히도록 하는 방법도 괜찮아보이고, 현재 방법인 채팅 버튼 위에 덮어서 보여지는 방법도 괜찮아보여서 좀 고민을 해봐야 한다. 그리고 채팅 컨테이너 자체도 UI 수정이 필요하고 채팅 컨테이너에서 내용을 어떻게 구성할 것인지 좀 생각을 해봐야 하는데, 채팅을 사용자와 관리자 소통 창구로 이용할 것인지 또는 다른 사용자와 채팅하는 용도로 사용할지 또는 그냥 전체 사용자가 채팅을 입력하고 볼 수 있는 공간으로 사용할 지 고민을 해봐야 할 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
