# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 관리자 댓글, 관리자 답글 컴포넌트 수정 및 메인헤더, 관리자 메인헤더 CSS 수정 및 관리자 게시글 삭제 라우터 수정
    - 관리자 댓글, 답글 컴포넌트에서 관리자가 삭제 버튼을 클릭할 수 있게 조건부 내용을 삭제하고, 사용하지 않는 수정 버튼 내용과 CSS에서 사용하지 않는 내용을 삭제하고, 메인헤더와 관리자 메인헤더의 드롭다운 메뉴 CSS를 수정하고, 백엔드에서 관리자 게시글 삭제 라우터의 조건부 내용을 수정해주었다.
    - 백엔드 구성
      - 관리자 페이지의 게시글 삭제 라우터에서 게시글 삭제 시 댓글과 답글이 함께 삭제되는데 여기서 해당 게시글 삭제 시에 게시글에 저장된 이메일과 로그인한 사용자의 이메일을 확인하는 조건부를 삭제하고, 단순하게 게시글이 존재하는지 확인하고 존재한다면 해당 게시글 삭제 및 게시글에 저장된 댓글과 답글 모두 삭제되도록 구성
      - 확인을 위해 추가했던 console.log 내용도 삭제
    - 프론트엔드 구성
      - AdminComment, AdminReply
        - 댓글과 답글에 각각 저장된 이메일과 로그인한 사용자 이메일을 확인해서 일치할 때, 수정 및 삭제 버튼이 출력되도록 조건부를 구성했는데 이 조건부 내용을 삭제
          - 관리자는 특별한 조건없이 모든 사용자의 댓글과 답글을 삭제할 수 있는 권한을 주기 위해서, 조건부 내용을 삭제하고 삭제 버튼을 사용할 수 있도록 구성
        - 수정 버튼은 관리자 페이지에서 사용하지 않기 때문에 삭제
          - 삭제 버튼만 남겨놓도록 구성
    - CSS 구성
      - MainHeader, AdminMainHeader
        - padding-top을 1rem에서 0.5rem으로 수정
          - 드롭다운 메뉴 내부의 버튼 윗 공간이 조금 줄어들도록 구성해서 아랫 공간과 동일한 공간을 가지도록 구성
      - AdminComments, AdminComment
        - 주석 처리되어서 사용하지 않는 코드들을 모두 삭제
    - 테스트 결과, 관리자로 로그인하고 게시글 삭제 버튼을 클릭하면, 해당 게시글에 저장된 댓글과 답글 모두 삭제되는 것을 확인할 수 있었고, 드롭다운 메뉴의 버튼 공간이 이전보다 좀 더 자연스럽게 배치된 것을 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/87c9fb78c033dfde35c8c974d551e8dacdaf069f)

  <br />

  - 관리자 댓글 컴포넌트 수정 및 답글 목록, 답글, 관리자 답글 목록, 관리자 답글 컴포넌트 수정 및 게시판 라우터의 답글과 관련된 라우터 내용, 관리자 라우터의 답글과 관련된 라우터 내용 수정해주었다.
    - 관리자 댓글 컴포넌트의 useRouteLoaderData 내용을 수정해서 정상적으로 삭제가 이루어지도록 해주고 수정과 관련된 코드 삭제, 관리자 페이지의 답글과 관련된 컴포넌트에서 fetch 함수 경로를 수정해주고, 사용자 페이지의 답글과 관련된 컴포넌트에서도 fetch 함수 경로를 수정, 사용자 페이지의 답글 내용과 관련된 fetch 함수 경로를 수정해주면서 그에 따라서 백엔드에 구성된 엔드포인트 경로도 함께 수정, 관리자 페이지에서 댓글과 답글을 삭제할 수 있도록 delete router를 추가하고, 답글을 불러오는 get router의 엔드포인트 경로를 수정해주었다.
    - 백엔드 구성
      - admin-routes
        - 댓글 삭제 라우터를 활성화하고, 조건부를 수정
          - 조건부를 댓글에 저장된 이메일과 로그인한 이메일이 일치하도록 확인하는 내용에서 댓글이 존재하는지 확인하도록 변경
        - 답글을 가져오는 라우터 경로를 수정
          - 댓글 id와 답글 위치를 변경해서, 댓글 id가 먼저 경로에 포함되고 그 다음 답글 경로가 나오도록 수정
        - 답글 삭제 라우터를 추가하고, 조건부를 수정
          - 조건부를 답글에 저장된 이메일과 로그인한 이메일이 일치하도록 확인하는 내용에서 답글이 존재하는지 확인하도록 변경
      - board-routes
        - 답글을 가져오는 라우터 경로 수정
          - 댓글 id와 답글 위치를 변경해서, 댓글 id가 먼저 경로에 포함되고 그 다음 답글 경로가 나오도록 수정
        - 답글 삭제하는 라우터 경로 이름 변경
    - 프론트엔드 구성
      - AdminComment
        - 수정 토글 내용 삭제, useRouteLoaderData 내용 수정
      - AdminReplies, Replies
        - fetch 함수의 경로 순서 변경
      - AdminReply, Reply
        - replies에서 reply로 변경
    - 테스트 결과, 댓글 삭제시 답글도 함께 삭제되는 것을 확인할 수 있었고, 답글만 따로 삭제하는 것도 문제없이 작동되는 것을 확인할 수 있었다. 그리고 세부 페이지에서 삭제 버튼이 아닌, 다른 추가 버튼을 통해서 드롭다운 메뉴를 열고 삭제 버튼 클릭 시 게시글 삭제되는 것도 문제없이 작동되는 것을 확인할 수 있었따.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/c74daead2a63366c089b664dd0c52a5c2b6afb47)

<br />

- 추가 및 해결 해야 할 내용
  - 커스텀 Hook에 대한 고려
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 백엔드의 user-router.js에서 accessToken, login/success, profile router에서 모두 accessToken 함수 내용을 재사용하고 있는데, 굳이 3개의 router로 나눌 필요가 있는 지 확인해보고 필요가 없다면 하나로 줄여줘야 함
    - 명확하게 하기 위해서 일단은 하나로 합치지 않고, 그대로 나눠서 사용하도록 유지
    - 내용이 엄청 많은 코드로 구성된 것이 아니기 때문에 현재로서는 크게 문제 없다고 생각되어 그대로 유지
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함

# 오늘 느낀 점

- 게시글 삭제했을 때 댓글과 답글이 함께 삭제되는 내용, 댓글 삭제했을 때 답글이 함께 삭제되는 내용 그리고 게시글, 댓글, 답글 모두 각각 삭제되는 것까지 문제없이 작동되는 것을 확인했기 때문에 이제 관리자 페이지에서 사용하지 않는 코드를 조금 정리해주고, 관리자 페이지에서 모든 사용자의 정보를 가져오는 부분을 구현해봐야 한다. 사용자 정보를 가져오기만 하면 삭제하는 것은 크게 어려운 부분이 없다고 생각되기 때문에, 어떤식으로 사용자 정보를 가져와야 할 지 좀 생각해봐야 한다. 그리고 사용자 페이지에서 구성한 Chat 컴포넌트 내용을 관리자 페이지에서도 따로 추가해서 구성해주고, 이 두 개를 연결하는 것도 생각을 해봐야 하며 메인헤더의 드롭다운 메뉴를 따로 컴포넌트로 분리해서 메인헤더의 코드를 줄이는 것도 고려해봐야 한다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
