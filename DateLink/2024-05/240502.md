# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 게시글 세부 페이지의 드롭다운 메뉴 문제 수정 및 CSS 수정
    - 게시글 세부 페이지에서 사용하는 드롭다운 메뉴를 닫을 때, 드롭다운 버튼을 다시 클릭해서 닫는 것 외에, 추가로 드롭다운 버튼의 외부를 클릭해서 닫을 수 있도록 구성을 변경해주고, 드롭다운 메뉴의 UI 구성을 해주었다.
    - 프론트엔드 구성
      - dropdownButtonHandler 함수에 event.stopPropagation()를 추가
        - event.stopPropagation()를 추가함으로써, 현재 요소에서 이벤트가 발생했을 때, 해당 요소의 부모 요소나 더 상위의 요소로 이벤트가 전달되는 것을 막는다.
        - event.stopPropagation()는 아이콘을 클릭할 때 발생하는 이벤트가 아이콘을 감싸고 있는 상위 요소로 계속 전파되는 것을 방지하는 역할을 한다.
        - event.stopPropagation()을 호출하면 현재 이벤트가 현재 요소에서만 처리되고 상위 요소로 전파되지 않음
        - event.stopPropagation()는 이벤트 버블링을 막는 역할을 함, 이 메서드가 호출된 요소의 이벤트만 실행되고 상위 요소로의 이벤트 전파는 막히게 된다.
    - CSS 구성
      - 드롭다운 메뉴의 a 태그와 버튼
        - flex, 수평을 맞춰주고, 글씨 크기 조정, 높이 설정으로 적절한 크기 조절
        - padding을 추가해서, 세로의 길이는 조금 짧게 구성하고 가로는 조금 더 길게 구성
        - a 태그의 밑줄, button의 배경이 보이지 않도록 구성
        - 커서를 올렸을 때, 포인터가 뜨도록 구성
        - 드롭다운 메뉴의 버튼이 hover 되었을 때, 텍스트와 배경의 색이 변경되도록 구성
          - 이 부분은 다시 확인해본 결과, 다크 모드를 구성해놓은 상태라서 추가 수정이 필요함
    - 테스트 결과, 드롭다운 메뉴 버튼으로 드롭다운 메뉴를 열고 닫는 것이 문제없이 작동하며, 드롭다운 메뉴를 열고 다른 외부 공간을 클릭했을 때 문제없이 드롭다운 메뉴가 닫히는 것을 확인할 수 있었다. UI도 수정되어서 좀 더 보기 편해졌지만, 라이트 모드나 다크 모드 색 관련 내용이 아직 부족하기 때문에 수정이 추가로 필요하다.
      - event.stopPropagation()를 사용함으로써, 이벤트 전파를 막고 아이콘 버튼을 클릭했을 때 드롭다운 메뉴가 열리고, 다른 곳을 클릭했을 때는 드롭다운 메뉴가 닫히도록 해줄 수 있다. 그리고 event.stopPropagation()를 사용하면, 별도의 z-index 설정이나 다른 복잡한 처리 없이도 다른 곳 클릭으로 닫히도록 하는 기능을 구현할 수 있다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/f3a06a30d13446cfb68b078cd867b4008ccc7b83)

  <br />

  - event.stopPropagation()에 대한 추가 설명
    - event.stopPropagation() 코드가 없는 상황에서, 아이콘 버튼 클릭 시 드롭다운 메뉴가 열리는 이벤트가 작동하지않고, 백그라운드에서 드롭다운 닫는 이벤트만 작동되는 문제가 발생
      - event.stopPropagation() 메서드를 아이콘 버튼 이벤트 핸들러 함수에 추가해서 아이콘 버튼 클릭 시 드롭다운 메뉴를 열고 닫을 수 있게 되었으며, 드롭다운 외부를 클릭했을 때 드롭다운 메뉴를 닫을 수 있게되며 문제가 해결됨
    - 문제 해결에 따른 event.stopPropagation() 내용 추가 정리
      - 아이콘 버튼에 event.stopPropagation()가 추가되면, 아이콘을 클릭할 때 아이콘에 할당된 이벤트만 실행되고 부모 요소로의 이벤트 전파가 막힌다.
        - 이는 아이콘 버튼을 클릭했을 때 해당 아이콘에 할당된 이벤트만 실행되므로, 드롭다운 메뉴가 열리게 됨
      - 이와 반대로 백그라운드 같은 상위 요소에는 event.stopPropagation()이 없으므로, 해당 요소를 클릭하면 이벤트가 상위 요소로 전파되어 부모 요소의 이벤트도 함께 실행됨
        - 이는 백그라운드를 클릭했을 때, dropdownClose 함수가 실행되어 드롭다운 메뉴가 닫히게 된다.
      - 즉, event.stopPropagation()이 호출된 아이콘 버튼에서는 해당 이벤트만 실행되고 전파가 막히므로, 드롭다운 메뉴를 열기 위한 아이콘 클릭 이벤트만 작동하게 된다.

<br />

- 추가 및 해결 해야 할 내용
  - 커스텀 Hook에 대한 고려
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 백엔드의 user-router.js에서 accessToken, login/success, profile router에서 모두 accessToken 함수 내용을 재사용하고 있는데, 굳이 3개의 router로 나눌 필요가 있는 지 확인해보고 필요가 없다면 하나로 줄여줘야 함
    - 명확하게 하기 위해서 일단은 하나로 합치지 않고, 그대로 나눠서 사용하도록 유지
    - 내용이 엄청 많은 코드로 구성된 것이 아니기 때문에 현재로서는 크게 문제 없다고 생각되어 그대로 유지
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함

# 오늘 느낀 점

- 게시글 세부 페이지의 드롭다운 메뉴를 이제는 드롭다운 메뉴 버튼만으로 닫는 것이 아닌, 드롭다운 메뉴 버튼의 외부 공간을 클릭해서 닫을 수 있게 해주면서 UX가 더 향상되었다고 생각이 된다. UI도 수정을 해주면서 이전보다 훨씬 깔끔해진 드롭다운 메뉴가 되었지만, 라이트 모드와 다크 모드일 때 색이 다르게 구성해주지 않아서 추가 수정이 필요하다. 그리고 현재는 로그인하지 않은 사용자, 게시글 수정 권한이 없는 사용자도 해당 게시글의 드롭다운 메뉴를 열고 수정하기 또는 삭제하기 버튼을 클릭할 수 있게 되어있기 때문에 이 부분을 처리해줘야 한다. 권한이 없는 사용자는 드롭다운 메뉴 버튼을 클릭할 수 없게 opacity class 내용이 추가되도록 해주면 될 것 같은데, 이 내용은 예전에 게시글 세부 페이지에서 수정 및 삭제 버튼 구성할 때 처리해준 내용이 중복되기 때문에 이 내용을 활용하면 될 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
