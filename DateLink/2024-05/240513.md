# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 게시글 form CSS 수정 및 모달 위치 수정
    - 게시글 form에서 사용되는 CSS 내용을 수정하고 백그라운드에 반응형 추가, 모달 위치가 살짝 위에 위치하도록 구성, 메인헤더의 드롭다운 메뉴는 다시 hover되었을 때 나오도록 변경해주고, 게시글 세부 페이지 버튼에 다시 opacity class가 적용되면서 비로그인 상태에서 클릭할 수 없도록 구성
    - CSS 구성
      - Modal.css
        - 회원가입, 로그인 모달의 top 위치 수정
      - MainHeader.css
        - display를 다시 none으로 변경해서, hover되었을 때 드롭다운 메뉴가 열리도록 변경
      - PostDetails.css
        - pointer-events: none 속성을 다시 활성화해서, 비로그인 상태에서 게시글 세부 페이지의 버튼을 클릭하지 못하도록 수정
      - PostForm.css
        - form의 label 내용 삭제, input에서 focus 되었을 때 placeholder 내용 색이 변경되도록 구성
        - textarea의 중복되는 background-color: transparent 내용 삭제
        - @media를 추가해서, 작은 화면에서는 overflow가 hidden이 아닌, auto로 적용되도록 구성
          - 여기서 max-width를 지정했는데, 다시 생각해보니 높이를 조절해야 할 것 같아서 max-height로 수정해줘야 한다.
    - 테스트 결과, 왼쪽의 모니터에서는 게시글 추가 및 수정 페이지에서 짤리는 부분이 없이 한눈에 모든 내용이 들어오고, 오른쪽의 모니터에서는 원래 아래 버튼이 짤렸지만 이제 스크롤이 생기면서 내용을 작성하고 버튼을 클릭할 수 있게 되었다.
      - 메인헤더의 드롭다운 메뉴는 원래대로 마우스를 올려야 열리도록 구성되었고, 게시글 세부 페이지의 버튼들도 비로그인 상태에서는 클릭할 수 없도록 변경된 것을 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/af2008c5608a2d4ea97264a22638a647dc0755d9)

  <br />

  - 실시간 채팅 구현
    - socket.io를 사용해서 구현 예정
    - 채팅의 실제 메시지 데이터는 DB를 통해서 저장하고, socket.io는 실시간 통신을 담당
      - 메시지는 mongodb를 통해 저장
      - socket.io는 메시지를 전달하고 클라이언트 간의 상호작용을 처리하는데 사용
      - socket.io는 실시간 통신에 초점을 맞추고, 메시지의 저장 및 관리는 DB 같은 외부 시스템에 의존하도록 구성
      - socket.io와 DB를 결합해서 완전한 실시간 애플리케이션을 구축하는 것이 목표
    - DB를 사용하여 메시지를 저장하고 클라이언트에 전달하는데, socket.io가 왜 필요한가?
      - 실시간 업데이트
        - DB를 사용하여 메시지를 저장하고 클라이언트에 전달할 수 있지만, 주기적인 폴링 또는 긴 폴링과 같은 방식으로 이루어질 수 있다.
        - 이 방식은 서버에 부하를 주고, 실시간성이 낮을 수 있기 떄문에 socket.io를 사용하면 실시간으로 새로운 메시지를 클라이언트로 전송할 수 있어서 실시간성을 높일 수 있다.
      - 실시간 상호작용
        - socket.io는 클라이언트와 서버 간에 실시간으로 상호 작용할 수 있는 기능을 제공
        - 실시간 채팅뿐만 아니라 실시간 게임, 실시간 협업 애플리케이션 등을 쉽게 구현할 수 있음
      - 룸 및 네임스페이스
        - 클라이언트를 그룹으로 관리할 수 있는 기능을 제공
        - 특정 채널이나, 그룹에 속한 클라이언트에게만 메시지를 보낼 수 있음
        - 대표적인 예로, Discord 같은 애플리케이션을 생각해보면 됨
    - 내용을 종합해보면, 메시지 데이터는 DB를 통해서 저장한다고 하지만, socket.io는 클라이언트와 서버 간에 실시간으로 상호 작용을 하는데 도움이 되고, socket.io는 상호 작용을 할 때, 부하를 줄이고 실시간성을 높여서 더 효율적으로 상호 작용이 가능하게 해줄 수 있다.
      - useEffect로 채팅 데이터를 가져오고, 화면을 업데이트할 수는 있지만, 이 방식은 주기적인 폴링이나 긴 폴링과 같은 방식으로 작동하기 때문에 서버에 부하를 줄 수 있고 실시간성을 보장하기 어렵다.
      - socket.io를 사용해서, 실시간으로 채팅 메시지를 받아 채팅 메시지가 서버에 도착하면 즉시 클라이언트로 전달되어 화면을 업데이트할 수 있다. 실시간성을 보장하고 서버 부하를 줄이는데 효과적이다.
      - 실시간 채팅과 같은 기능을 구현할 때는 일반적으로 socket.io와 같은 실시간 통신 라이브러리를 사용하는 것이 더 좋은 선택일 수 있고, 더 나은 UX를 제공할 수 있다.
      - 더 좋은 방향으로 생각해보면 useEffect를 대신해서 사용할 수 있을 것 같다는 생각도 든다.

<br />

- 추가 및 해결 해야 할 내용
  - 커스텀 Hook에 대한 고려
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 백엔드의 user-router.js에서 accessToken, login/success, profile router에서 모두 accessToken 함수 내용을 재사용하고 있는데, 굳이 3개의 router로 나눌 필요가 있는 지 확인해보고 필요가 없다면 하나로 줄여줘야 함
    - 명확하게 하기 위해서 일단은 하나로 합치지 않고, 그대로 나눠서 사용하도록 유지
    - 내용이 엄청 많은 코드로 구성된 것이 아니기 때문에 현재로서는 크게 문제 없다고 생각되어 그대로 유지
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함

# 오늘 느낀 점

- 전체적인 UI 수정은 이제 마무리가 된 것 같고, 여기에 마지막 기능 추가로 실시간 채팅을 구현할 생각인데, 예전에 실시간 채팅 구현과 관련된 내용을 찾을 때 봤었던 socket.io에 대한 정보를 추가적으로 찾아본 후에 socket.io의 이점을 좀 정리하고 어떤식으로 사용되는지, 왜 필요한지 정리를 해놓았다. 정리한 내용을 다시 보고 생각해본 결과, useEffect 대신에 사용할 수 있을 것 같다는 생각도 들었고, 굳이 useEffect를 대체하지 않더라도 실시간 채팅은 상호작용이 좀 더 원활하게 이루어져야 하고, 서버에 부하를 주면 안되기 때문에 socket.io 라이브러리를 사용해서 차근차근 구현을 해볼 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
