# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 게시글 세부 페이지의 삭제 버튼에 예외 처리 추가
    - 게시글 세부 페이지의 버튼들은 권한이 없는 경우, opacity class를 통해서 클릭할 수 없도록 구성이 되어있는데, 수정 버튼은 강제로 클릭해도 문제가 없도록 모든 예외 처리가 되어있지만, 삭제 버튼의 경우 opacity class에만 의존하고 제대로 예외 처리가 되어있지 않기 때문에 이 부분에 대한 예외 처리를 추가해주었다.
    - 프론트엔드 구성
      - PostDetailPage 컴포넌트
        - action 함수가 실행될 때, 정상적인 응답이 넘어오지 않는다면 redirect를 통해서 "/no-access" 경로로 이동하도록 구성
      - main.jsx
        - "/no-access" 경로로 들어온다면, 에러 메시지를 전달하는 Authentication 컴포넌트 내용이 보여지도록 구성
    - 테스트 결과, 비로그인 상태에서 강제로 삭제 버튼을 클릭하면 "/no-access" 경로로 이동되며, 에러 메시지를 전달하는 Authentication 컴포넌트 내용이 문제없이 보여지는 것을 확인할 수 있었다.
      - 비로그인 상태에서의 에러 메시지는 문제없이 전달되고 있지만, 로그인을 하고 해당 게시글의 작성자가 아닌 경우의 예외 처리는 해결되지 않았기 때문에 이 부분에 대한 처리를 해줘야 한다.
      - Authentication 컴포넌트에서 내용을 변경해야 하는데, 첫번째로 로그인 유무를 판단하고 두번째로 게시글에 저장된 이메일과 로그인한 사용자의 이메일이 일치하는지 확인해서 그에 따른 예외 처리가 필요할 것 같다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/4e3677448721c265c10e6aa6b7b2751eac1ab6fd)

<br />

- 추가 및 해결 해야 할 내용
  - 커스텀 Hook에 대한 고려
    - Context API를 사용하는 것은 좋지만, 이 내용을 사용하려는 파일에서 하나하나 추가해서 사용하기 때문에 커스텀 Hook을 구성해서 재사용할 수 있도록 해줄 필요가 있음
  - 백엔드의 user-router.js에서 accessToken, login/success, profile router에서 모두 accessToken 함수 내용을 재사용하고 있는데, 굳이 3개의 router로 나눌 필요가 있는 지 확인해보고 필요가 없다면 하나로 줄여줘야 함
    - 명확하게 하기 위해서 일단은 하나로 합치지 않고, 그대로 나눠서 사용하도록 유지
    - 내용이 엄청 많은 코드로 구성된 것이 아니기 때문에 현재로서는 크게 문제 없다고 생각되어 그대로 유지
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함

# 오늘 느낀 점

- 게시글 세부 페이지의 삭제 버튼은 권한 여부에 따라, opacity class가 추가되도록 구성되어 있는데 이 부분은 보안적인 측면에서 불안정하기 때문에 추가적인 예외 처리를 통해서 보안을 강화해주려고 생각했다. 삭제 버튼이 강제로 클릭되었을 때 URL을 이동시키지 않고 해당 페이지에서 Authentication 컴포넌트의 내용이 보여지도록 구성해보려고 했으나, 여러 방법을 시도해도 action 함수 사용으로 인해 원하는 동작이 이루어 지지않기 때문에 URL을 이동시켜서 Authentication 컴포넌트의 내용인 에러 메시지가 보여지도록 구성해주었다. 아직 비로그인 상태만 예외 처리가 되어있고 권한이 없는 상태는 처리가 되지 않았기 때문에 이 부분에 대한 예외 처리를 추가해줘야 한다. 그리고 수정과 관련된 예외 처리는 URL을 이동시켜서 Authentication 컴포넌트 내용을 보여주는 것이 아닌, 해당 페이지에서 보호되는 라우트를 통해서 Authentication 컴포넌트를 보여주는 방식인데, 이 방식을 변경해서 삭제의 예외 처리와 동일하게 URL을 이동시켜서 보여지도록 구성해야 하는지 또는 그대로 보호되는 라우트 구성을 유지해도 되는지 생각을 해봐야 한다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
