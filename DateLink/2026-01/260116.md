# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 사용자 프로필에서 친구된 기간 정보 전달 및 사용자 프로필 세부 내용에서 친구된 기간 정보, 함께 아는 친구 아바타 출력 및 타입 정의 수정, 코드 정리
  - 사용자 프로필에서 친구 목록 정보와 사용자 ID, 클릭한 사용자 ID 정보를 확인해 친구된 기간 정보를 모달 데이터에 저장하도록 구성하고, 사용자 프로필 세부 내용에서 친구된 기간 정보를 불러와 출력하고, 아바타 컴포넌트를 재사용해 함께 아는 친구 아바타가 출력될 수 있도록 구성, 친구된 기간 정보 관련 타입 정의 수정과 주석 처리된 내용을 삭제해 코드 정리
  - 프론트엔드
    - DirectChatPanel
      - JSX 코드 내용 수정
        - 함께 아는 친구 목록에서 주석 처리된 내용 삭제
    - UserProfile
      - friendSince useMemo 수정
        - friendSinceDateStr 변수 추가
          - 친구 목록에 find를 사용하도록 구성
          - requester.id와 사용자 ID가 일치하는지 확인하고 receiver.id와 클릭한 사용자 ID가 일치하는지 확인
          - 반대로 requester.id와 클릭한 사용자 ID가 일치하는지 확인하고 receiver.id와 사용자 ID가 일치하는지 확인
          - 일치하는지 확인한 정보에 `.date`를 사용해 날짜 데이터로 변환
        - friendSinceDateStr 변수 내용이 유효한지 확인하는 조건부 추가
        - 공백 단위로 나누는 내용 추가
          - friendSinceDate에 저장하도록 구성
          - friendSinceDateStr 내용에 split을 사용해 공백 단위로 나누도록 구성
        - "." 단위로 나누는 내용 추가
          - year, month, day에 저장하도록 구성
          - friendSinceDate 내용에 split을 사용해 "." 단위로 나누도록 구성
          - ex) 2025 10 19 날짜가 각각 year, month, day로 저장
        - 나눈 날짜에 년, 월, 일을 붙이도록 구성
          - 나눈 날짜에서 year는 년, month는 월, day는 일을 붙여 반환하도록 구성
          - ex) 2025년 10월 19일
        - 의존성 배열로 친구 목록, 사용자 ID, 클릭한 사용자 ID를 확인하도록 구성
      - userProfileDetailsHandler 함수 수정
        - onOpenUserProfileDetails props 내용에 friendSince 내용을 추가로 함께 전달하도록 수정
    - UserProfileDetails
      - JSX 코드 내용 수정
        - 친구가 된 날짜 출력하는 공간 수정
          - "modalData.friendSince"를 확인해 존재할 경우
            - 아이콘과 함께 친구 시작일 텍스트가 보여지도록 구성
            - "modalData.friendSince"를 구성해 친구 시작일 데이터 출력
          - "modalData.friendSince"를 확인해 존재하지 않을 경우
            - 친구가 아닌 사용자라는 텍스트가 보여지도록 구성
        - 친구가 된 날짜 데이터 유무에 따라 달라지는 메시지 버튼 영역 수정
          - 친구가 된 날짜 데이터가 존재하면, 메시지 버튼이 앞에 보여지며 그 옆에 친구를 확인하는 아이콘이 보여지도록 구성
            - 현재 친구 확인 아이콘이 구성되지 않고 텍스트로 구성
          - 친구가 된 날짜 데이터가 존재하지 않으면, 친구 추가하는 아이콘 버튼이 먼저 보여지고 그 옆에 메시지 버튼이 보여지도록 구성
            - 현재 친구 추가 아이콘과 버튼은 구성되지 않고 텍스트로 구성
        - 같이 아는 친구, 같이 있는 그룹 채팅방 영역에 주석 처리된 내용 모두 삭제
        - 같이 아는 친구 목록 출력 영역 수정
          - 아바타 컴포넌트를 재사용해 친구 아바타가 보여지도록 구성
            - 아바타 컴포넌트에 nickname, avatarImageUrl, avatarColor, onlineChecked, showOnlineDot props를 전달하도록 구성
          - 아바타 컴포넌트가 아닌, 자체적으로 구성하는 내용도 테스트를 위해 추가
            - 아바타 이미지 URL 내용을 확인해 존재하면 이미지 출력, 존재하지 않으면 아바타 색을 출력하도록 구성
            - 온라인 유무를 확인해 점으로 표시되도록 구성
            - 해당 내용은 현재 주석 처리
        - 주석 처리된 내용들 모두 삭제
  - CSS
    - UserProfileDetails
      - 주석 처리된 내용들 모두 삭제
        - 나중을 위해 필요한 내용은 약간 남겨놓음
  - 사용자 프로필 세부 내용에 친구된 기간 정보를 출력하기위해 사용자 프로필에 관련 함수를 추가하고 해당 내용을 모달 데이터에 저장해 사용자 프로필 세부 내용에서 불러와 출력하고, 아바타 컴포넌트를 재사용해 함께 아는 친구 아바타도 출력될 수 있도록 구성을 해주었으며, 친구된 기간 정보 관련해 타입 에러가 발생해 해당 문제를 해결하기 위해 타입 정의 수정 및 주석 처리되어 사용하지 않는 내용을 삭제해 확인한 결과, 친구된 기간 정보를 저장해 불러오는 내용 또한 문제없이 출력되는 것을 확인했고, 타입 에러 또한 처리되어 문제가 없는 것을 확인했으며, 사용자 프로필 세부 내용에서 같이 아는 친구 아바타 정보가 출력되어 보여지는 것을 확인할 수 있었다.
    - 사용자 프로필 세부 내용에서 친구된 기간 또는 친구가 아님을 출력하고 있는데, 해당 내용이 좀 더 자연스럽게 보이도록 CSS 수정이 필요함
    - 사용자 프로필 세부 내용에서 해당 사용자가 친구라면 메시지 버튼이 먼저 보여지고 그 다음 친구라는 표시의 버튼이 보여지도록 구성해야 하고, 친구가 아닐 경우 친구 추가 버튼이 먼저 보여진 뒤 그 다음 메시지 버튼이 보여지도록 구성해야 함
    - 사용자 프로필 세부 내용의 친구 아바타 관련 CSS가 아직 미세 조정이 되지 않았기 때문에 추가 확인이 필요하고, 같이 참여한 채팅방 아이콘 관련 CSS도 구성되지 않은 상태이므로 추가 필요
    - 사용자 프로필 세부 내용에서 같이 아는 친구와 같이 참여한 채팅방 목록이 보여지는 공간에서 친구 아바타와 채팅방 아이콘이 보여지도록 구성 필요
    - 사용자 프로필에서 메시지 전송 후 다이렉트 채팅방으로 이동하는 내용 추가할 지 고민 단계
    - 다이렉트 채팅방 목록, 그룹 채팅방 내의 사용자 목록, 사용자 정보가 보여지는 아바타 내용에서 테두리 두께 설정 확인 필요
    - 로그인, 회원가입 페이지 배경에 사용되는 여러 이미지를 더 추가해 테스트해봐야 함
    - 해야 할 일에 정리된 내용 처리 필요
    - 다이렉트 채팅방 순서가 변경될 때 부드럽게 변경되는 기능
    - 그룹 채팅방 위치를 자유롭게 변경하는 기능
    - 그룹 채팅방 우클릭 시에 보여지는 컨텍스트 메뉴 CSS 수정 필요 (위치, UI 등)
    - 다크 모드 및 라이트 모드 관련 내용
    - 화면 투명도 관련 내용
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/b184713674bed064c26d374825a72b4e6c9b9dc6)

# 오늘 느낀 점

- 사용자 프로필에서 친구된 기간 정보를 모달 데이터에 전달해 저장하고, 해당 내용을 사용자 프로필 세부 내용에서 불러와 출력하는 것까지는 모두 문제없이 처리되었지만, 아직 CSS 내용이 구성되지 않아서 자연스럽지 못한 상태로 보여지고 있으므로 이와 관련해 수정을 해줘야 하고, 친구인 사용자는 메시지 버튼이 먼저 보여진 뒤 그 옆에 친구 확인을 위한 아이콘이 보여지도록 구성할 생각이며, 친구가 아닌 사용자는 친구 추가 아이콘 버튼이 먼저 보여지고 그 옆에 메시지 버튼이 보여지도록 구성할 생각이다. 그리고 같이 아는 친구 목록에서 아바타가 문제없이 보여지고 있지만 아바타와 닉네임이 같은 줄로 보여지고 있지 않으며 아바타 크기도 조금 자연스럽지 못한 것 같다는 생각이 들어서 해당 내용 또한 추가 수정을 해줄 생각이고, 같이 참여한 채팅방 목록은 아직 아이콘이 보이지 않아 허전한 상태이기 때문에 해당 내용 또한 추가해 자연스럽게 보이도록 구성할 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

- 다크 모드 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
