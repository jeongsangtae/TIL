# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 게시글 삭제 action 함수 로직 수정
    - 기존의 게시글 삭제 로직에서 action 함수로 구성을 변경하고 게시글 삭제 로직을 구성
    - 이전에 테스트 해보았을 때는 정상적으로 작동하지 않았으나, 코드를 수정해서 정상적으로 기능하도록 수정
      - useSubmit hook을 사용하고, submit에 method 부분에 delete를 넣어서 action 함수가 작동했을 때, delete method가 들어가 작동하도록 구성
        - submit에 2개의 인자가 들어가는데, 첫 번째 인자에는 null을 입력하고 두 번째 인자인 method에 delete를 넣어준다.
        - `submit(null, { method: "delete" });`
      - 기존의 action 함수에서 method 부분을 "DELETE" 이렇게 설정한 내용을 `request.method`로 변경하고 body, headers 부분은 삭제
        - method를 미리 설정해놓는 것이 아닌, submit으로 제출된 정보를 바탕으로 내용이 들어오도록 구성
      - redirect hook을 사용해서, 게시글 삭제가 된 후에 게시글 목록 페이지로 이동하도록 구성
    - 테스트해본 결과 정상적으로 게시글이 삭제되고, 백엔드에서도 삭제되는 것을 확인할 수 있었다.
      - 중간 번호에 있는 게시글을 삭제해도 그 뒤에 있는 게시글의 번호가 1씩 줄어들면서 비어있는 번호가 없도록 구성되는 것도 확인 했다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/5c9a4c46f4b8b428c937bd2338585ffea710a472)

<br />

- 추가 및 해결 해야 할 내용
  - 회원가입 form에서 잘못된 입력을 제출 했을 때, session에 데이터가 저장되는데, 기존의 session 데이터에서 업데이트되는 방식이 아닌 매번 제출할 때마다 새로운 session이 추가되고 있기 때문에 백엔드 코드에서 수정이 필요하다.
    - 계속 원인을 찾아보려고 이것저것 시도해보았지만 아직 어떤 코드가 정확히 원인인지 찾지 못해서 하나씩 천천히 테스트가 필요함
    - 일단 이걸 테스트 해보기전에 먼저 정상적으로 세션 만료가 되는지 확인해보았는데 정상적으로 세션 만료가 되기 때문에, 로그인을 먼저 구성해보고 정상적으로 로그인이 되는지 확인을 해보고 안된다면, session에 저장되는 부분을 다시 확인해봐야 할 것 같다는 생각
  - 로그인 후에, 새로고침 시 로그아웃 되어버리는 상황도 수정을 해야 함
    - 현재 로그인 한 후에, useEffect를 통해서 데이터를 확인하고 토큰이 유효하다면 정상적으로 로그인 유지는 되지만, 새로고침 시 깜빡거리면서 메인헤더가 변경되는 것이 보이기 때문에 이 부분을 수정할 수 있으면 수정할 생각이다.
  - 로그인을 유지하고 있을 때, token이 만료 시간에 가까워지면 자동으로 갱신되는 로직을 추가 해야 함
    - 대충 구성만 되어 있는 상태로, 좀 더 자세한 코드와 테스트가 필요함

# 오늘 느낀 점

- 기존의 게시글 삭제 로직에서 action 함수를 사용해서 게시글 삭제하는 로직으로 변경하는 것이 생각보다 쉽게 해결되지 못했다. 코드를 구성하고 action 함수를 어떻게 실행시켜야 하는지 이 부분에서 어려움을 겪었던 것 같다. action 함수를 구성하는 것은 간단하게 구성을 했기 때문에 그 이후에 action 함수를 실행하는 부분 또한 쉽게 해결이 될 것 같았지만, 생각보다 간단하지 못했고 일반 함수로 action 함수를 실행하는 것은 제대로 작동하지 않아서, 어떻게 실행시켜야 하는지 많은 고민을 하고 찾아본 결과 useSubmit hook을 사용해서 실행할 수 있었다. 정상적으로 코드가 작동하는 것을 확인하기 전까지 정말 많은 코드를 테스트해봤는데, 막상 깃허브에 올라간 코드는 정말 별 내용이 없는 것 같아서 허탈하다는 생각도 했지만 그래도 또 하나 해결을 했다는 생각이 들어서 뿌듯하다는 생각도 든다.

- 다음으로 해야 할 작업을 고민해보았는데, 첫 번째는 사용자가 로그인을 하고 인증되었을 때 사용할 수 있는 게시판 기능들을 분리하는 내용, 두 번째는 댓글 기능을 추가 이렇게 두 가지 작업을 생각했는데 이 중에서 어떤 걸 우선으로 해야 할 지 생각을 좀 해봐야 한다. 추가로 프로필 부분도 로그인 했을 때 사용자의 이름이 보이도록 구성은 했지만, 아직 로그인한 사용자의 게시글이 따로 보여지지 않기 때문에 이 내용도 추가가 필요하다고 생각이 된다. 현재 생각한 구성 순서로는 댓글 기능을 먼저 추가하고, 이후에 로그인 했을 때만 게시글 작성, 수정, 삭제 그리고 댓글 작성, 수정, 삭제가 될 수 있도록 해주고 로그인하고 게시글을 작성했을 때 구분할 수 있도록 사용자 이름이나 이메일이 따로 함께 추가되도록 구성해서 프로필 페이지에서 사용자 본인이 작성한 게시글을 따로 모아서 볼 수 있도록 해줄 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
