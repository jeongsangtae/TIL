# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 채팅 메시지 날짜 출력하는 내용 수정 (어제, 오늘 출력 관련 조건부 추가) 및 채팅 메시지 날짜 CSS 추가
  - 채팅 메시지 날짜를 출력하는 부분을 수정해 어제 추가된 메시지는 어제 추가되었다는 텍스트와 시간이 보여지도록 구성하고, 오늘 추가된 메시지는 별도의 날짜없이 시간만 출력이 되도록 구성해 주고, 채팅 메시지 날짜 크기를 줄이기 위해 CSS를 추가
  - 프론트엔드
    - Chat
      - now 변수 추가
        - 현재 날짜 정보를 가져오는 내용 추가
        - 비교 기준인 현재 날짜를 가져와 props로 전달받은 날짜 데이터가 어제인지 오늘인지 판단해야 함
        - `const now = new Date()`
      - msgDate 변수 추가
        - 채팅 메시지의 날짜를 기반으로 Date 객체 생성
        - 월은 0부터 시작하기 때문에 -1을 포함
        - `const msgDate = new Date(parseInt(year), numMonth - 1, numDay)`
      - today 변수 추가
        - 오늘 날짜 기준의 Date 객체 생성
        - `const today = new Date(now.getFullYear(), now.getMonth(), now.getDate())`
      - yesterday 변수 추가
        - 어제 날짜 기준의 Date 객체 생성
        - today 객체를 복사해서 날짜만 하루 전으로 수정
        - `const yesterday = new Date(today)`
        - `yesterday.setDate(today.getDate() - 1)`
      - todayChecked, yesterdayChecked 변수 추가
        - 날짜 조건 체크하는 내용으로, 메시지 날짜가 오늘 또는 어제인지 확인
        - `const todayChecked = msgDate.getTime() === today.getTime()`
        - `const yesterdayChecked = msgDate.getTime() === yesterday.getTime()`
      - resultDate 변수 수정
        - 포맷된 날짜 결과를 담는 변수
        - `let resultDate = ""`
      - 조건에 따라 날짜 출력 형식을 변경하는 조건문 추가
        - todayChecked가 true일 경우
          - 오늘이기 때문에 오전/오후, 시간, 분만 표기
        - todayChecked가 false일 경우
          - else if문으로 이동
        - yesterdayChecked가 true일 경우
          - 어제이기 때문에 어제 오전/오후, 시간, 분 표기
        - yesterdayChecked가 false일 경우
          - else 문으로 이동
        - 오늘과 어제가 아닐 경우
          - 날짜 전체를 표기
      - JSX 코드 내용 수정
        - 날짜를 출력하는 부분을 span으로 변경 및 채팅 메시지 옆에 보이도록 구성
  - CSS
    - Chat
      - 날짜 부분 크기 조절을 위해 폰트 사이즈를 추가
      - 색은 회색으로 수정
  - 채팅 메시지가 어제 추가된 내용이라면 오전/오후, 시, 분 앞에 어제가 붙어서 구분되도록 구성하고, 오늘 추가된 메시지일 경우 오전/오후, 시, 분 내용만 보이도록 구성해 테스트한 결과, 현재는 모두 정상적으로 적용되어 어제 추가된 채팅 메시지와 오늘 추가된 채팅 메시지 그리고 이전에 추가된 채팅 메시지가 구분되는 것을 확인할 수 있었다.
    - 채팅 메시지 옆에 날짜가 출력되는 것도 문제가 없고, 크기도 줄여서 이전보다 UI도 더 편해짐
    - 채팅 메시지를 날짜별로 구분하는 내용에 선을 아직 추가하지 않아서, UI가 조금 아쉬운데 이 내용은 다른 레이아웃이나 전체적인 틀을 잡고 난 후에 위치를 맞춰서 추가할 생각임
    - 레이아웃 관련 CSS를 추가해 전체적인 틀을 잡아줘야 다른 CSS 내용 구성하기에도 더 편하다고 생각되어, 전체적인 틀 관련 CSS를 우선 추가해야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/629e0100a5de64ade285d6ec1f71467b47f1b90e)

<br />

- 루트 레이아웃 구조 수정 및 레이아웃 컴포넌트, CSS 추가 및 사이드바 구조 수정, CSS 추가 및 그룹 채팅방 세부 페이지, 사용자 목록 CSS 추가
  - 전체적인 CSS 내용을 추가하기 위해 루트 레이아웃 구조를 수정하고, 별도의 레이아웃 컴포넌트 추가 그리고 사이드바 구조도 수정해 주었고, 사이드바 내용이 왼쪽에 고정되도록 CSS를 추가하고, 다른 내용이 사이드바 옆으로 보여질 수 있도록 CSS 내용을 추가
  - 프론트엔드
    - RootLayout
      - 사이드바, 알림 관련 컴포넌트 내용을 레이아웃 컴포넌트로 이동
      - 홈으로 이동하는 버튼 내용은 레이아웃 컴포넌트에 props로 전달되도록 구성
    - Layout
      - props 내용인 children, onLeaveGroupChat 내용에 관한 타입 정의 추가
        - children은 ReactNode로 타입 정의
        - onLeaveGroupChat은 일반 함수로 타입 정의
      - 사이드바, 알림 관련 컴포넌트 내용을 추가
      - children을 추가해 래퍼 형식으로 사용되도록 구성
      - 레이아웃 컴포넌트 전체에 적용되는 layout className 추가
      - children 내용이 사용되는 내용에 main-content className 추가
    - SideBar
      - props로 전달받은 onLeaveGroupChat 내용에 대한 타입 정의 추가
        - 일반 함수로 타입 정의
      - 사이드바 컴포넌트 전체에 적용되는 sidebar className 추가
      - 홈으로 이동되는 버튼을 사이드바 컴포넌트에 구성
      - 사용자 이름과 로그아웃 버튼은 맨 아래쪽으로 옮기고, 묶어서 user-info className으로 구성
        - 로그인 유무를 확인하도록 isLoggedIn을 조건부로 사용
    - GroupChatDetails
      - 전체 내용에 사용되는 group-chat-details className 추가
      - 사이드바와 그룹 채팅방 세부 페이지 사이에 사용자 목록과 친구 초대 버튼 내용이 그룹 채팅방 사이드바로 보이도록 group-chat-sidebar className 추가
      - 채팅 관련 내용을 하나로 묶어서 group-chat-content className 추가
    - GroupChatUser
      - 그룹 채팅방 세부 페이지에서 사용자 목록이 보여지는 부분에 group-chat-users className 추가
        - TIL을 작성하면서, 잘못 추가한 것을 확인
        - GroupChatUser가 아닌, GroupChatUsers 컴포넌트에 추가해야 함
  - CSS
    - Layout
      - layout, main-content
        - 레이아웃 배경이 디스코드와 유사한 색을 가지도록 구성하고, 전체 크기를 차지하도록 구성했지만 제대로 적용되지 않고 있어서 추가 수정 필요
        - 주석 처리하고 다시 확인해봐도 변화되는 것이 없으며 제대로 적용되지 않는 것 같음
        - 전체 크기를 차지하도록 다시 구성해 봐야 하고, 추가 확인한 결과 공간 차지하는게 뭔가 이상하기 떄문에 수정 필요
    - SideBar
      - sidebar
        - 사이드바 내용이 왼쪽에 붙어서 고정된 채로 보이도록 구성
        - width는 13% 정도로 구성해서 다른 내용이 17%, 70% 정도 차지하도록 구성할 계획
        - 배경색은 디스코드와 유사한 색을 가지도록 구성하고, 이 외에 화면의 제일 앞에서 보이도록 z-index 추가
      - user-info
        - 사이드바 하단에 붙도록 구성하고, 사용자 이름과 로그아웃 버튼이 한 줄로 출력되며, 사이드바 내용과 구분이 되도록 구분선을 추가
    - GroupChatDetails
      - group-chat-details
        - 그룹 채팅방 세부 페이지 내용이 일정 크기를 차지하도록 구성했으나 생각한대로 보여지지 않아서 추가 수정 필요
      - group-chat-content
        - 채팅 관련 내용이 세로로 정렬되어 보이도록 구성하고 패딩을 추가해 옆에 공간이 생기도록 구성
    - GroupChatUser
      - CSS 내용을 추가하긴 했지만 제대로 확인이 불가능
      - 애초에 GroupChatUsers에 추가해야 했지만, 실수로 잘못 추가해서 수정해야 함
  - 전체적인 틀과 관련된 CSS를 추가하고, 사이드바 내용이 고정되어 화면에 보여지고 그 옆으로 그룹 채팅방 사이드바 그리고 세부 페이지가 보여지도록 구성을 했지만, 결과적으로 사이드바만 제대로 위치가 잡혀서 보여지고 나머지 내용은 공간 조절이 되지 않아서 짤려서 보이기 때문에 추가 수정이 필요하다.
    - 생각한 구조대로 보이지 않아서 추가 수정이 필요한데, 현재 사이드바를 제외하면 다른 내용은 정상적으로 공간을 차지하지 못하고 있기 때문에 어떤식으로 변경을 해야 할 지 생각을 좀 해봐야 함
    - 사이드바 옆으로 그룹 채팅방과 관련된 사이드바 내용이 보여지고 그 옆으로 이제 채팅 내용이 포함된 세부 페이지 내용이 보여지면 적당할 것 같은데, 현재 이 구조대로 보여지지 않아서 수정이 필요
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/2f2e7616b9185528ceb4b60bcdeb269bb4322a1c)

# 오늘 느낀 점

- 채팅 메시지가 어제 또는 오늘 저장된 내용은 다른 채팅 메시지 날짜와 다르게 출력되도록 구성하고 이전에 저장된 메시지들은 그대로 출력되도록 구성한 내용은 문제없이 보여지는 것을 확인했고, 전체적인 틀과 관련된 CSS 내용을 추가했는데 생각한 내용과 다르게 보여지고 있기 때문에 추가 수정을 해야 한다. 사이드바 내용은 그대로 두고 나머지 내용은 사실상 다시 구성을 해야 하는데, 사이드바 외 다른 내용만 구성이 된다면 다른 내용들은 비슷한 구조라서 쉽게 해결이 될 거 같은데, 공간을 차지하도록 하는 내용이 생각보다 쉽게 구성이 되지 않아서 사이드바를 제외한 CSS 내용을 삭제하고 다시 구성하거나, 다른 내용을 찾아서 테스트를 해볼 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 출력되는 채팅 메시지 목록에 스크롤을 추가해 보기 편하도록 변경해야 하고, 메시지가 언제 추가되었는지 구분할 수 있도록 저장된 날짜 데이터를 불러와 표기해야 함

- 채팅 입력창에 적용된 스크롤 기능 추가 수정 필요

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 삭제 시에 다이렉트 채팅방 삭제 확인 로직 필요 (친구 삭제 시에 다이렉트 채팅방을 그대로 남겨놓고 삭제 확인창은 따로 추가하지 않을 예정)

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 그룹 채팅방 초대하고 알림을 전송하는 기능에서, 로그인한 사용자가 아닌 친구에게 보내는 그런 구조로 작동되도록 수정이 필요 (비로그인 상태여도 상관이 없음 단순하게 친구한테 친구 요청하면 알림 메시지가 전달되어야 함)

- 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방 (진행중)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
