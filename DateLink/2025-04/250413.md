# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 다이렉트 채팅방 스토어, 채팅 입력창 코드 정리
  - 다이렉트 채팅방 Zustand와 채팅 입력창 컴포넌트에서 주석 처리되어 사용되지 않는 코드를 정리
  - 프론트엔드
    - directChatStore
      - getDirectChat 액션 수정
        - invisibleDirectChat 이벤트 관련 socket.off 주석 해제
        - some 메서드가 사용된 invisibleDirectChat 이벤트 관련 주석 처리된 로직들 모두 삭제
        - 이전에 사용하던 updatedDirectChat 이벤트 관련 주석 처리된 로직 삭제
      - directChatForm 액션 수정
        - 주석 처리되어 사용하지 않는 내용 모두 삭제
    - ChatInput
      - 이전에 사용하던 sendMessageHandler 함수 내용 삭제
        - 주석 처리되어 사용하지 않는 함수이기 때문에 삭제
  - 주석 처리되어 사용하지 않는 코드를 정리해 이전보다 깔끔해진 것을 확인할 수 있었다.
    - 앞으로 어떤 내용들을 더 추가해야 하는지, 추가로 빠진 내용이나 부족한 내용들이 있는지 정리를 해야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/fce747ff0b34e757d6f382d94b6a84d15cf6424c)

<br />

- 앞으로 추가해야 할 내용 정리
  - 인증
    - 로그아웃 상태에서 URL을 통해 채팅방을 입장하려고 할 때, 리다이렉트될 오류 페이지 필요
    - 다이렉트, 그룹 채팅방에서 URL을 통해 존재하지 않는 채팅방을 입장하려고 할 때, 리다이렉트될 오류 페이지 필요
  - 레이아웃
    - 사이드 바에서 그룹 채팅방 목록이 가로로 보여지고, 그 옆에 채팅창 내용이 보여지는지 확인 필요
      - 구조가 이상할 경우 수정해야 함
  - 친구
    - 온라인 버튼
      - 친구 목록 중에서 현재 로그인 상태인 사용자 목록만 따로 보여주는 내용
  - 채팅
    - 채팅 입력창
      - 입력창 크기 조절이 되지 않도록 수정 필요
        - textarea 모서리에서 사용자가 크기 조절하는 것을 말함
      - 입력창에서 줄바꿈 추가 시에 입력창 크기가 늘어나도록 구성
        - 설정한 입력창 크기를 넘을 경우 스크롤이 생길 수 있도록 구성
    - 채팅 메시지
      - 채팅 메시지 입력 시에 추가한 줄바꿈이 적용되어 보여지도록 구성 필요
      - 채팅 메시지 옆에 채팅이 저장된 날짜 표시
        - 추가로 날짜 저장 시에 오전, 오후를 구분해 저장하는 것을 고려 중
        - 년, 월, 일, 오전 또는 오후, 시, 분으로 구성 예정
          - ex) XXXX-XX-XX 오전 X:XX
          - 월, 일, 시, 분 같은 내용이 두 자릿수로 구성되지 않으면 sort 같은 정렬 관련 내용에서 뒤죽박죽 내용이 섞일 수 있으므로 생각하고 작업 필요
      - 채팅 메시지 위에 채팅을 추가한 사용자 닉네임을 출력하고, 채팅 메시지 옆이 아닌 닉네임 옆에 채팅이 저장된 날짜를 표시하는 것을 고려중
        - 디스코드와 유사하게 분이 달라지지 않은 상태에서 지속적인 메시지 추가 시에 날짜를 추가로 표기하지 않고, 분이나 시간 등 날짜가 달라지면 그 때 날짜를 추가로 표기하는 쪽으로 생각중
      - 채팅 메시지 목록에서 년, 월, 일이 바뀔 때 구분하는 내용
        - 일이 바뀐 후에 메시지가 추가되면 구분하는 줄이 추가되고, 사이에 날짜가 표시되어 구분해주는 내용
        - ex) XXXX년 X월 XX일
      - 채팅 메시지 목록에 스크롤 기능 추가 필요
        - 스크롤을 위로 올렸을 때, 맨 아래로 이동할 수 있는 버튼 필요
          - 최근 메시지로 이동 같은 버튼
        - 스크롤이 맨 밑이 아닌 위에 있을 경우, 새롭게 메시지를 추가하면 맨 아래로 이동되도록 구성 필요
          - 상대방이 새로운 메시지를 추가하면, 메시지가 추가되었다는 표시가 상단에 뜨고 해당 버튼 클릭 시에 하단으로 이동되는 기능도 필요
      - 읽지 않은 메시지가 있을 경우, 다이렉트 채팅방 또는 그룹 채팅방에 특정 표시를 통해 알려주는 기능
        - 현재 생각한 내용은 다이렉트 채팅방 또는 그룹 채팅방 옆에 빨간색 표시가 보이도록 하고, 읽지 않은 메시지 갯수가 표시되는 것을 생각중
        - 채팅 메시지 목록에서 새로운 메시지가 추가되고, 읽지 않은 메시지가 있다는 표시와 다른 내용
  - 그룹 채팅방
    - 사이드바 내의 그룹 채팅방을 드래그로 이동시켜 순서를 변경할 수 있도록 구성하는 것을 고려중
      - 디스코드에서 구성된 방식과 유사한 기능
  - 다이렉트 채팅방
    - 다이렉트 채팅방 목록에서 다이렉트 채팅방을 아이콘과 닉네임으로 표시하고, 아이콘에 로그인 여부를 알 수 있도록 표시하는 기능

# 오늘 느낀 점

- 다이렉트 채팅방 관련 내용을 구성할 때 추가하고, 더이상 사용하지 않게 되면서 주석 처리한 내용을 삭제해 정리를 해 주었고, 앞으로 어떤 내용을 더 추가해야 하는지 정리를 해주었는데, 생각보다 추가해야 할 내용이 좀 많은 것 같아서 간단한 것부터 차례대로 추가해야 할 것 같다. 우선, 친구 목록에서 온라인인 사용자 목록만 따로 볼 수 있는 기능부터 추가를 할 생각이고, 다이렉트 채팅방 목록에서 상대방 닉네임과 아이콘이 보여지도록 구성한 후에 로그인 여부까지 알 수 있도록 표시를 해볼 생각이다. 채팅 관련 구성해야 할 내용이 많으므로 조금 뒤로 미루고, 비교적 간단하고 빠르게 구성할 수 있는 내용부터 추가하고 그 다음 채팅 관련 내용을 구성할 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 채팅 메시지 입력창과 관련된 내용을 수정해 크기 조절과 줄바꿈 내용이 적용되도록 구성 필요

- 출력되는 채팅 메시지 목록에 스크롤을 추가해 보기 편하도록 변경해야 하고, 메시지가 언제 추가되었는지 구분할 수 있도록 저장된 날짜 데이터를 불러와 표기해야 함

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 삭제 시에 다이렉트 채팅방 삭제 확인 로직 필요 (친구 삭제 시에 다이렉트 채팅방을 그대로 남겨놓고 삭제 확인창은 따로 추가하지 않을 예정)

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 그룹 채팅방 초대하고 알림을 전송하는 기능에서, 로그인한 사용자가 아닌 친구에게 보내는 그런 구조로 작동되도록 수정이 필요 (비로그인 상태여도 상관이 없음 단순하게 친구한테 친구 요청하면 알림 메시지가 전달되어야 함)

- 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방 (진행중)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
