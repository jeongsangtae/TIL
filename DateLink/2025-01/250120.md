# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 그룹 채팅방 생성 및 삭제와 관련된 내용을 실시간 반영시키는 방법 비교
  - 상태 끌어올리기를 통한 실시간 반영
    - 기본적으로 부모 컴포넌트에서 자식 컴포넌트로 상태를 전달하는 방식
    - 내 구조에서 상태 끌어올리기
      - GroupChats와 CreateGroupChat 컴포넌트는 서로 다른 자식 컴포넌트로 구성
      - CreateGroupChat 컴포넌트에서 SideBar 컴포넌트에 상태를 전달하고, 다시 SideBar 컴포넌트에서 GroupChats 컴포넌트에 다시 전달하는 방식으로 구현해야 함
      - 이러한 방식으로 상태 끌어올리기가 가능하긴 하지만, 상태 관리가 복잡해 지고 코드 또한 길어지고 복잡해 질 수 있음
  - Zustand를 통한 실시간 반영
    - 상태를 전역에서 관리할 수 있고, 상태를 바로 참조하기 때문에 중간 컴포넌트(SideBar 컴포넌트)를 통할 필요가 없음
    - Zustand로 실시간 반영 구현 예시
      - Zustand를 통해 그룹 채팅방 상태를 관리하는 store를 생성
        - 그룹 채팅방 조회, 생성, 삭제 등 상태 및 액션 관리
      - GroupChats 컴포넌트에서 Zustand store를 사용해 상태를 가져옴
      - CreateGroupChat 컴포넌트에서는 Zustand의 생성 관련 액션을 호출해 사용
      - GroupChat 컴포넌트에서는 Zustand의 삭제 관련 액션을 호출해 사용
  - 결론
    - 상태 끌어올리기 방식은 가능하지만, 상태 관리와 코드가 길어지고 복잡해 질 수 있음
    - Zustand를 사용하면 상태를 전역에서 관리할 수 있기 때문에, 그룹 채팅방 생성 컴포넌트에서 Zustand에 구성한 생성 액션을 가져와 구성하고, 그룹 채팅방 목록에서는 즉시 반영하는 방식으로 더 간편하게 관리할 수 있음
    - 실시간 반영에는 Zustand 같은 전역 상태 관리 라이브러리를 사용하는 것이 더 효율적이고 관리하기 용이함

<br />

- 그룹 채팅방 생성에서 그룹 채팅방 폼으로 수정 (컴포넌트, 액션 등) 및 그룹 채팅방 컴포넌트에 수정 버튼 추가 그리고 실행되도록 구성 및 토글 함수 프롭 드릴링 구성 추가 (사이드바 -> 그룹 채팅방 목록 -> 그룹 채팅방)
  - 그룹 채팅방 제목 내용을 수정하기 위해 그룹 채팅방 컴포넌트에서 수정과 관련된 함수를 추가하고 Zustand에 수정 액션을 추가하려고 했으나, 굳이 새롭게 구성할 필요없이 그룹 채팅방 생성 컴포넌트 내용과 Zustand에 구성된 생성 액션 내용을 재사용하면 될 것 같아서, 그룹 채팅방 생성과 관련된 이름들을 그룹 채팅방 폼으로 변경하고 사이드바 컴포넌트에 구성된 모달 토글 함수 내용이 그룹 채팅방 컴포넌트에 구성된 수정 버튼을 통해 실행될 수 있도록 프롭 드릴링 구성을 추가
  - 프론트엔드
    - SideBar
      - CreateGroupChat, createGroupChat으로 작성된 부분을 GroupChatForm, groupChatForm으로 변경
      - GroupChats 컴포넌트에 전달할 onToggle prop을 추가하고, 모달 토글 함수 내용이 들어가도록 구성
        - onToggle prop을 함수 형태로 구성하고, 모달 토글 함수가 작동될 때 groupChatForm 내용이 전달되어 activeModal이 변경되도록 구성
        - 로그인, 회원가입, 그룹 채팅방 생성과 다르게 여기서는 groupChatForm라는 내용이 직접적으로 넘어가도록 구성
    - GroupChats
      - SideBar 컴포넌트에서 전달한 onToggle을 prop으로 전달받고, 타입은 재사용하는 ModalProps 타입으로 정의
      - 전달받은 onToggle prop 내용을 GroupChat 컴포넌트에 onToggle라는 prop 이름으로 전달
    - GroupChat
      - \_id, title prop은 GroupChatData라는 재사용 타입으로 정의되어있고, onToggle prop은 ModalProps라는 재사용 타입으로 정의되어 있기 때문에 이 두 개의 재사용 타입에 "&" 연산자를 사용해 병합하고 GroupChatProps라는 이름으로 타입 정의
      - GroupChats 컴포넌트에서 전달한 \_id, title prop 내용에 onToggle을 추가해서 새롭게 추가한 GroupChatProps으로 타입 정의
      - 수정 버튼을 추가하고, onClick 속성을 사용해 onToggle prop이 실행되도록 구성
    - CreateGroupChat -> GroupChatForm
      - 파일 이름, 컴포넌트 이름, 수정한 액션 이름까지 모두 변경
    - groupChatStore
      - createGroupChat -> groupChatForm으로 이름 변경
  - 그룹 채팅방 생성 컴포넌트, 액션 내용이 재사용될 수 있도록 그룹 채팅방 폼으로 이름을 변경해 주고, 그룹 채팅방 생성 모달도 재사용되어 실행될 수 있도록 토글 함수를 프롭 드릴링으로 그룹 채팅방에 전달하고, 그룹 채팅방에서 수정 버튼을 클릭하면 해당 창이 뜨도록 구성을 해 주었는데 확인해 본 결과, 그룹 채팅방과 연결된 수정 버튼을 클릭하면 그룹 채팅방 생성 모달이 열리며 보여지는 것을 확인할 수 있었다.
    - 지금은 그룹 채팅방 생성으로 단순하게 열리지만, 여기에 method 내용을 전달하도록 구성을 변경해 POST일 때는 생성 폼이 열리고, PATCH일 때는 수정 폼이 열리도록 해 줄 생각이다.
    - 토글 함수 내용이 하위 컴포넌트로 전달되고 실행되는 코드의 흐름에 대해 정리도 해 줘야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/83b66e0b872ec3666973511c2e62a746db625475)

# 오늘 느낀 점

- 그룹 채팅방 제목을 수정할 수 있도록 내용을 구상하던 중, 수정과 관련된 Zustand 액션을 따로 추가하고 그룹 채팅방 컴포넌트에서 함수도 추가해 연결하려고 했으나, 그룹 채팅방 생성과 관련된 컴포넌트 그리고 Zustand 액션 내용을 재사용하면 좋을 것 같다는 생각이 들어서 우선, 그룹 채팅방 생성과 관련된 이름을 그룹 채팅방 폼으로 모두 변경해 주고, 사이드바 컴포넌트에서 구성된 토글 함수 내용이 그룹 채팅방 컴포넌트에 전달되어, 수정 버튼 클릭 시 실행되고 그룹 채팅방 생성 모달이 열리도록 구성해 주었다. 현재는 그룹 채팅방 생성 버튼과 수정 버튼 클릭 시에 모두 그룹 채팅방 생성 모달이 열리지만, 여기에 method 내용이 전달되어 POST와 PATCH를 구분하고, 그에 맞게 내용이 변화되어 모달창이 열리도록 구성할 생각이다. 그리고 수정이 문제없이 구현되면 채팅과 관련된 내용도 조금씩 추가를 해 줄 생각이며, 그룹 채팅방 fetch 함수 경로에 대해서도 다시 살펴보고 중간에 확실하게 구분이 가능하고 다른 페이지로 이동될 수 있도록 수정을 해 줄 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 방 관련 내용 및 채팅 관련 내용 구성

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
