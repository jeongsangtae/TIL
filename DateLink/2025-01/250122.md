# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 모달 스토어 추가 그리고 사용 (Zustand) 및 그룹 채팅방 생성과 수정 분리 및 onToggle 프롭 드릴링 삭제
  - 모달과 관련된 내용을 전역적으로 관리하기 위해 Zustand를 추가해 구성하고, 그룹 채팅방 생성과 수정 모달이 다르게 출력되도록 분리를 해 주었으며, 불필요하게 onToggle이 프롭 드릴링되는 내용을 삭제
  - 프론트엔드
    - SideBar
      - 모달과 관련된 Zustand에서 상태, 액션을 불러와 사용할 수 있도록 구성
      - 이전에 구성되어 있던 타입 정의, useState, 모달 토글 함수 등 내용 주석처리
      - modals 내용에 구성된 method 항목 타입에 null을 추가
      - GroupChats 컴포넌트에 전달되는 onToggle, method prop 삭제
        - 프롭 드릴링이 아닌, GroupChat에서 Zustand 내용을 직접 불러와 사용하도록 변경
      - 모달을 동작하는 버튼의 onClick에서 모달 토글 함수가 아닌, Zustand에서 불러온 액션 내용이 들어가도록 구성
        - 액션 내용에 type 외에 method 항목도 전달되도록 구성
        - method는 선택적이기 때문에 포함된 경우에만 전달
      - 열리는 모달 내용의 onToggle 또한 모달 토클 함수가 아닌, Zustand에서 불러온 액션 내용이 들어가도록 구성
        - 액션 내용에는 type만 전달하도록 구성
    - GroupChats
      - 앞에서 새롭게 추가했던 타입 정의와 onToggle, method prop에 관한 내용을 삭제
    - GroupChat
      - 앞에서 새롭게 추가한 타입 정의와 onToggle, method prop에 관한 내용을 삭제
      - 모달과 관련된 Zustand 액션 내용을 불러오도록 구성
      - 수정 버튼의 onClick에 불러온 액션 내용으로 구성하고, 필요한 매개변수 내용을 전달
        - type, method, data 내용을 전달해 수정 버튼 클릭 시에 수정 모달이 열리도록 구성
        - 그룹 채팅방 폼, PATCH 메소드, \_id와 title 내용이 전달되도록 구성
    - GroupChatForm
      - 새롭게 추가한 타입 정의 내용을 삭제하고, 모달과 관련된 Zustand에 저장된 상태 데이터를 불러오도록 구성
      - 불러온 데이터의 method 항목을 확인해서 POST일 경우, 생성과 관련된 텍스트가 들어가고, POST가 아닌 경우에는 수정과 관련된 텍스트가 들어가도록 구성
        - 제출 버튼 포함
      - input의 value에서 불러온 데이터의 method 항목을 확인해서 POST일 경우, 이전 구성이 사용되고, POST가 아닌 경우에는 불러온 데이터의 title 항목 내용이 들어가도록 구성
    - authStore
      - 인터벌 되며 토큰 만료 시간이 콘솔에 출력되는 내용 주석 처리
    - groupChatStore
      - GroupChatState 타입 정의 이름을 GroupChatStore로 수정
      - 이전에 추가했던 method 관련 내용을 모두 삭제해서 이전 상태로 변경
    - modalStore
      - Zustand 구성을 위한 기본 세팅 추가
      - 활성화된 모달에 어떤 내용이 들어갈 지 타입 정의
        - SideBar 컴포넌트에서 사용하던 ModalType을 가져와 정의
        - ModalType 타입 정의는 재사용될 수 있도록 수정 필요
      - 모달 관련 Zustand 내용에 사용될 타입 정의
        - 활성화 모달 상태, 모달 데이터 상태, 모달 토글 액션으로 구성
        - 활성화 모달은 앞에서 정의한 ModalType 또는 null이 들어가도록 구성
        - 모달 데이터의 method는 POST 또는 PATCH가 들어가고, method가 전달되지 않는다면 null이 들어가도록 구성
          - 추가로, data 관련 내용도 있는데 이 부분은 `[key: string]: any`로 구성해서 임의의 키와 어떤 타입의 데이터든 저장할 수 있도록 구성
        - 모달 토글 액션
          - type, method, data로 구성되어있고 type은 앞에서 정의한 ModalType, method는 옵셔널 타입으로 POST 또는 PATCH 또는 null이 들어가고, data 또한 옵셔널 타입으로 `Record<string, any>`를 사용해 구성
            - `Record<K, V>`는 TypeScript 유틸리티 타입으로, 특정 키-값 구조를 정의할 때 사용
            - K는 키 타입, V는 값 타입
            - 이 경우 string이 키, 값이 any
            - 동적 데이터를 다룰 때 유용하고, data에 어떤 키-값 쌍이 전달될지 미리 알 수 없을 때 사용함
            - ex) `type ModalData = Record<string, string | number | null>` 이런식으로 가능한 값의 타입을 제한할 수 있음
      - Zustand에 구성된 상태 및 액션 내용
        - 활성화 모달
          - 활성화 모달은 어떤 모달이 열리는지 구분하기 위한 용도로 사용
          - 초기값은 null로, 기본적으로 모달이 닫혀있는 상태로 적용
        - 모달 데이터
          - 모달 데이터는 그룹 채팅방 관련 내용에서 method 또는 title 내용을 전달하기 때문에 해당 내용을 전달받아 저장하고 다시 전달해 사용될 수 있도록 구성
          - method 초기값은 null로, 그룹 채팅방 관련 내용이 아니면 전달되지 않음
        - 모달 토글
          - 매개변수로 type, method, data를 전달받도록 구성
            - method는 초기값 null, data는 객체로 구성
          - 활성화 모달 정보를 불러와서 현재 모달로 설정
          - 현재 모달의 내용과 type이 일치하면, 모달이 닫혀야 하기 때문에 set을 사용해 활성화 모달, 모달 데이터의 method 내용을 null로 변경시키도록 구성
          - 현재 모달의 내용과 type이 불일치하면, 모달이 열려야 하기 때문에 set을 사용해 활성화 모달에는 type 내용이 들어가고, 모달 데이터의 method에는 method 내용, data에는 ...data 내용이 들어가도록 구성
            - data에는 스프레드 연사자를 사용해 객체의 키-값 쌍을 전개하여 새로운 객체에 병합되도록 구성
            - ex) `"PATCH", { _id, title }` 이 같은 내용이 전달될 경우
            - ex) `{ method: "PATCH", _id: "123", title: "Sample" }` 이런식으로 구성
            - 모달 데이터에 method와 추가 데이터를 함께 저장하고, 데이터의 구조가 고정되지 않고 필요한 값을 동적으로 추가함
  - 모달 관련 내용을 작동시킬 Zustand를 구성하고, 액션을 사이드바 컴포넌트와 그룹 채팅방 컴포넌트에 불러와서 각각 작동되도록 구성한 뒤에 필요한 정보를 매개변수로 전달해 테스트한 결과, 로그인과 회원가입은 이전과 동일하게 작동되는 것을 확인했고, 생성과 수정은 method 내용에 따라 분리되어 내용이 달라진 것까지 확인할 수 있었다.
    - 프롭 드릴링할 필요없이 그룹 채팅방 컴포넌트에서 액션을 불러와 수정 모달을 열 수 있게 되었고, 코드도 좀 더 간결하고 가독성 좋게 변경되었다고 생각됨
    - 수정 모달에 그룹 채팅방 제목이 전달되어 보여지는 것은 문제가 없지만, 제목 내용을 수정할 수 없는 오류가 있기 때문에 제목 내용을 변경할 수 있도록 코드 수정이 필요하고, 변경한 내용을 제출해 업데이트되도록 백엔드 구성을 해 줘야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/e71df856cf68e70cf772a5810ea0243797428b14)

# 오늘 느낀 점

- 모달을 실행시키는 코드를 Zustand에 옮겨서 구성하고, 모달 동작이 필요한 컴포넌트에서 해당 액션을 불러와 구성해 준 결과, 로그인과 회원가입은 이전과 동일하게 작동하고 추가로 그룹 채팅방 생성과 수정은 분리되어 모달이 보여지는 것을 확인했다. 하지만 수정 모달에 그룹 채팅방 제목이 보여지는 것은 문제가 없지만 막상 수정하려고 하면 수정할 수가 없기 때문에 이 내용에 대한 수정이 필요하고, 현재 그룹 채팅방 생성과 관련된 백엔드만 구성이 되어 있고 수정과 관련된 백엔드 구성은 되어 있지 않기 때문에 추가가 필요한 상태이며, 그룹 채팅방 폼 액션을 공용으로 사용해 생성과 수정 함께 관리할 생각인데, 아직 생성과 관련된 내용만 구성되어 있기 때문에 수정 관련 내용도 적용될 수 있도록 내용을 수정해 줘야 한다. 최종적으로 해 줘야 할 내용으로, 수정 모달에서 제목 내용을 수정할 수 있어야 하며, 수정과 관련된 백엔드 내용 구성 그리고 그룹 채팅방 폼 액션에서 수정 관련 내용도 전달 받고 백엔드로 전송할 수 있어야 하며, 실시간 반영까지 될 수 있도록 구성을 해 줘야 한다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 방 관련 내용 및 채팅 관련 내용 구성

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
