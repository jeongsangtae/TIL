# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 로그인, 회원가입 관련 필터 조건부 추가 및 ModalType 타입 정의 내용 분리
  - 로그인이 되어 있는 상태에서 로그인, 회원가입 버튼이 보여지지 않도록 필터 조건부를 추가하고, 필터 조건부 내용에서 null 관련 오류를 고치기 위해 ModalType 타입 정의 내용을 분리
  - 프론트엔드
    - SideBar
      - ModalType 타입 정의 내용에서 null을 빼고 구성
        - 별도의 ActiveModalType 타입 정의를 추가해서 ModalType 타입 정의 또는 null이 적용되도록 구성
      - activeModal useState에 적용되는 타입 정의가 ModalType이 아닌, ActiveModalType가 적용되도록 수정
      - 로그인했을 때 로그인, 회원가입 버튼이 보여지지않도록 modals 내용에 필터 조건부를 추가
        - 로그인 유무를 확인하고, 로그인 상태라면 "login"과 "signup" type 내용이 return false로 제외되도록 구성
      - 중복되는 isLoggedIn을 하나만 사용해서 조건부가 적용되도록 변경
        - 로그인 상태일 때 사용자 이름, 로그아웃 버튼, 그룹 채팅방 목록이 보여지도록 구성
      - JSX 코드에서 modals 대신에 필터링된 내용인 filteredModals 내용에 map 함수가 사용되도록 수정
  - 필터 조건부를 추가한 상태로 테스트한 결과, 로그인 상태에서는 로그인과 회원가입 버튼이 보이지 않고 비로그인 상태에서만 보여지는 것을 확인할 수 있었음
    - 필터 조건부 내용을 구성할 때 발생했던, filter 타입을 더 넓은 범위 타입으로 확장하는 문제에 대한 정리를 해 줘야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/73593c483c167e69fb68d525ae7e5adcbe8e74aa)

<br />

- Zustand에 pageAccess 액션 추가, 사용 및 modals에 적용된 필터 조건부 수정
  - Zustand에 로그인 상태를 확인하는 액션 내용을 추가하고, 해당 액션을 사이드바 컴포넌트의 useEffect에 추가해 앱이 처음 로드 될 때 바로 실행될 수 있도록 구성해 주었으며, modals에 적용된 필터 조건부 내용에 비로그인 상태일 경우 그룹 채팅방 생성 모달이 제외되어 보이지 않도록 구성 추가
  - 프론트엔드
    - SideBar
      - useEffect 훅 추가
      - Zustand에서 pageAccess 액션 추가로 가져오도록 수정
      - 필터 조건부 내용 수정
        - 비로그인 시에 그룹 채팅방 생성 모달이 제외되도록 내용 추가
      - useEffect를 추가해 pageAccess 액션이 실행되도록 구성
    - authStore
      - pageAccess 액션에 대한 타입 정의 추가
        - 기본 함수 타입으로 정의
      - pageAccess 액션 추가
        - 로컬 스토리지에 저장된 isLoggedIn 항목을 가져오도록 구성
        - isLoggedIn 항목에 1이 값으로 있는 경우, isLoggedIn 상태가 true가 되도록 구성
  - 비로그인 상태에서 확인해 본 결과, 그룹 채팅방 생성 버튼이 제외되고 로그인과 회원가입 버튼만 보이는 것을 확인했고, 앱이 처음 로드될 때 로컬 스토리지에 정보가 남아있다면 그대로 로그인이 유지되는 것을 확인할 수 있었다.
    - 앱이 처음 로드될 때 실행되는 useEffect에 사용되는 Zustand 액션 내용은 토큰 만료 시간을 확인하고 갱신하는 내용과 겹치는 부분이 있다고 생각되기에, 하나의 액션으로 만들어서 앱이 처음 로드될 때와 인터벌을 통해 로그인을 확인하고 토큰 만료 시간도 확인 및 갱신할 수 있도록 구성을 해 봐야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/5c7f643c0190da5f56eea45c8e5d2af0814d970f)

<br />

- modals에 적용된 필터 조건부 수정
  - 적용한 필터 조건부 내용을 좀 더 쉽게 이해할 수 있도록 직관적이고 간결하게 수정
  - 프론트엔드
    - SideBar
      - 로그인 상태에서는 로그인과 회원가입 모달이 제외될 수 있도록 `type !== "login" && type !== "signup"`으로 두 조건을 하나로 결합하여 더 간결하게 수정
      - 비로그인 상태에서는 그룹 채팅방 생성 모달이 제외될 수 있도록 `type !== "createGroupChat"`으로 처리하도록 수정
  - 수정한 필터 조건부 내용이 기능적으로는 동일하게 작동하지만, 이전보다 직관적이고 간결한 방식으로 작성되었다고 생각됨
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/c4badc5ba8896a6fa834223380578f1c9c3ee7e0)

# 오늘 느낀 점

- 구성한 필터 조건부 내용을 통해 로그인 상태에서는 로그인, 회원가입 버튼이 보여지지 않고 그룹 채팅방 생성 버튼만 보여지며, 비로그인 상태에서는 그룹 채팅방 생성 버튼이 보여지지 않고 로그인, 회원가입 버튼이 보여지도록 잘 구성이 된 것 같다. 그리고 처음 앱 로드 시에 바로 실행되어 로그인 상태를 확인하는 코드를 추가했는데 이 코드가 문제없이 작동하긴 하지만, 현재 내용이 좀 부족한 상태라서 추가 수정이 필요하다고 생각이 되는데 차라리 여기에 토큰 만료 시간을 확인하고 갱신하는 내용을 합쳐서 앱이 처음 로드될 때, 로그인 상태 확인, 토큰 만료 시간 확인 및 갱신을 함께 확인할 수 있도록 구성해 주면 좋을 것 같다고 생각이 된다.

- filter 내용을 추가하면서 타입 관련 오류가 계속 발생해서 관련 오류를 수정하고 처리하느라 조금 애먹었는데, 이와 관련된 내용을 에러 파일에 정리해 주는 것이 좋을 것 같다고 생각이 되고, 어제 액세스 토큰과 리프레쉬 토큰 만료시간과 작동, 유지 관련해서 찾아본 내용을 간단하게 정리해야 한다고 했지만 잊어버리고 하지 않았기 때문에 관련 내용을 정리해 줘야 한다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
