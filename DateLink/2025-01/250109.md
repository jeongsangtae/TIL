# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- JWT 토큰 만료 시간 수정 및 Zustand에 로그아웃 내용 추가, 사용
  - 테스트 단계에서 강제로 로그아웃되는 불편한 상황이 발생하지 않도록 JWT 토큰 만료 시간을 수정해 주었고, Zustand에 로그아웃 액션을 추가하고 백엔드와 연결해 사용할 수 있도록 구성
  - 백엔드
    - jwt-auth
      - 액세스 토큰 만료 시간을 30분으로 수정
        - 테스트 단계에서는 5-30분으로 왔다갔다 할 예정
        - 실제 웹 애플리케이션에서는 1시간으로 설정할 예정
    - user-routes
      - login get 라우터 액세스 토큰 만료 시간을 30분으로 수정, 리프레쉬 토큰 만료 시간은 1시간으로 수정
        - 마찬가지로 테스트 단계에서는 5-30분, 15분-1시간으로 왔다갔다 할 예정
        - 실제 웹 애플리케이션에선는 30일로 설정할 예정
      - logout post 라우터 추가
        - 저장된 쿠키 내용을 삭제하도록 구성
        - secure, sameSite는 환경변수 내용에 따라 다르게 작동하도록 구성
          - 로그인할 때 내용과 동일
        - 로그아웃에 성공하면 성공 메시지를 전달하고 실패하면 오류 메시지 전달
  - 프론트엔드
    - authStore
      - 타입 정의에 logout 항목을 추가
        - 비동기 함수로 구성
      - login
        - 만료 시간을 30분으로 수정
          - 테스트 단계에서는 5-30분으로 왔다갔다 할 예정
          - 실제 웹 애플리케이션에서는 1시간으로 설정할 예정
      - logout
        - 로컬 스토리지에 저장된 isLoggedIn, expirationTime, refreshTokenExp 항목이 삭제되도록 구성
        - 백엔드에 구성한 logout post 라우터와 연결되도록 구성
          - method는 POST
          - body와 headers는 생략
            - body에 전달할 내용이 없으므로 생략하고, headers 또한 body가 생략되었으므로 함께 생략
            - 전달될 내용이 없는데 body가 있으면 오류가 발생하므로, {}로 구성 또는 생략
          - credentials는 include로 구성
        - 성공적인 로그아웃
          - 로그아웃 성공 메시지 콘솔에 출력
          - isLoggedIn은 false, userInfo는 null로 변경
        - 실패한 로그아웃
          - 오류 메시지를 콘솔에 출력하고, 추가 오류 메시지를 alert를 통해 출력
    - SideBar
      - Zustand에서 구성한 logout 내용도 가져오도록 수정
      - 로그아웃 버튼을 추가하고, onClick에 Zustand logout 내용을 구성해 사용
        - 로그아웃 버튼은 isLoggedIn이 true일 때만 보여지도록 구성
  - Zustand에 로그아웃 액션을 추가하고 백엔드와 연결한 후에, 사이드바 컴포넌트에서 로그아웃 버튼을 추가해 사용한 결과, 정상적으로 로컬 스토리지와 쿠키에 저장된 내용이 모두 삭제되며 사용자 정보도 보여지지 않고 로그아웃 버튼도 보이지 않는 것을 확인
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/fe6713f602b4e2faf4a09296bf0e6c1a6b1a99c6)

# 오늘 느낀 점

- JWT 토큰 만료 시간이 너무 짧게 설정되어 있어서 테스트를 위해 로그인을 다시 해야 하는 번거로움이 있어서 시간을 수정해 주었고, 로그아웃 기능을 Zustand에 추가하고 백엔드와 연결해 테스트해 보았는데 문제없이 로컬 스토리지와 쿠키에 저장된 내용을 삭제하고 로그아웃되는 것을 확인했다. 이제 추가 및 수정해야 할 내용으로 로그인하면 로그인, 회원가입 버튼이 보여지지 않도록 수정해 줘야 하고, 로그인 유지 기능 구성을 위해 useEffect를 사이드바 컴포넌트에 추가하고, 해당 기능 세부 내용은 Zustand에서 추가해 전역적으로 관리될 수 있도록 구성해 봐야 한다. 그리고 액세스 토큰과 리프레쉬 토큰 만료 시간과 작동, 유지 관련해서 많이 생각해 보고 찾아본 내용에 대해 간단하게 정리를 한 번 해 주면 좋을 것 같아서 관련 내용을 정리하고 그 다음 기능 구성을 해 줄 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
