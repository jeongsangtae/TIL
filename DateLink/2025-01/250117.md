# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 사용자 정보 백엔드로 전달 및 저장
  - Zustand에 저장한 사용자 정보를 그룹 채팅방 생성 컴포넌트에 불러와서 입력한 제목과 함께 백엔드로 전달해 그룹 채팅방이 생성될 때 사용자 정보가 함께 저장되도록 구성
  - 백엔드
    - 프론트엔드에서 전달받은 객체 데이터 변수 이름 수정
    - 프론트엔드에서 전달받은 데이터가 그룹 채팅방 생성 시에 함께 포함되도록 항목 추가
      - 사용자 정보 \_id는 `new ObjectId`를 통해 변환해서 저장할 수도 있지만, 나중에 사용할 때 변환할 생각으로 현재는 변환하지 않고 문자열 형태로 저장
  - 프론트엔드
    - CreateGroupChat
      - 사용자 정보를 Zustand에서 가져오기 위해 useAuthStore 추가
      - 가져온 사용자 정보에서 tokenExp를 제외한 내용만 전달할 수 있도록 객체 디스트럭처링
      - tokenExp를 제외한 사용자 정보와 그룹 채팅방 제목 내용이 함께 백엔드에 전달되도록 구성
  - Zustand에 저장된 사용자 정보를 가져오고, 사용자가 입력한 그룹 채팅방 제목과 함께 백엔드에 전달해서 그룹 채팅방이 생성될 때 제목, 사용자 \_id, 이메일, 이름, 닉네임 항목이 저장되도록 구성하고 테스트한 결과 문제없이 사용자 정보가 포함되어 그룹 채팅방이 생성되는 것을 확인할 수 있었다.
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/5d87565f606ef27bee081d7e7b1eee3987bbc0ad)

<br />

- 로그인한 사용자가 생성한 그룹 채팅방 목록만 출력
  - 로그인하면 그룹 채팅방 전체 목록이 보여지는 것이 아닌, 로그인한 사용자가 생성한 그룹 채팅방 목록만 출력되도록 백엔드에 조건을 추가
  - 백엔드
    - group-chat-routes
      - jwt-auth에서 액세스 토큰 정보를 가져오도록 구성 추가
      - groupChats get 라우터
        - 가져온 액세스 토큰 정보를 변수에 담도록 구성
        - 그룹 채팅방 목록을 조회하는 내용의 find 속성에 조건을 추가
          - 그룹 채팅방에 저장된 email과 가져온 액세스 토큰 정보에 저장된 email 내용이 일치하는 항목만 조회하도록 구성
        - DB에 저장된 전체 그룹 채팅방 목록이 아닌, 로그인한 사용자 이메일과 그룹 채팅방에 저장된 이메일이 일치하는 항목만 프론트엔드로 전달하게 됨
  - groupChats get 라우터에서 로그인한 사용자 이메일과 그룹 채팅방에 저장된 이메일이 일치하는 항목만 프론트엔드로 전달하도록 구성한 뒤에 확인해 본 결과, 확실히 구분되어 사용자 본인이 생성한 그룹 채팅방 목록만 보여지는 것을 확인할 수 있었다.
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/88225701ca700050f84debaba809df30c651b70a)

# 오늘 느낀 점

- 로그인한 사용자 정보를 그룹 채팅방 제목과 함께 백엔드로 전달하고, 백엔드에서는 해당 데이터를 전달 받아서 그룹 채팅방이 생성될 때 함께 저장되도록 구성해 주었다. 그리고 로그인한 사용자가 생성한 그룹 채팅방만 보여질 수 있도록 백엔드에 조건을 추가해 로그인한 사용자 이메일과 백엔드에 저장된 그룹 채팅방 이메일 내용을 비교해 일치하는 항목만 출력하도록 구성을 해 주었는데 이 부분도 문제없이 전체 그룹 채팅방이 아닌, 사용자 본인이 생성한 그룹 채팅방 목록만 보여지는 것을 확인했다. 그룹 채팅방이 생성 또는 삭제될 때 실시간으로 적용되어 보여지도록 구성하려고 했으나, 이전에 프로젝트에서 했던 방법인 상태 끌어올리기 방식으로는 코드가 많이 복잡해 질 것 같아서, 차라리 Zustand를 사용해 그룹 채팅방을 생성하고 그룹 채팅방 컴포넌트에서 해당 내용을 전달해 실시간으로 UI에 반영되도록 구성해 볼 생각인데, Zustand를 사용한 방법은 중간 컴포넌트인 사이드바 컴포넌트를 통해 전달할 필요가 없기에 더 간편하고 효율적이라고 생각되어 이 방법으로 구현을 해 볼 생각이다. 그리고 실시간 반영에 관련된 내용을 간단하게 정리해 볼 생각인데, 다른 내용은 정리하지 않고 상태 끌어올리기와 Zustand에 대한 내용만 비교 및 정리할 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 방 관련 내용 및 채팅 관련 내용 구성

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
