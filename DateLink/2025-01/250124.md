# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 그룹 채팅 수정과 관련된 PATCH 라우터 추가 및 그룹 채팅 수정 로직 실패
  - 그룹 채팅 수정과 관련된 PATCH 라우터를 추가하고, 수정에 필요한 데이터를 전달해 사용할 수 있도록 구성했지만 그룹 채팅방 제목 수정에 실패
  - 백엔드
    - group-chat-routes
      - 그룹 채팅방 생성 POST 라우터 경로를 createGroupChat에서 groupChatForm으로 변경
      - 그룹 채팅방 수정 PATCH 라우터 추가
        - 액세스 토큰에 저장된 사용자 정보를 불러오도록 구성
        - 불러온 사용자 정보가 존재하는지 확인하는 if문 추가
        - 프론트엔드에서 넘어온 데이터를 저장
        - DB에 저장되는 데이터 날짜가 화면에 표시될 때 현재 시간으로 보이도록 구성
        - 넘어오는 데이터 확인을 위한 console.log 추가
          - 프론트엔드에서 넘어오는 전체 데이터와 modalData 확인
        - DB에 저장된 그룹 채팅방 목록에서 \_id 내용과 프론트엔드에서 넘어온 modalData.\_id 내용이 일치하는 항목을 찾도록 구성
        - 찾은 그룹 채팅방이 확실하게 존재하는지 체크하는 if문 추가
        - 찾은 그룹 채팅방에 저장된 이메일과 불러온 사용자 정보 이메일이 일치하는지 확인하고 일치하지 않을 경우 수정할 권한이 없다는 메시지 출력
        - 프론트엔드에서 전달받은 수정된 그룹 채팅방 제목으로 업데이트되며, 날짜도 함께 업데이트되도록 구성
          - 그룹 채팅방 목록에 저장된 \_id와 프론트엔드에서 넘어온 \_id 정보를 확인해 일치하는 항목 찾도록 구성
          - 일치하는 항목이 업데이트되도록 구성
        - 그룹 채팅방이 업데이트되면 그 내용을 프론트엔드로 전달하도록 구성
  - 프론트엔드
    - GroupChatForm
      - 그룹 채팅 폼에 method 내용 외에 modalData 내용 전체가 전달되도록 구성
    - groupChatStore
      - 넘어온 modalData 타입 정의
        - method 속성은 그대로 POST, PATCH 내용으로 정의
        - \_id와 title은 옵셔널 타입으로 string 타입 정의
      - 그룹 채팅 폼 액션에 타입 정의
        - modalData 타입 정의
        - method, \_id, title 내용은 앞에서 정의한 내용과 동일하게 구성
      - 백엔드로 전달되는 requestBody에 modalData를 포함해 함께 전달하도록 구성
      - 백엔드와 연결된 fetch 함수의 method 내용이 동적으로 사용되도록 변경
        - modalData에 속한 method 속성이 사용되도록 구성
  - 수정된 그룹 채팅방 제목 내용이 백엔드로 전달되고, 해당 내용이 업데이트된 후에 다시 프론트엔드에 전달되어 보여지도록 구성을 했지만, 제대로 출력이 되지 않고, 에러가 발생하기 때문에 추가 수정이 필요하다.
    - 수정한 내용이 업데이트되지 않고, 제출 후에 출력 부분에서도 \_id 관련 에러가 발생해서 원인을 찾아봐야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/88e0bcef1aa92dbbf2ad6d1d50ac4089ea0eee4a)

<br />

- 그룹 채팅방 수정한 데이터로 DB 업데이트 성공
  - 수정한 내용이 업데이트될 때 \_id를 확인하는 부분의 코드가 잘못 구성되어 정상적으로 업데이트가 되지 않기 때문에, 이 내용을 수정해 정상적으로 그룹 채팅방 제목이 업데이트되어 DB에 저장되도록 구성
  - 백엔드
    - group-chat-routes
      - 그룹 채팅방에 저장된 \_id 내용과 프론트엔드에서 넘어온 modalData의 \_id와 비교해 일치하는 그룹 채팅방을 찾고, 해당 그룹 채팅방이 업데이트되도록 구성
  - 테스트한 결과, 수정한 그룹 채팅방 제목 내용이 업데이트되어 DB에 저장이 되는 것은 문제가 없지만, 여전히 프론트엔드의 그룹 채팅방 출력 부분에서 \_id 관련 에러가 발생하기 때문에 추가 수정이 필요하다.
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/391fc238b0ef089f2111d94e2580a070162a3f30)

# 오늘 느낀 점

- 수정한 그룹 채팅방 제목이 정상적으로 백엔드에 전달되도록 구성하고, 백엔드에서는 해당 내용을 전달받아서 내용이 업데이트되도록 로직을 구성했는데, 처음에 실수로 조건 내용을 잘못 구성해 정상적으로 그룹 채팅방 제목이 업데이트되지 않았지만, 추가로 수정을 해 준 후에는 문제없이 그룹 채팅방 제목이 업데이트되는 것을 확인할 수 있었다. 하지만 수정이 된 후에 출력되는 부분이 에러가 발생하기 때문에 추가 수정이 필요하고, 업데이트된 내용이 실시간 적용되어 보여지도록 내용을 추가해 줘야 한다. 현재 그룹 채팅방 생성은 실시간 적용되어 보여지지만, 그룹 채팅방 수정은 DB에서만 데이터가 업데이트되고 화면에서는 에러가 발생하고 새로고침해야 적용되기 때문에, 최우선으로 에러 수정 및 실시간 반영 이렇게 두 가지를 수정해 줄 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 방 관련 내용 및 채팅 관련 내용 구성

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
