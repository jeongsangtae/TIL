# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- Zustand에 그룹 채팅 스토어 추가 및 로딩, 그룹 채팅방 목록 상태, 그룹 채팅방 조회 액션 추가
  - 그룹 채팅방 관련 내용의 변화가 화면에 실시간으로 반영되도록 하기 위해, 그룹 채팅방 관련 내용만 관리하는 Zustand를 추가하고 그룹 채팅방 목록을 조회하는 액션을 구성한 후에 그룹 채팅방 목록 컴포넌트에서 해당 내용을 불러와 출력하도록 구성
  - 프론트엔드
    - GroupChats
      - 그룹 채팅방 목록과 관련된 useState, 로딩과 관련된 useState 주석 처리
      - 그룹 채팅방과 관련된 Zustand에서 로딩 상태, 그룹 채팅방 목록 상태, 그룹 채팅방 목록 조회 액션을 가져오도록 구성
      - useEffect 내에 구성된 그룹 채팅방 조회하는 fetch 함수 내용 주석 처리
      - useEffect 내에서 주석 처리한 내용 대신에 그룹 채팅방 목록 조회 액션이 실행되도록 구성
    - groupChatStore
      - 재사용하는 타입 정의 내용을 가져옴
      - Zustand 내용의 상태, 액션에 사용될 타입 정의 추가
      - 로딩은 초기에 true, 그룹 채팅방 목록은 배열로 구성
      - 그룹 채팅방 목록 조회 액션
        - 기존의 그룹 채팅방 목록 컴포넌트에서 가져온 코드를 그대로 구성
        - set을 추가해 그룹 채팅방 목록과 로딩 상태가 업데이트되도록 구성
  - Zustand로 옮긴 코드들이 정상 작동하는지 확인해 본 결과, 문제없이 로딩 표시와 그룹 채팅방 목록이 보여지는 확인할 수 있었으며, 그룹 채팅방 목록 컴포넌트에서는 코드가 확 줄어서 주로 UI 관련 내용을 구성하고 있고, 상태 관리는 Zustand가 담당하게 되어 역할 분리가 이전보다 명확해지게 됨
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/63ab5e5636654b61f8ca0d38bc598b845eb6413c)

<br />

- 그룹 채팅방 삭제 액션 추가 및 주석 처리된 코드 삭제
  - 그룹 채팅방 삭제와 관련된 코드를 Zustand에 옮겨서 액션으로 구성해 주고 그룹 채팅방 컴포넌트에서는 해당 액션을 불러와 실행만 하도록 수정해 주었으며, 그룹 채팅방 목록 컴포넌트에서 조회와 관련된 코드를 주석 처리하고 사용하지 않기 때문에 모두 삭제
  - 프론트엔드
    - GroupChats
      - 주석 처리된 코드 삭제
    - GroupChat
      - 그룹 채팅방 삭제와 관련된 fetch 함수 내용을 삭제
        - Zustand 내용에 옮김
      - Zustand에서 구성된 그룹 채팅방 삭제 액션이 실행되도록 구성
        - 그룹 채팅방 삭제 액션에 \_id 정보를 전달
    - groupChatStore
      - 그룹 채팅방 삭제 액션 타입 정의
        - \_id를 전달 받기 때문에 매개변수에 추가
        - \_id는 string으로 타입 정의하고, 비동기 함수로 타입 정의
      - 그룹 채팅방 삭제 액션을 추가
        - \_id 내용을 매개변수로 전달받고 string으로 타입 정의
        - 그룹 채팅방 컴포넌트에서 가져온 코드를 그대로 구성
        - get을 사용해 그룹 채팅방 목록을 가져오고, filter 메서드를 함께 사용해서 그룹 채팅방에 저장된 \_id와 매개변수로 전달받은 \_id를 비교해 일치하는 항목을 제외한 그룹 채팅방 목록을 따로 변수에 저장
        - set을 통해 그룹 채팅방 목록 상태가 따로 변수에 저장된 내용으로 업데이트되도록 해 주고, 실시간 반영이 되도록 구성
  - Zustand에 그룹 채팅방 삭제와 관련된 코드를 옮기고, 그룹 채팅방 삭제를 실행했을 때 화면에 실시간 반영이 되도록 filter 메서드 코드를 추가한 뒤에 그룹 채팅방 컴포넌트에서는 삭제 액션을 불러와 실행되도록 구성한 후 테스트한 결과, 그룹 채팅방 삭제 동작이 실시간 반영되어 새로고침을 하지 않아도 확인할 수 있게 되었음
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/7e6268e44841dd7d974eb6b75697d9bf77136d2f)

<br />

- 그룹 채팅방 추가 액션 추가 및 사용자 정보 타입 재사용
  - 그룹 채팅방 생성과 관련된 코드를 Zustand에 옮겨서 액션으로 구성해 주고 그룹 채팅방 생성 컴포넌트에서는 기본 동작 방지, 액션을 불러와 실행, 그룹 채팅방 생성 시에 모달창이 닫히도록 구성해 주었으며, 사용자 정보와 관련된 타입 정의 내용을 types 파일에 옮겨서 재사용될 수 있도록 구성
  - 프론트엔드
    - CreateGroupChat
      - 그룹 채팅방 생성과 관련된 코드를 삭제
        - Zustand 내용에 옮김
      - Zustand에서 구성된 그룹 채팅방 생성 액션이 실행되도록 구성
        - 그룹 채팅방 생성 액션에 입력한 제목과 사용자 정보를 전달
      - 성공적으로 그룹 채팅방 생성 시에 토글 함수가 작동해 모달이 닫히도록 구성
    - authStore
      - UserInfo 타입 정의 내용을 삭제하고, types 파일에서 가져와 사용
    - groupChatStore
      - 재사용되는 UserInfo 타입 정의 내용을 가져옴
      - 그룹 채팅방 생성 액션 타입 정의
        - 매개변수로 넘어오는 title은 string, userInfo는 UserInfo로 타입 정의하고 비동기 함수로 타입 정의
      - 그룹 채팅방 생성 액션을 추가
        - title, userInfo를 매개변수로 전달 받고 각각 string, UserInfo로 타입 정의
        - 전달받은 매개변수인 userInfo 내용에 객체 디스트럭처링을 사용해 tokenExp 내용을 제외하고 구성
        - 객체 디스트럭처링으로 구성한 내용과 매개변수로 전달받은 title을 합쳐서 새로운 객체로 구성
          - 그룹 채팅방 생성 시에 백엔드로 전달되도록 구성
          - 이 내용은 그룹 채팅방 생성 컴포넌트에서 구성했던 내용 그대로임
        - 그룹 채팅방이 생성되고 백엔드에서 응답 데이터를 전달받도록 구성
        - 새롭게 생성된 그룹 채팅방 내용이 실시간 반영이 되도록 set을 통해 그룹 채팅방 목록 업데이트
          - 이전에 구성된 그룹 채팅방 목록에 새롭게 생성된 그룹 채팅방을 추가시켜 화면에 즉시 적용되어 보이도록 구성
    - types
      - authStore에서 구성한 UserInfo 타입 정의 내용을 가져와 구성
  - Zustand에 그룹 채팅방 생성과 관련된 코드를 옮기고, 그룹 채팅방을 생성 했을 때 화면에 실시간 반영이 되도록 set을 통해 그룹 채팅방 목록이 업데이트되도록 구성한 후에, 그룹 채팅방 생성 컴포넌트에서는 생성 액션을 불러와 실행되도록 구성한 후 테스트한 결과, 그룹 채팅방 생성 동작이 실행되고 추가된 그룹 채팅방이 실시간 반영되어 새로고침을 하지 않아도 이전에 존재하던 그룹 채팅방 목록과 함께 보이게 되는 것을 확인할 수 있었다.
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/38d053383f6b97017b400dab017908d85a5246cb)

# 오늘 느낀 점

- 그룹 채팅방과 관련된 코드들을 따로 관리하기 위해 Zustand 내용을 구성하고, 실행시킨 동작들이 실시간 반영이 되도록 구성한 결과, 이제는 새로운 그룹 채팅방이 생성되면 바로 화면에 보여지며, 그룹 채팅방을 삭제하면 해당 채팅방이 화면에서 사라져 보이지 않는 것까지 모두 실시간 반영되는 것을 확인할 수 있었다. 원래라면 실시간 반영에 관련된 내용을 간단하게 정리하고 코드 구성을 해야 했는데 정리해야 한다는 사실을 잊어버리고 코드 구성을 했기 때문에, 잊어버린 정리 내용은 추가해 줘야 하고 그룹 채팅방 관련 기본 동작들이 모두 실시간 반영되며 문제없이 작동하기 때문에, 그룹 채팅방 내에서 작성할 수 있는 채팅 관련 내용을 추가하거나 그룹 채팅방 제목을 수정할 수 있는 내용을 구현해 줄 생각이다. 그룹 채팅방 초대 관련 기능도 생각을 했는데, 이 내용은 구조를 좀 더 생각해 봐야 할 것 같아서 우선 더 쉬운 기능부터 구현을 하고 그 다음에 구성을 해 볼 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 방 관련 내용 및 채팅 관련 내용 구성

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
