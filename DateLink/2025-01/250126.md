# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- \_id 에러 수정 및 그룹 채팅방 수정된 내용 실시간 반영 실패
  - 그룹 채팅방 제목을 수정한 후에 발생하는 \_id 에러를 고치기 위해 수정된 그룹 채팅방 데이터를 전달 받아 사용될 수 있도록 구성하고, 수정된 그룹 채팅방 내용이 실시간 반영되어 화면에 보여지도록 구성을 했지만 \_id 에러만 고쳐지고 실시간 반영은 제대로 적용되지 않음
  - 백엔드
    - group-chat-routes
      - 잘못된 메시지 전달 내용 수정
  - 프론트엔드
    - groupChatStore
      - 정상적으로 수정한 그룹 채팅방 내용이 넘어오는지 확인하기 위한 console.log 추가
      - groupChatForm 액션의 set 함수 수정
        - POST 요청
          - 이전에 구성한 코드를 그대로 사용
        - PATCH 요청
          - map 함수를 사용해 기존의 그룹 채팅방 배열을 순회하면서 각 채팅방을 확인
          - 수정하려는 채팅방의 \_id와 기존 채팅방의 \_id를 비교
          - 수정하려는 대상이면 기존 채팅방 데이터를 펼쳐 수정된 데이터를 덮어씌우도록 구성
          - 만약 수정 대상이 아닌 경우에는 기존 데이터를 그대로 반환하도록 구성
          - 최종적으로 수정된 데이터가 반영된 새로운 배열을 반환해 상태를 갱신하도록 구성
        - POST나 PATCH 조건을 만족하지 않을 경우, 상태를 변경하지 않고 기존 상태를 그대로 반환하도록 구성
  - PATCH 메소드 요청으로 전달받은 데이터를 기존 데이터에 덮어씌워서 실시간 반영이 되도록 구성을 했으나, \_id 에러만 고쳐지고 실시간 반영은 여전히 되지 않기 때문에 추가 수정이 필요함
    - 분명히 업데이트된 그룹 채팅방 데이터가 넘어오는 것 같은데, 어떤 부분이 정확히 원인인지 찾지 못해서 console.log를 추가해 다시 확인하고 원인을 파악해야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/6ccf8c58b0986e3cf740a51b6f5ccfba99732723)

<br />

- 그룹 채팅방 수정된 내용 실시간 반영 성공
  - 수정한 그룹 채팅방 내용이 화면에 실시간 반영되지 않는 문제가 있었지만, 백엔드에서 수정한 그룹 채팅방 정보를 업데이트할 때 \_id도 기존의 \_id로 업데이트되도록 구성하고 프론트엔드로 해당 정보를 전달해서 수정하려는 채팅방의 \_id와 기존 채팅방 \_id를 비교할 수 있게 되며 해결함
  - 백엔드
    - group-chat-routes
      - 그룹 채팅방 제목과 날짜를 업데이트하면서, \_id 내용도 업데이트되도록 구성
      - 여기서 \_id 내용을 새로운 \_id로 업데이트하는 것이 아닌, 프론트엔드에서 전달받은 기존의 \_id 내용으로 업데이트
        - \_id 내용은 변경되지 않도록 기존의 \_id 내용으로 업데이트되도록 구성
  - 프론트엔드
    - groupChatStore
      - 오류를 확인하기 위해 추가했던 console.log 내용 삭제
  - 백엔드에서 수정된 그룹 채팅방 제목과 날짜를 업데이트할 때, \_id도 함께 업데이트되며 프론트엔드로 해당 정보들이 전달되도록 구성해 주면서 정상적으로 조건부를 확인할 수 있게 되어 실시간 반영이 되는 것을 확인할 수 있었다.
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/4207d9e1e427d517e91e3810346719f1b52a69c1)

# 오늘 느낀 점

- \_id 관련 에러는 수정한 그룹 채팅방 정보를 받을 수 있도록 구성해 주면서 해결되었고, 실시간 반영되는 내용은 수정한 내용이 업데이트될 때 \_id 정보도 함께 업데이트 되도록 구성해 주고, 해당 정보를 프론트엔드로 전달해 수정하려는 채팅방의 \_id와 전달받은 \_id 내용을 확인해 일치하는 경우 기존 채팅방 데이터를 덮어씌워 업데이트하고 화면에 적용되도록 구성을 해서 해결해 주었다. 이제 채팅방 생성, 수정, 삭제와 관련된 내용은 모두 구성이 되었고, 로그인한 사용자가 생성한 채팅방만 보여지도록 구성을 해줬기 때문에 자신이 생성한 채팅방에서 채팅을 입력할 수 있는 입력란과 입력한 채팅이 화면에 출력되어 보여지도록 채팅 관련 내용을 추가해 줘야 한다. 그리고, 채팅 관련 내용을 추가한 후에 다른 사용자를 초대할 수 있도록 기능을 추가하고 다른 사용자를 초대해 함께 채팅을 나눠볼 수 있도록 구성을 해 봐야 한다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 방 관련 내용 및 채팅 관련 내용 구성

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
