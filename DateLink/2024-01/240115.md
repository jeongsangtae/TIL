# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 오류 메시지를 화면에서 출력 그리고 오류 메시지 전달 방식 변경
    - 잘못된 입력에 대해 오류 메시지를 화면에 보이도록 구성
      - 현재는 임시로 모달 창에서 보이도록 구성을 해놓았는데, 이건 또 다른 모달창이 뜨도록 하거나, 현재 상태대로 모달창에서 보이도록 해주면서 CSS만 수정하는 방향으로 생각중
    - error useState를 추가해서, 기존에는 false로 지정하고 오류와 관련된 데이터가 넘어오면 error를 true로 지정하고 해당 오류 메시지를 또 다른 useState에 저장해서 보여주는 방식으로 구성
    - 백엔드에서 json을 통해서 message를 전달하는데 문자열로 구성해서 전달하는 방식에서 req.session.inputData를 전달해서 해당 inputData에 저장된 message를 보여주는 방식으로 구성
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/c9db5f11f77e67ea2aecb2849e091b12ec255047)

  <br />

  - 에러 핸들링 수정 및 세션 만료 추가
    - 넘어오는 201 status만 확인하고 있기 때문에, 다른 2XX 범위의 status 코드도 성공을 의미하기 때문에 `!response.ok`로 먼저 확인하고 넘어오는 오류 메시지를 저장하고, 만약 `!response.ok`가 false가 된 경우에는 회원가입을 완료하고 form의 내용을 초기화하도록 구성
    - session에서 clearExpired, checkExpirationInterval, cookie를 추가해서 세션 만료와 관련된 내용을 추가
      - clearExpired : 만료된 세션을 주기적으로 정리할지 여부를 나타냄
        - true로 설정해서 주기적으로 정리하도록 해준다.
      - checkExpirationInterval : 세션 만료를 확인하는 간격을 밀리초 단위로 나타냄
        - 현재 여기에서는 `60 * 60 * 1000`으로 설정해놓음(1시간)
      - cookie.maxAge : 세션 쿠키의 유효 기간을 밀리초 단위로 나타내는데 여기서는 `2 * 60 * 60 * 1000`으로 설정(2시간)
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/9d3814beac4840f2a9d9f7c0175c8a762e5a6ab8)

  <br />

  - 회원가입에서 잘못된 입력 오류 처리 내용 추가
    - 잘못된 입력과 이름 6자리 초과하는 내용만 구성해놓았지만, 비밀번호를 6자리 이상 입력하도록 하는 오류 처리 내용과 이메일이 이미 DB에 존재하는지 확인하고 다른 이메일을 입력하도록 하는 오류 처리를 추가
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/e57abaf42e455f04d1a003045efa692fc50a1fb4)

<br />

- 추가해야 할 내용
  - 회원가입이 된 후에 홈으로 이동하거나 form이 사라지고 회원가입 완료 페이지로 이동 또는 회원가입 완료 모달창이 뜨도록 구성을 하는 방향으로 생각중
    - 일단 회원가입이 완료되고 form이 닫히도록 해야 함
      - 최우선 순위
    - form이 닫히고 그 후에 어떠한 동작으로 이어질지 정해야 함
  - 회원가입 form에서 잘못된 입력을 제출 했을 때, session에 데이터가 저장되는데, 기존의 session 데이터에서 업데이트되는 방식이 아닌 매번 제출할 때마다 새로운 session이 추가되고 있기 때문에 백엔드 코드에서 수정이 필요하다.
    - 계속 원인을 찾아보려고 이것저것 시도해보았지만 아직 어떤 코드가 정확히 원인인지 찾지 못해서 하나씩 천천히 테스트가 필요함

# 오늘 느낀 점

- 오류 메시지가 화면에 출력되도록 하기 위해서 useState를 통해서 조건부로 보이도록 해주었다. 현재는 모달 창의 회원가입 페이지 제목 아래에 보여지고 있는데 이 내용은 변경을 할 지, 그대로 유지할 지는 좀 생각이 필요하다. 오류 메시지가 화면에 출력되도록 하는 것은 좋지만 한번 출력되고 난 후에 정상적인 입력을 통해서 회원가입이 된 후에는 해당 오류 메시지가 사라지지 않아서 이 부분은 수정이 필요하다. 회원가입이 된 후에 모달창이 사라지고 다른 페이지로 이동하거나 로그인 모달창이 보여지면 좋을 거 같은데, 이런 방식으로 구성하면 오류 메시지가 모달창에서 보여지고 난 후, 정상적인 입력을 진행해서 회원가입을 해도 사라지지 않는 오류 메시지 관련 문제도 자연스럽게 해결이 될 것 같다는 생각이 든다. 그리고 세션에서 뭔가 또 다른 문제가 생긴 것 같아서 이 부분도 하나씩 테스트해보면서 문제를 찾아야 한다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
