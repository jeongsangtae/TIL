# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - signup input에서 잘못된 입력 시, 에러 메시지 출력하기 위해 코드 수정
    - 백엔드에서 res.redirect가 아닌, res.json을 통해서 message를 전달하도록 구성
      - 코드를 구성하고 나중에 알아챈 사실이지만, 이 코드는 잘못된 코드로 수정이 필요함
    - 프론트엔드에서 정상적으로 오류 메시지를 출력할 수 있는지 loader 함수를 통해서 불러오고 테스트
      - 테스트 해본 결과 오류 메시지를 출력할 수 없었음
    - action 함수에서 좀 더 세부적으로 status를 판별해서, 일단은 콘솔에서 오류 메시지가 뜨는지 확인하도록 구성 추가
      - 정상적인 상태가 들어오면 회원가입 성공과 회원가입 모달 페이지에 있도록 구성
      - 잘못된 상태가 들어오면 콘솔에서 오류를 메시지를 출력하도록 구성
      - 이 코드는 정상적으로 작동하지만, 백엔드 코드에서 json을 통해서 항상 201 status만 전달하도록 구성해서 잘못된 입력과 옳은 입력 모두 response.ok 되기 때문에 수정이 필요하다.
      - 결과적으로는 이 코드도 좀 잘못된 코드라고 볼 수 있다.
    - 오류 메시지를 회원가입 모달 창에서 확인하려고 했으나, 제대로 보여지지 않아서 먼저 콘솔에서 어떤 부분이 문제인지 확인하려 했지만 콘솔에서도 제대로 확인이 되지 않아서 코드를 수정해줘야 한다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/e8712dac2004bf90b4b5a5b2d99ceed2069cdaae)

  <br />

  - 상태에 따라 콘솔에 오류 메시지 출력
    - 앞에서 작성한 코드가 조금 문제가 있어서 그 부분들을 수정해주었다.
    - 백엔드에서 res.json을 통해서 항상 201 status를 전달하고 있었기 때문에 잘못된 입력에서 메시지를 전달할 때는 res.status(400).json을 통해서 400 에러를 전달하도록 구성
    - 프론트엔드에서 받아오는 status가 201이라면 정상적인 회원가입이 되어야 하기 떄문에 기존의 코드인 회원가입 성공이라는 메시지가 콘솔에 출력되며, 만약 201 status가 아니라면 메시지를 전달받고, 오류 메시지를 콘솔에서 출력
    - `return null`을 통해서 반환 값이 없을 때 오류가 발생하지 않도록 구성
      - "You defined an action for route "0-4" but didn't return anything from your `action` function. Please return a value or `null`."
      - action 함수에서 반환값이 없거나 null을 반환하고 있지 않고 있다고 오류가 발생 하기 때문에 `return null`을 추가해서 오류를 고쳐준다.
      - 명시적으로 함수의 반환 값을 명시적으로 지정하는 것이 코드의 가독성과 유지보수성을 높이기 때문에 반환 값이 없더라도 `return null` 같은 코드를 추가하는 것이 좋다.
      - `return`만 사용하면 `undefined`가 반환되기 때문에 명시적으로 `return null`을 사용하는 것이 반환 값이 없음을 나타내는 더 명확한 표현이기 때문에 코드의 가독성을 높일 수 있다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/658c2a0cddbca0f16dbf1353c60831bcad21ffb9)

  <br />

  - 콘솔에 오류 메시지 출력 코드 수정(400 status 삭제)
    - 다시 테스트해보고 조금 수정을 진행했는데, 백엔드 코드에서 res.status를 통해서 굳이 400 status를 전달하지 않아도 기본적으로 200 status 코드를 전달하기 때문에 프론트엔드의 if문에서 201이 아니면 조건문을 통과하지 못하고, 오류 메시지를 콘솔에 출력하게 된다.
    - if문에서 조금 차이를 주기 위해서 201이 정상적으로 status로 넘어오면 회원가입 성공 메시지와 함께 signup-success 페이지로 이동해 회원가입이 되었다는 것을 알려주고, 200이 넘어오면 콘솔에 오류 메시지를 보여주고, signup 모달 페이지에 그대로 있도록 해주었다.
    - 사실 더 명확하게 해주는 것은 400 status를 추가하는 것이 좋지만, 콘솔에서 에러가 뜨는 것처럼 보여서 일단은 제거해서 구성해보았다.
      - 200도 성공으로 취급하기 때문에 사실 옳은 status 전달이 아닌 것 같지만, 콘솔에서 400 status 에러 메시지 뜨는 것이 좀 불편해서 일단은 이 상태로 유지할 생각
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/faf82b829fdb4a969fdeb7d40984894b835b6ca9)

# 오늘 느낀 점

- 잘못된 입력에 대해 프론트엔드의 화면에서 출력이 되도록 하는 것이 목표였는데 제대로 구현이 되지 않았다. 콘솔에서 출력되도록 하는 것은 어떻게든 구성을 했는데 내가 생각한 내용과는 달라서 더 수정이 필요하다. 그래서 생각한 방법으로 어차피 회원가입과 로그인을 따로 컴포넌트로만 구성해서 모달을 사용해서 띄우고 라우트는 사용하지 않을 생각을 하고 있기 때문에 그 작업을 해주고 난 후에 다시 잘못된 입력에 대한 조건부 오류 메시지 출력을 처리하는 방향으로 생각을 해보고 있다. 현재 라우트와 action, loader 함수를 통해서 구성되어있는 상태에서 잘못된 입력으로 회원가입 내용을 제출하면 sessions에 데이터가 2개씩 저장되는 문제도 있어서 바로 라우트에서 회원가입과 로그인을 삭제하고, 일반 컴포넌트로 구성해서 fetch 함수를 추가하는 작업을 해야 할 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
