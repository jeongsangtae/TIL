# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 회원가입 form에서 입력한 데이터를 저장하는 로직 추가
    - useState를 추가해서 객체로 구성하고 한번에 form에서 입력한 데이터를 저장하도록 구성
    - onChange 이벤트 핸들러 함수를 따로따로 쓰지않고, 하나만 사용하고 그 안에서 어떤 input에서 입력을 한 것인지 알 수 있게 "name" 속성을 사용해서 구분
    - form이 제출되고 난 후에 콘솔을 통해서 입력된 내용을 확인하고, form안의 input을 빈 문자열로 초기화
    - 이전에 사용하던 Form 컴포넌트와는 다르게 form에서는 onSubmit prop을 사용해서 구성
    - 현재는 DB에 저장하지 않고, 일단 console에서 form을 통해서 제출된 데이터를 확인할 수 있다. 이제 백엔드와 연결해서 DB에 데이터가 저장되도록 구성해야 함
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/ecdb3245bece7b5f75816175d8b26d89d17f4994)

  <br />

  - 회원가입 데이터를 DB에 저장 및 자잘한 내용 수정
    - name 속성을 input에서 제거하고 id를 key로 사용하려고 했지만, 백엔드와 연결하고 확실하게 구분하기 위해서는 name 속성을 사용하는 것이 좋다고 생각해서 다시 추가
    - input의 id를 딱히 현재는 사용하지 않지만, CSS에서 특정 부분을 편집하려고 할 때 사용할 수도 있기 때문에 남겨놓는 걸로 유지
    - 사용자 이름을 name으로 설정해놓았는데, name 속성과 겹치기 때문에 조금 혼동할 수 있어서 username으로 수정해주었다.
    - 백엔드에서도 조금 이름들을 변경해주었는데, 프론트엔드에서 name으로 사용하던 부분을 username으로 변경해주었기 때문에 그 내용에 맞게 백엔드에서도 변경해주고, `["confirm-email"]` 이런식으로 사용하던 부분도 confirmEmail로 변경해주었다.
      - js에서는 camelCase가 기본 방식이기도 하고 개인적으로 `-` 대쉬 기호 때문에 `[]` 이런식으로 대괄호를 사용해서 안에 문자열 내용을 넣는 방식은 별로 좋아하지 않기 때문에 변경
      - 원래도 camelCase를 사용해서 하는 것이 맞았으나, 이전에 게시판에서는 id를 사용해서 연결했는데 HTML에서는 또 대쉬 기호를 사용하기 때문에 서로 기본 관습이 달라서 좀 혼란스럽게 작성을 했던 것 같아서 통일 시키는 방향으로 변경해주었다.
    - 백엔드에서 잘못된 input 내용에 대해 400 에러를 전달하며 오류 메시지가 콘솔에서 뜨도록 구성을 했다.
      - 기존에 status(400)을 그냥 제거하고 오류가 발생해도 200을 전달하며 오류 메시지를 전달하도록 했으나, 실패한 입력이지만 200 status를 전달하는건 사실 말이 안된다고 생각이 되기 때문에 400 status를 추가해서 전달하도록 변경
    - 이전에 라우트를 사용해서 구성한 fetch 함수의 내용을 가져와서 구성
      - 테스트해본 결과 문제없이 백엔드와 연결되어 DB에 데이터가 저장되는 것을 확인할 수 있었다.
      - 회원가입이 완료된 후에 form 초기화도 정상 작동된다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/cdfafc719243ae340e0cf9c5f13a9dd5e41f19db)

<br />

- 추가해야 할 내용
  - 잘못된 입력에 대한 오류 메시지를 화면에 보이도록 구성
    - 백엔드에서 해당 내용을 전달해서 구성할 것인지 또는 백엔드에서는 오류 코드만 전달하고 프론트엔드에서 설정해서 해당 내용을 보여주도록 할 것인지 정해야 함
  - 회원가입이 된 후에 홈으로 이동하거나 form이 사라지고 회원가입 완료 페이지로 이동 또는 회원가입 완료 모달창이 뜨도록 구성을 하는 방향으로 생각중
    - 일단 회원가입이 완료되고 form이 닫히도록 해야 함
      - 최우선 순위
    - form이 닫히고 그 후에 어떠한 동작으로 이어질지 정해야 함
  - 백엔드 코드의 session에서 만료 시간을 설정해주는 코드를 추가해야 함
  - 백엔드에서 이름 입력만이 아닌, 다른 이메일이나 비밀번호 같은 입력에서 잘못된 입력을 했을 경우의 오류 처리도 추가 해야 함

# 오늘 느낀 점

- 회원가입 내용을 컴포넌트에서 구성하고 모달창으로 띄우며, 입력한 내용이 form을 통해서 정상적으로 DB에 저장되는 것을 확인했다. 잘못된 입력에 대해 오류가 발생하는 것도 확인이 되었으며, 이제 이 오류를 계속 백엔드에서 처리해서 오류 메시지를 프론트엔드로 전달하도록 할 것인지, 또는 오류 status만 전달하고 프론트엔드에서 해당 오류에 대해 메시지를 설정하고 보여주는 방식을 할 지 정해야 한다. 그리고 이전에 Form 컴포넌트와 라우트를 사용해서 회원가입 데이터를 DB에 저장할 때는 잘못된 입력이 발생하면 session에 2개의 데이터가 저장되는 문제가 발생했는데 이제는 정상적으로 잘못된 입력에 대해 하나의 session 데이터만 저장되고, 정상적인 입력에 대해서는 session에 데이터를 저장하지 않기 때문에, session과 연관된 내용이 정상적으로 이루어지는 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
