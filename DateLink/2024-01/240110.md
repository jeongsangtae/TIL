# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - signup input에서 에러 메시지 출력 및 loader 함수 추가
    - 회원가입 입력창에서 잘못된 입력을 진행하면 어떤 입력이 잘못되었는지 알려주는 에러 메시지를 출력하기 위해서 로직을 추가
      - 현재는 정상적으로 작동하는지 확인하기 위해 이름과 관련된 에러메시지만 추가해서 진행중
    - loader 함수도 추가해서 잘못된 입력에 따른 메시지가 전달되도록 했으나 아직 제대로 작동하지 않는 상황
    - 테스트를 해본 결과 아직 제대로 작동이 되지 않아서, 코드를 하나씩 수정해보면서 문제를 찾아봐야 함
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/323bd394793e0bcd4a2b196f4a10419380540849)

  <br />

  - session 및 env 추가 그리고 자잘한 오류 수정
    - 위에서 작업한 내용의 문제를 찾아보니, 세션을 추가하지 않은 상태로 진행하려고 하기 때문에 req.session 객체가 undefined 상태이기 때문에 session 내용을 구성해주었다.
    - session.js 파일에 express-session, connect-mongodb-session을 사용해서 구성
      - secret 부분에서는 secretKey를 사용하는데, secretKey는 .env 파일에서 따로 구성해놓은 키와 값을 환경 변수로 가져와서 사용
      - 나머지 설정들은 예전에 게시판을 만들 때 사용했던 내용을 참고해서 구성
      - mongodbUrl은 미리 동적으로 구성해서 나중에 배포할 때 추가 작업을 하지않도록 해주었다.
    - 기존의 게시판 코드를 가져와서 조금씩 변경해주었는데, 예전에는 다 기본 함수로 구성했지만, 화살표 함수를 배운 후로는 화살표 함수만 사용했기 때문에 그 부분도 변경해주었다.
    - Signup과 관련된 loader 함수에서 fetch 함수의 url이 잘못되어 있어서 posts -> signup으로 변경
    - 백엔드의 app.js에 session 내용을 require해서 미들웨어를 구성해서 사용
    - 미들웨어까지 구성해서 테스트해본 결과 오류 발생
      - "express-session deprecated req.secret" 이러한 오류가 발생하는데 분명 env 파일의 내용을 제대로 가져와서 사용하고 있는 것 같은데 제대로 원인 파악이 되지 않아서 확인이 필요
      - 게시글까지 보이지 않는 오류가 발생해서 추가한 코드에서 어떤 부분이 문제인지 하나씩 찾아봐야 함
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/eb40ff02fd79cc9aa8754feb18273d5783f3d1ae)

  <br />

  - session 오류 수정(dotenv 추가)
    - 오류를 해결하기 위해 확인해본 결과, createSessionConfig의 secret에서 문자열로 된 내용을 구성해서 테스트를 진행했을 때는 정상적으로 작동하는 것을 확인했다.
      - env, 즉 환경변수를 가져와서 사용하면 오류가 발생하고 있는 상황으로, 이 문제는 환경변수의 내용을 가져오지 못해서 secret에서 내용을 제공해달라는 오류 메시지이기 때문에 dotenv 라이브러리를 설치하고 session에서 사용해서 해결해주었다.
      - dotenv 라이브러리를 통해서 env 파일내의 환경변수를 정상적으로 읽을 수 있게 되고, secret에 관한 문제가 해결되면서 오류 메시지가 더 이상 출력되지 않게 되었다.
    - 추가로 env의 환경변수를 index.js를 통해서 가져오는 부분도 수정해서 index.js 파일을 삭제하고 env 파일에서 바로 가져오도록 해주었으며, sessionStore 함수에서 DB 이름도 문제가 있었는데, 이전에 사용하던 게시판의 이름인 "bulletin-board"로 되어있었기 때문에 현재 작업중인 DB 이름인 "mini-community-platform"로 수정해주었다.
    - 에러로 발생하는 문제는 다 해결을 한 상황으로 정상적인 입력 값은 저장되는 것을 확인할 수 있었지만, 잘못된 입력 값에 대한 에러 메시지는 출력되지 않는 것을 확인할 수 있었다.
      - 잘못 입력된 내용이 저장되지는 않았지만 어떠한 오류 메시지도 없이 회원가입이 되었다는 페이지로 이동하기 떄문에 이 부분을 수정해주어야 한다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/0d3d26e99b4b46edade5691ab41f263b0de41dfd)

# 오늘 느낀 점

- 회원가입에서 잘못된 입력에 대해 에러 메시지를 전달하려고 했는데 처음에는 단순하게 loader 함수를 추가하는 것으로는 구현할 수 있다고 생각했으나, loader 함수만으로는 구현할 수 없었고 에러 메시지를 보여주기 위해서는 좀 더 디테일하게 내용을 구성해줘야 가능한 기능이라고 생각이 된다. 현재 session을 구성하고 오류가 발생해서 session의 오류를 해결했을 뿐 아직 목표로 했던 기능을 추가한 것이 아니기 때문에 잘못된 입력에 대해 오류 메시지를 보여주는 부분의 로직을 어떤 방식으로 수정해야 출력이 되는지 좀 더 여러 작업을 시도해봐야 할 것 같다. 현재 생각해본 방법으로는 오류가 발생하고, 해당 오류 메시지를 백엔드에서 프론트엔드로 전달해서 그 오류 메시지를 보여주는 방식을 생각해봤는데 이 방법은 백엔드에서 코드를 미리 작성해서 넘겨주는 방법이며, 다른 방법으로 프론트엔드의 라우트와 loader 함수에서 백엔드를 통해서 넘어오는 오류를 처리하고 프론트엔드에서 오류 메시지를 관리하고 보여주는 방식, 이렇게 두가지 방법을 생각해봤는데 코드를 조금씩 수정하면서 어떤 방식이 편하고 괜찮은지 테스트해봐야 할 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
