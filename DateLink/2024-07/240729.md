# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 채팅 컨테이너에서 발생하는 1px 오차 오류를 해결
    - 채팅을 입력하면 1px 증가하고 채팅을 제출하면 1px이 다시 감소하는 문제가 있었는데, 이 문제를 해결하기 위해서 여러 방법을 테스트해보고 최종적으로 CSS 구성으로 해결해주었다.
    - 프론트엔드 구성
      - 테스트를 위한 lineHeight 추가
      - 문제 해결을 위해서 useEffect에서 chatContainer 높이를 측정하는 console.log 추가
        - chatContainer 높이를 감소시키는 내용 앞뒤로 console.log를 추가해서 확인하도록 구성
      - inputChangeHandler 함수에서 textarea 높이 확인을 위한 console.log 추가
        - 높이 변화로 어떤 문제가 생기는지 확인하기 위해서 console.log 추가
      - if문의 조건부와 textarea 높이를 동적으로 적용시키서 테스트하기 위해서 내용 추가
        - 160px의 고정 값이 아닌, lineHeight \* 10을 사용해서 테스트
      - textarea에서 style에 테스트 값인 lineHeight을 적용
        - 문제해결이 되는지 확인하기 위해서 lineHeight 값을 추가
        - 이 내용으로 1px 오차가 해결되는 것을 확인
    - CSS 구성
      - user-messages-container
        - height가 적용되지 않는 것을 확인하고 주석처리
      - input-container textarea
        - font-size와 border-bottom-left-radius 내용을 삭제
        - 프론트엔드에서 테스트해보고, line-height 값만 추가하면 해결되는 것을 파악하고 프론트엔드 추가하는 것 대신에 line-height 값으로 1rem을 추가
    - 테스트 결과, 채팅 입력시에 1px 증가하고 채팅을 제출하면 1px이 다시 감소하는 문제가 해결되어 채팅 입력과 제출시에 UI가 그대로 유지되는 것을 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/0c3c671ff58fcdced72464c5f7834eeb27971a58)

  <br />

  - 새로운 메시지, 맨 밑으로 이동하는 버튼 위치가 textarea 늘어남에 따라서 자동으로 이동되는 내용 추가
    - textarea가 늘어나는 것에 따라서 채팅 컨테이너는 줄어들지만 새로운 메시지와 맨 밑으로 이동하는 버튼 위치가 함께 이동되지 않고, 고정되어서 textarea 내부에서 보여지기 때문에 textarea가 늘어날 때 버튼들이 함께 이동되도록 내용을 추가해주었다.
    - 프론트엔드 구성
      - 새로운 메시지와 맨 밑으로 이동하는 버튼을 감싸는 div에서 사용될 ref 내용 추가
      - useEffect에서 buttonContainer 높이를 측정하고 증가시키는 내용 추가
        - buttonContainerRef의 현재 값을 가져오는 변수 추가
        - 채팅 컨테이너 높이를 줄이는 동시에, 버튼 컨테이너를 textarea 높이에 +10px만큼 증가시켜서 textarea 높이가 증가할 때 함께 증가되며 이동되도록 구성
      - 새로운 메시지와 맨 밑으로 이동하는 버튼을 감싸는 div 추가
        - 해당 버튼들을 묶고, 높이를 측정할 수 있게 ref 내용 사용
    - CSS 구성
      - buttons-container
        - position에 absolute 구성, right, display, flex-direction, z-index 내용을 추가
        - 이 내용들로 인해서, 버튼들이 textarea에 맞춰서 함께 이동됨
      - bottom-button
        - bottom을 0.1rem으로 변경해서 textarea와의 간격을 줄여줌
    - 테스트 결과, textarea가 늘어날 때 새로운 메시지와 맨 밑으로 이동하는 버튼이 textarea 위쪽 위치에 맞춰서 함께 이동되는 것을 확인할 수 있었다.
      - 맨 밑으로 이동되는 버튼 위치는 문제가 없는데, 새로운 메시지 버튼이 오른쪽에 딱 붙어 있고 세로가 아닌 가로로 모양이 보이기 때문에 이 부분에 대한 수정이 필요함
      - 추가로, 새로운 메시지와 맨 밑으로 이동하는 버튼에서 필요없는 CSS 내용을 삭제를 해줘야 함
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/618d8a924780e6deb1a37a6d32f74fc9319c382a)

<br />

- 추가 및 해결 해야 할 내용
  - 채팅과 관련된 내용 구성
    - 채팅창에서 사용되는 함수 이름 변경도 생각을 해봐야 하는데, 좀 더 명확하게 표현할 필요성을 느낌
  - 컴포넌트를 분리해줄만한 곳이 있는지 확인해봐야 함
    - 컴포넌트 분리만이 아닌, 조건부나 이런 내용에서 중복된 부분을 줄이고 코드 가독성을 향상 시켜줘야 함
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - 함수 이름에서 헷갈리는 부분이나, 명확하게 해줘야 할 부분을 찾아서 수정해야 함
  - 전체적으로 코드에 주석을 추가해서 어떤 코드가 어떤 기능을 하는지 알 수 있도록 해줘야 함
  - ul 요소 안의 자식이 li가 아닌, div나 프래그먼트로 사용되는 부분을 수정해야 함
  - 채팅 부분에서 엔터를 눌러서 다음 라인으로 넘어가서 채팅이 입력되도록 해야 함
    - 이 부분은 수정해서 엔터를 통해서 제출하고, 시프트 + 엔터를 통해서 다음 라인으로 넘어가도록 구성
  - Chats 컴포넌트에서 많은 내용이 모아져 있는 것 같아서 컴포넌트 분리를 고려해야 함
    - 관리자 채팅인 AdminChats도 확인해줘야 함
  - 답글 추가와 수정 컴포넌트를 합치는 것을 다시 생각해봐야 함
    - 이 부분은 결국 분리하는 것으로 결정을 했었는데, 추가로 다시 확인이 필요함
  - 페이지로 구성되어있는데, action 함수가 사용되지 않는 부분을 확인해야 함
  - 새로고침했을 때, 채팅창이 한번 열리면서 닫히는 문제를 해결 해야 함
  - 채팅에서 입력한 내용이 그대로 보여지도록 수정해야 함
    - font-size로 조절하기 때문에, 이 부분에 대한 수정이 필요
    - 다른 방법이 있다면 그 방법을 찾아서 시도해봐야 함

# 오늘 느낀 점

- 1px 오차 문제를 프론트엔드에서 해결을 하려고 했는데, 여기서 계속 해결되지 않아서 여러 방법을 테스트해본 결과 프론트엔드의 textarea에 line-height를 조절해서 문제가 해결되었기 때문에 이 내용을 CSS에 추가해서 처리해주었다. textarea가 늘어나면서 새로운 메시지와 맨 밑으로 이동하는 버튼이 함께 이동되어야 하는데 이동되지 않는 문제를 발견하고 현재는 함께 이동되도록 해결은 해줬지만, 새로운 메시지 버튼이 오른쪽에 붙어서 UI가 망가지기 때문에 이 부분을 해결해줘야 한다. 이 부분을 해결해주면 새로고침 했을 때 채팅창이 한번 열리고 닫히는 모션이 없도록 해줘야 하고, 채팅 제출 버튼의 위치도 변경해서 하단에 위치하도록 수정해줘야 한다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
