# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 사용자 리스트에 스크롤 관련 로직을 추가하고 CSS 추가 및 em으로 사용되는 내용 rem으로 수정
    - 사용자 리스트에서 사용자가 많이 추가된 경우, 스크롤이 없어서 이동하지 못하는 문제를 해결해주기 위해서 스크롤 관련 로직을 추가하고 CSS도 구성해주고, em으로 사용되는 부분에서 rem으로 변경해주었다.
    - 프론트엔드 구성
      - AdminUserList
        - useRef를 추가하고, ul 요소에서 ref를 사용해서 내용을 측정할 수 있도록 구성
        - 여기서는 채팅창과 다르게 맨 아래 이동과 같은 내용이 필요없기 때문에 간단하게 스크롤이 이동할 수 있도록 구성
      - AdminUserItem
        - 사용자 이메일, 마지막 메시지 날짜는 다크 모드에서 따로 색 변화가 없기 때문에 className으로 구성된 테마 관련 내용 삭제
    - CSS 구성
      - AdminUserList
        - user-item
          - ul 요소에 높이는 100%, overflow-y를 auto로 구성해서 스크롤이 생기도록 구성
        - 스크롤바와 관련된 설정들을 가져와서 사용
          - "-webkit-scrollbar"와 관련된 track, thumb 등 내용 추가
          - 채팅방에서 사용하던 내용을 가져와서 구성하고 필요한 수치는 변경
      - AdminUserItem
        - user-name
          - 폰트의 1.2em을 1rem으로 변경
        - user-email
          - 0.9em을 0.75rem으로 변경
        - last-message-content
          - 1em을 0.825rem으로 변경
        - last-message-date
          - 0.8em을 0.675rem으로 변경
    - 테스트 결과, 사용자 리스트에서 사용자가 많이 추가되면 스크롤이 생성되고, 이 스크롤을 통해서 선택하지 못했던 사용자 채팅방까지 모두 들어갈 수 있게 되었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/58450dee837d88f54eeff577d9c3e0c212262f1c)

  <br />

  - 사용자 이름 데이터를 AdminUserItem -> AdminUserList -> AdminChats 순서로 전달 및 AdminChats에 닫기 버튼을 추가하고, 닫기 버튼과 사용자 이름 부분의 CSS 추가
    - 사용자 이름 데이터를 가져오기 위해서, AdminUserItem에서 AdminUserList로 사용자 \_id와 함께 사용자 이름 데이터를 전달하고, AdminUserList에서 AdminChats로 전달해서 사용하도록 구성해주고, AdminChats에서 채팅방을 닫는 버튼을 추가해주고 사용자 이름이 표시되도록 구성해준 후에 CSS 내용까지 추가로 구성해주었다.
    - 프론트엔드 구성
      - AdminUserItem
        - prop으로 전달받은 내용에 userId과 name이 함께 전달되도록 구성
      - AdminUserList
        - AdminUserItem으로부터 전달받은 사용자 이름을 저장할 useState 추가
        - 방으로 이동하는 함수의 매개변수에 userId와 name을 추가하고, 새롭게 추가한 useState에 사용자 이름이 저장되어 업데이트되도록 구성
        - AdminChats가 열리면 사용자 이름, 채팅창 toggle 함수와 관련된 내용이 함께 전달되도록 구성
      - AdminChats
        - 닫기 버튼에 사용될 아이콘 추가
        - 닫기 버튼과 사용자 이름을 하나의 div로 묶어서 구성
          - 다른 className을 구성하지 않고, 이 div에 추가해서 CSS를 구성
        - 닫기 버튼은 button 요소 대신에, 아이콘으로 사용하도록 구성
    - CSS 구성
      - chat-room-header
        - 수평이 중앙에 맞도록 해주고, 이름이 가운데에 위치할 수 있도록 position을 추가, 전체적인 공간을 주기 위해서 margin을 주고 아래쪽 margin은 조금 적게 구성
        - 색은 배경색을 사용하도록 구성
      - chat-room-header svg
        - 백그라운드와 border는 없도록 구성하고 크기는 1rem으로 구성
        - 커서 추가
      - chat-room-header div
        - position에 absolute를 사용하고, left와 transform을 통해서 사용자 이름이 중앙에 위치하도록 구성
        - 폰트는 1rem, bold를 사용해서 강조되도록 구성
        - 다크모드에서 svg와 div 모두 흰색으로 보이도록 구성
      - admin-messages-container
        - 메시지가 저장되는 채팅창에서 margin을 0으로 구성해서 전체적인 공백을 없애고, 하단에만 2rem으로 입력창과 약간 간격이 있도록 구성
      - admin-messages-container::-webkit-scrollbar-track
        - 스크롤이 위 아래로 margin이 적용되도록 해주고 좌우는 적용되지 않도록 구성
    - 테스트 결과, 채팅창을 열고 닫기 버튼을 누르면 채팅창이 축소되며 사라지는 것을 확인할 수 있었고, 닫기 버튼과 사용자 이름은 채팅창의 위쪽에 구성되어있으며 닫기 버튼은 왼쪽, 사용자 이름은 오른쪽에서 중앙에 보이도록 위치를 변경해주었다.
      - 채팅창이 닫기 버튼으로 사라지는 것은 좋지만, 애니메이션이 좀 어색한 느낌이 들어서 이 애니메이션을 수정해서 채팅창이 열릴때는 오른쪽에서 왼쪽으로 보여지고, 닫힐때는 왼쪽에서 오른쪽으로 사라지도록 구성해볼 생각이다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/256704d4b3e63cd05f43ba30f68940005199d178)

<br />

- 추가 및 해결 해야 할 내용
  - 채팅과 관련된 내용 구성
    - 사용자 계정이 삭제될 때, 해당 채팅도 함께 사라지도록 구성을 변경해줘야 함
    - 채팅창에서 사용되는 함수 이름 변경도 생각을 해봐야 하는데, 좀 더 명확하게 표현할 필요성을 느낌
    - 사용자 리스트에서 채팅창이 열리고 닫히는 애니메이션을 수정해야 함
    - 관리자 \_id와 이름이 필요한지 확인하고 필요없다면 삭제하는 것도 고려를 해봐야 함
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - ul 요소 안의 자식이 li가 아닌, div나 프래그먼트로 사용되는 부분을 수정해야 함

# 오늘 느낀 점

- 사용자 리스트에 많은 사용자가 추가되면 스크롤이 생성되어 이동하고 사용자를 선택할 수 있게 되었고, 사용자 리스트에서 하나의 사용자를 클릭해서 채팅방을 열면 닫는 버튼이 보여지고, 그 옆에는 어떤 사용자와의 채팅인지 알아볼 수 있는 사용자 이름이 출력되도록 구성해주었다. 그리고 닫기 버튼을 통해서 채팅방을 닫고 다른 사용자와 채팅할 수 있게 되었는데, 문제는 닫기와 여는 애니메이션이 이전에 사용하던 애니메이션을 그대로 사용하고 있기 때문에 이 부분을 수정해서, 열릴 때는 오른쪽에서 왼쪽으로 열리는 방식을 생각하고 있고 반대로 닫힐 때는 왼쪽에서 오른쪽으로 닫히도록 구성을 해줄 생각이다. 또 다른 방식으로 카톡과 유사하게 가운데 쯤에서 아래에서 위로 열리고, 닫힐 때는 위에서 아래로 사라지는 방식도 생각을 해보았는데, 이 둘 중에 하나로 구성을 해서 좀 더 자연스러운 애니메이션이 적용되도록 해줄 생각이다. 이 애니메이션을 구현해주고 사용자 계정이 삭제될 때 채팅도 함께 사라지도록 구현해줄 생각인데, 생각한 내용으로 사용자 \_id 내용을 가지고 있으니까 이 내용을 가지고 사용자 채팅 컬렉션에서 일치하는 항목을 찾아서 모두 삭제하도록 구성을 하면 될 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
