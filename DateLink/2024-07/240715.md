# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 선택한 항목을 검색하도록 구성 (select 요소 사용) & 페이지네이션 에러 수정
    - 게시글 검색에서 입력한 내용을 제목, 내용, 이름 모든 항목에서 검색하는 것이 아닌, select 요소를 통해서 선택을 하고 해당 항목에서 일치하는 내용을 찾도록 구성을 변경해주었고, 검색한 내용이 5개 이하일 때 페이지네이션 기능이 작동하는 에러도 수정해주었다.
    - 백엔드 구성
      - filter를 통해서 검색한 갯수를 파악해서 페이지네이션 기능이 작동하도록 countPosts의 countDocuments 부분에 filter 변수 추가
      - 검색 필드를 쿼리 파라미터에서 추출하고, 쉼표로 분리하여 배열로 만들도록 구성
        - 기본 값은 빈 배열
      - 필터 내용을 변경
        - 기본 필터는 빈 객체로 구성
        - 검색어와 필터가 있을 경우, 선택된 필드에서 검색어를 찾도록 필터를 구성
        - 검색어만 있는 경우에는 제목, 내용, 이름 필드에서 검색어를 찾도록 필터를 구성
    - 프론트엔드 구성
      - 선택된 검색 필드를 저장할 useState 추가
        - 초기 값은 title로 설정
      - 검색 필드로 사용할 옵션들을 정의한 배열을 추가
        - 제목, 내용, 이름으로 구성
      - fetchData 함수에서 searchField를 쿼리 파라미터로 전달
        - URLSearchParams를 구성해서 페이지 번호, 검색어, 검색 필드를 포함한 쿼리 스트링을 생성
      - onPageChange 함수의 navigate에서 선택된 검색 필드를 포함하여 페지이와 검색어를 쿼리 파라미터로 설정
      - fieldChangeHandler 함수를 추가
        - 선택된 검색 필드를 업데이트, select 요소의 값이 변경될 때 searchField 상태를 업데이트
      - searchHandler 함수에서 쿼리 파라미터를 설정해서 선택된 검색 필드를 포함하여 페이지와 검색어를 쿼리 파라미터로 설정
      - useEffect에서 초기 로드시에, URL 쿼리 파라미터에서 검색어, 페이지 번호, 검색 필드를 가져와 상태를 설정하고 데이터를 로드
      - select 요소를 추가
        - select 요소에 selectOptions 배열을 사용하여 선택할 수 있는 검색 필드를 제공
        - 선택된 값은 searchField 상태를 관리
    - CSS 구성
      - Chat, AdminChat
        - 말풍선 색을 변경
      - AdminUserList
        - focus 테두리 거리 조절을 자유롭게 조절할 수 있는 내용으로 수정
    - 테스트 결과, select에서 제목, 내용, 이름 중에 선택하고 검색을 하면 제목은 정상적으로 검색이 되지만, 내용과 이름은 한글로 표기된 내용이 URL 파라미터에 들어가서 제대로 검색이 안되기 때문에 추가 수정이 필요하다.
      - 추가로, 검색 필드를 선택하지 않은 상태에서 모든 필드 항목에서 검색어를 찾는데 이 부분도 추가로 수정해서 제목이 default로 되어있기 때문에 제목 항목의 내용을 찾도록 변경하는 것도 고려를 해봐야 한다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/642116ff26a85318ad398903988965cabf0ca45d)

<br />

- 추가 및 해결 해야 할 내용
  - 채팅과 관련된 내용 구성
    - 채팅창에서 사용되는 함수 이름 변경도 생각을 해봐야 하는데, 좀 더 명확하게 표현할 필요성을 느낌
  - 게시글 검색 기능 관련 내용 수정 필요
  - 코드 예외 처리 더 필요한 부분이 있는 지 체크해야 함
  - ul 요소 안의 자식이 li가 아닌, div나 프래그먼트로 사용되는 부분을 수정해야 함

# 오늘 느낀 점

- 검색을 할 때, 필드를 선택해서 원하는 항목과 관련된 내용만 찾도록 구성을 해주려고 했는데, 제목은 제대로 찾는 것 같은데 내용과 이름 부분이 URL에 한글 상태로 전달이 되면서 DB에 있는 내용을 찾지 못하는 것 같아서 이와 관련된 내용을 처리해서 title, name이 전달되도록 구성을 변경해줘야 한다. 그리고 처음에 제목으로 선택되어 있는데, 검색을 하면 모든 항목에서 찾기 때문에 이 부분에 대한 수정을 해줘야 하는데, 기본 default를 제목으로 설정해줘서 초기 상태에서 검색을 하면 제목을 기준으로 찾도록 구성해줄 생각이다. 그리고 react 방식으로 변경해주고 CSS 내용을 추가하면 끝인데, 아직 필드 선택하는 부분에서 제대로 구성이 되지 않았기 때문에 이 부분에 대한 추가 수정을 우선해주고 나머지를 처리해줄 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
