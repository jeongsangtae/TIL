# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 사용자 프로필 토글 관련 내용, 조건부 추가 및 타입 정의 수정 및 코드 정리
  - 그룹 채팅방 세부 컴포넌트에서 그룹 채팅방 사용자 목록 또는 그룹 채팅방 패널을 통해 추가 정보를 받고, 해당 정보가 어떤 내용에서 전달하는지 확인하는 내용을 추가하고, 해당 내용을 조건부로 사용해 활성화된 사용자와 좌표를 null로 만들도록 구성 및 타입 정의를 수정해 타입 에러를 해결하고 주석 처리한 코드 정리
  - 프론트엔드
    - GroupChatDetails
      - coords useState 수정
        - Coords | null로 타입 수정
      - origin useState 추가
        - 초기값은 null로 구성
        - "users" | "panel" | null로 타입 정의
      - openUserProfileHandler 함수 수정
        - 매개변수로 source를 추가로 전달받도록 구성
          - "users" | "panel"로 타입 정의
        - 활성화된 사용자와 userId가 동일한 지 확인하고 origin과 source가 동일한 지 확인하는 조건부 추가
          - 조건부 내용 둘 다 true일 경우, setActiveUser와 setCoords를 모두 null로 업데이트하고 종료하도록 구성
          - 해당 내용으로 인해 같은 공간의 같은 사용자를 클릭하면 사용자 프로필이 닫히고, 다른 공간의 같은 사용자를 클릭하면 이전 내용은 닫히고 새롭게 클릭한 내용은 열리도록 구성
        - setOrigin를 추가해 source로 업데이트되도록 구성
      - JSX 코드 내용 수정
        - 사용자 프로필 출력 영역 수정
          - activeUserProfile 조건부 뒤에 coords를 조건부로 추가해 유효한 지 확인
    - GroupChatUsers
      - 주석 처리한 내용 모두 삭제
    - GroupChatUser
      - 주석 처리한 내용 모두 삭제
      - clickUserProfileHandler 함수 수정
        - onOpenUserProfile 함수를 통해 source 정보 추가로 전달
      - userProfileHandler 함수 주석 처리
      - JSX 코드 내용 수정
        - 전체 내용을 감싸는 div 수정
          - ref 내용 주석 처리
        - 사용자 프로필 관련 영역 주석 처리
    - GroupChatPanel
      - 주석 처리한 내용 모두 삭제
      - clickUserProfileHandler 함수 수정
        - 매개변수에 source를 추가하고 "users" | "panel"로 타입 정의
        - onOpenUserProfile 함수를 통해 source 정보 추가로 전달
      - JSX 코드 내용 수정
        - 사용자 목록 영역 수정
          - 전체 영역을 감싸는 div 수정
            - clickUserProfileHandler 함수에 "panel" 내용을 추가로 전달하도록 구성
    - types
      - Coords 타입 정의 추가
        - top, left는 number로 타입 정의
        - transform는 옵셔널 타입, string으로 타입 정의
      - GroupChatUsersProps 타입 정의 수정
        - onOpenUserProfile 항목 수정
          - top, left, transform 내용을 coords로 묶고 Coords로 타입 정의
          - source를 추가하고 "users" | "panel"로 타입 정의
      - GroupChatUserProps 타입 정의 수정
        - activeUser 항목 삭제
        - onOpenUserProfile 항목 수정
          - top, left, transform 내용을 coords로 묶고 Coords로 타입 정의
          - source를 추가하고 "users" | "panel"로 타입 정의
      - GroupChatPanelProps 타입 정의 수정
        - onOpenUserProfile 항목 추가
          - userId는 string으로 타입 정의
          - top, left는 number, transform는 string으로 타입 정의
          - source를 추가하고 "users" | "panel"로 타입 정의
  - CSS
    - UserProfile
      - user-profile-wrapper::before
        - 해당 내용 주석 처리
  - 그룹 채팅방 세부 컴포넌트 내에 그룹 채팅방 사용자 목록 또는 그룹 채팅방 패널 컴포넌트에서 넘어오는 내용인지 확인하는 내용과 조건부를 추가하고, 해당 내용을 통해 이전에 클릭한 사용자를 다시 클릭하면 창이 닫히며, 다른 내용에 보여지는 사용자를 클릭하면 창이 열리도록 구성하고, 해당 내용을 구성하며 발생한 타입 에러를 해결하기 위해 타입 정의 수정 및 코드를 정리해 확인한 결과, 같은 내용에 보여지는 동일한 사용자 클릭 시에 창이 닫히며 다른 내용에 보여지는 동일한 사용자 클릭 시에 다시 창이 열리는 구조로 구성이 되었으며, 타입 에러도 보이지 않고 코드도 정리되어 이전보다 깔끔해진 것을 확인할 수 있었다.
    - 같은 사용자 클릭 시에 창이 닫히는건 문제없지만, 사용자 프로필 외의 공간을 클릭하면 창이 닫히는 문제는 아직 해결되지 않았기 때문에 이에 대한 추가 수정 필요
    - 그룹 채팅방 이동 시에 열린 사용자 프로필이 그대로 유지되지 않고 닫히도록 수정 필요
    - 사용자 프로필에서 내용 클릭 시에 모달창으로 세부 내용이 보여지도록 구성 필요
    - 로그인, 회원가입 페이지 배경에 사용되는 여러 이미지를 더 추가해 테스트해봐야 함
    - 해야 할 일에 정리된 내용 처리 필요
    - 다이렉트 채팅방 순서가 변경될 때 부드럽게 변경되는 기능
    - 그룹 채팅방 위치를 자유롭게 변경하는 기능
    - 그룹 채팅방 우클릭 시에 보여지는 컨텍스트 메뉴 CSS 수정 필요 (위치, UI 등)
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/6cca8fe05a052be05abc01ff888e40f016f52834)

# 오늘 느낀 점

- 그룹 채팅방 세부 내용에 그룹 채팅방 사용자 목록 또는 패널에서 넘어오는 데이터를 구분하기 위한 내용을 추가하고, 해당 내용을 조건부로 사용해 같은 사용자 클릭 시에 프로필창이 닫히며, 다른 내용에 보여지는 같은 사용자 클릭 시에 이전 창은 닫히고 클릭한 사용자 프로필이 열리도록 구성을 해주었다. 그리고 해당 내용을 구성하면서 발생한 타입 에러는 타입 정의를 수정하면서 모두 해결되었고 주석 처리된 코드를 모두 정리해 이전과 다르게 깔끔한 것도 확인할 수 있었다. 사용자 프로필 외의 영역을 클릭하면 사용자 프로필이 닫히는 내용은 아직 구현하지 못해서 이 내용에 대해 구성을 해봐야 하며, 그룹 채팅방 이동 시에 이전 채팅방에서 열린 사용자 프로필이 그대로 유지되어 보이는 문제가 발생하고 있기 때문에 해당 내용 또한 수정해줄 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

- 다크 모드 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
