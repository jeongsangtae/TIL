# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 다이렉트 채팅방 번호 불러오는 유틸 함수 추가 및 다이렉트 채팅방 폼 액션 타입 정의 수정 및 코드 정리
  - 친구, 다이렉트 채팅방 패널, 사용자 프로필 세부 내용에서 다이렉트 채팅방 폼 액션을 통해 다이렉트 채팅방 번호를 받는 내용이 재사용될 수 있도록 관련 유틸 함수를 추가하고, 타입 정의를 수정해 타입 에러 방지 및 주석 처리한 코드를 정리
  - 프론트엔드
    - authStore
      - editUserProfileForm 액션 수정
        - requestBody 내의 avatarColor, avatarImageUrl을 null로 업데이트하는 내용 삭제
    - directChatStore
      - DirectChatStore 타입 정의 수정
        - directChatForm 액션 관련 타입 정의 수정
          - `Promise<void>`가 아닌, `Promise<string>`으로 수정
          - 반환 받는 내용이 문자열로 구성된 방 번호이기 때문에 string으로 수정
    - Friend
      - getDirectChatRoomId 유틸 함수 불러오도록 구성
      - useDirectChatStore Zustand 내용과 directChatForm 액션 내용 주석 처리
      - openDirectChatHandler 함수 수정
        - payload 변수 추가
          - id, nickname, avatarColor, avatarImageUrl로 구성
        - 이전에 구성한 roomId 변수 내용 주석 처리
        - 새로운 roomId 변수 추가
          - getDirectChatRoomId 유틸 함수에 payload를 전달하도록 구성
    - DirectChatPanel
      - getDirectChatRoomId 유틸 함수 불러오도록 구성
      - useDirectChatStore Zustand 내용과 directChatForm 액션 내용 주석 처리
      - openDirectChatHandler 함수 수정
        - 객체 디스트럭처링한 payload 내용 주석 처리
        - 이전에 구성한 roomId 변수 내용 주석 처리
        - 새로운 roomId 변수 추가
          - getDirectChatRoomId 유틸 함수에 payload를 전달하도록 구성
    - GroupChatDetails
      - openUserProfileDetailsHandler 함수 수정
        - 주석 처리한 setActiveUser 관련 내용 삭제
    - UserProfileDetails
      - getDirectChatRoomId 유틸 함수 불러오도록 구성
      - useDirectChatStore Zustand 내용과 directChatForm 액션 내용 주석 처리
      - 모달 데이터 확인하는 콘솔 로그 모두 삭제
      - openChatHandler 함수 수정
        - 다이렉트 채팅방 이동하는 조건부 내용 수정
          - 객체 디스트럭처링한 payload 내용 주석 처리
          - 객체 디스트럭처링한 내용 확인하는 콘솔 로그 주석 처리
          - 이전에 구성한 roomId 변수 내용 주석 처리
          - 새로운 roomId 변수 추가
            - getDirectChatRoomId 유틸 함수에 payload를 전달하도록 구성
        - 주석 처리한 navigate, targetPath 관련 내용 삭제
    - EditUserProfileForm
      - submitHandler 함수 수정
        - editUserProfileForm 액션에 전달하는 내용 수정
          - 주석 처리한 modalData 관련 내용 모두 삭제
    - getDirectChatRoomId
      - DirectChatUserData 타입 정의 추가
        - id, nickname은 string으로 구성
        - avatarColor, avatarImageUrl은 string 또는 null로 구성
      - getDirectChatRoomId 유틸 함수 추가
        - 유틸 함수는 `Promise<string>`으로 타입 정의
        - 매개변수로 payload를 받도록 구성하고 DirectChatUserData로 타입 정의
        - useDirectChatStore Zustand에서 directChatForm 액션을 불러오도록 구성
          - React 외부에 있기 때문에 `getState()`를 사용해 불러오도록 구성
          - 유틸 함수는 JSX 코드가 없고 렌더링과 무관하기 때문에 `getState()`를 사용
        - payload 내용을 객체 디스트럭처링
          - id, nickname, avatarColor, avatarImageUrl로 구성
        - directChatForm 액션 내용을 반환하도록 구성
          - directChatForm 액션에 id, nickname, avatarColor, avatarImageUrl 내용 전달
  - 친구, 다이렉트 채팅방 패널, 사용자 프로필 세부 내용 컴포넌트에서 다이렉트 채팅방 번호를 전달받는 내용이 유틸 함수로 재사용될 수 있도록 관련 유틸 함수를 추가하고 다이렉트 채팅방 폼 액션에 전달하는 사용자 ID, 닉네임, 아바타 색, 아바타 이미지 URL 내용을 유틸 함수로 전달해 다이렉트 채팅방 번호를 반환받아 다이렉트 채팅방으로 이동될 수 있도록 구성해 확인한 결과, 재사용하는 유틸 함수로 인해 로직이 조금씩 줄어들었고 동작은 이전과 동일하게 되는 것을 확인할 수 있었다.
    - 사용자 프로필 내의 다이렉트 메시지 입력창이나 다른 UI가 CSS 없는 상태로 보기 불편하기 때문에 이에 대한 수정 필요
    - 사용자 프로필 세부 내용에서 사용자 아바타 색이나 이미지 등 여러 내용이 자연스럽게 나오도록 구성 필요
    - 사용자 프로필 세부 내용 CSS가 구성되지 않아 보기 불편하기 때문에 이에 대한 CSS 추가 필요
    - 로그인, 회원가입 페이지 배경에 사용되는 여러 이미지를 더 추가해 테스트해봐야 함
    - 해야 할 일에 정리된 내용 처리 필요
    - 다이렉트 채팅방 순서가 변경될 때 부드럽게 변경되는 기능
    - 그룹 채팅방 위치를 자유롭게 변경하는 기능
    - 그룹 채팅방 우클릭 시에 보여지는 컨텍스트 메뉴 CSS 수정 필요 (위치, UI 등)
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/d7a495fb8d8f150186a08b0885a536abff692988)

# 오늘 느낀 점

- 친구, 다이렉트 채팅방 패널, 사용자 프로필 세부 내용 컴포넌트에서 다이렉트 채팅방 번호를 찾고 해당 채팅방으로 이동하기 위해 구성된 로직중 일부가 겹치는 부분이 있어서 유틸 함수를 통해 겹치는 내용이 재사용될 수 있도록 구성하고 유틸 함수에서 사용자 관련 정보를 받아 다이렉트 채팅방 폼 액션에 전달한 뒤 찾은 방 번호를 반환해 해당 다이렉트 채팅방으로 이동될 수 있도록 구성한 내용이 이전과 동일하게 작동되어 문제가 없는 것을 확인했다. 유틸 함수를 구성하던 중 다이렉트 채팅방 관련 Zustand를 불러오는 내용이 기존에 불러오던 방식과 약간 다른 형태로 구성해야 했는데, 이와 관련해 Zustand를 컴포넌트에서 불러오는 방식과 React 외부에서 불러오는 방식이 어떻게 다른지 정리해 한 번 짚고 넘어가야 할 것 같고, 추가로 초기에 설계했던 실시간 통신 애플리케이션이 어떤식으로 진행이 되었으며, 어떤 내용을 추가로 구성해야 하는지, 구성한 내용중 보완해야 할 점, 초기에 구성하려고 했던 내용과 달라진 점 등 여러 내용을 한 번 정리하고 갈 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

- 다크 모드 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
