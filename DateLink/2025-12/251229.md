# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 사용자 프로필 수정 폼과 관련된 전달 데이터, 타입 정의 구조, 타입 에러 관련 내용 수정
  - 사용자 프로필 수정 폼 액션에 전달하는 내용을 수정하고 해당 내용과 관련된 타입 정의 구조와 내용을 수정해 타입 에러를 해결하고, 전달받은 내용을 정리해 백엔드로 다시 전달해 기존 로직에 문제가 없도록 수정
  - 백엔드
    - 사용자 정보 수정하는 PATCH 라우터 수정
      - currentUserId 변수 수정
        - "requestBody.modalData.\_id"가 아닌, "requestBody.\_id"로 수정
  - 프론트엔드
    - authStore
      - editUserProfileForm 액션에서 전달받는 매개변수, 타입 정의 수정
        - 전달받는 매개변수 내용을 payload로 구성
        - payload는 EditUserProfilePayload로 타입 정의
      - EditUserProfilePayload 타입 정의 추가
        - interface가 아닌 type으로 구성
        - 아바타 이미지 URL이 넘어오는 경우
          - avatarMode는 true
          - trimmedNickname, avatarImageUrl는 string
          - modalContext는 ModalContext로 구성
        - 아바타 색이 넘어오는 경우
          - avatarMode는 false
          - trimmedNickname, avatarImageUrl는 string
          - modalContext는 ModalContext로 구성
      - ModalContext 타입 정의 추가
        - ModalData 대신 사용하는 타입 정의
        - \_id는 string
        - method는 "POST" 또는 "PATCH" 또는 "DELETE"
        - avatarImageUrl은 string 또는 null로 구성
      - editUserProfileForm 액션 수정
        - 매개변수 내용을 payload로 수정
        - payload 내용을 객체 디스트럭처링해 trimmedNickname, avatarMode, modalContext로 구성
        - requestBody 변수 수정
          - \_id 항목을 추가해 modalContext.\_id로 구성
          - avatarColor, avatarImageUrl 항목을 추가하고 null로 구성
            - 초기값은 null이며, 조건부로 인해 내용이 바뀌어 백엔드로 전달
        - 아바타 모드, 아바타 색, 아바타 이미지 URL 확인하는 조건부 수정
          - if문
            - avatarImageUrl 대신 payload.avatarImageUrl을 확인하도록 수정
            - requestBody.avatarColor를 null로 업데이트하는 내용을 추가했으나 주석 처리
          - 첫번째 else if문
            - avatarColor 대신 payload.avatarColor를 확인하도록 수정
            - requestBody.avatarImageUrl을 null로 업데이트하는 내용을 추가했으나 주석 처리
          - 두번째 else if문
            - avatarColor 대신 payload.avatarColor를 확인하도록 수정
            - requestBody.avatarColor를 null로 업데이트하는 내용을 추가했으나 주석 처리
        - fetch 함수 수정
          - method 내용에서 modalData.method 대신 modalContext.method를 사용하도록 수정
    - EditUserProfileForm
      - submitHandler 함수 수정
        - editUserProfileForm 액션에 전달하는 내용 수정
          - modalData 대신 modalContext 추가
          - \_id, method, avatarImageUrl을 전달하도록 구성
  - 사용자 프로필 수정 폼 액션 관련 내용에서 지속적으로 문제가 되던 타입 에러를 해결하기 위해 사용자 프로필 수정 폼 액션에 전달하는 내용 구조를 수정하고, 그에 맞춰 타입 정의 구조와 내용도 수정해 확인한 결과, 타입 에러도 사라졌으며 전달하는 내용 또한 명확하게 확인할 수 있는 것을 확인할 수 있었다.
    - 친구, 다이렉트 채팅방 패널, 사용자 프로필 세부 내용에서 친구 또는 함께 아는 친구 클릭 시에 다이렉트 채팅방으로 이동하는데 이 로직이 유사하게 구성되어 있으므로 재사용할 수 있도록 내용을 구성해봐야 함
    - 사용자 프로필 내의 다이렉트 메시지 입력창이나 다른 UI가 CSS 없는 상태로 보기 불편하기 때문에 이에 대한 수정 필요
    - 사용자 프로필 세부 내용에서 사용자 아바타 색이나 이미지 등 여러 내용이 자연스럽게 나오도록 구성 필요
    - 사용자 프로필 세부 내용 CSS가 구성되지 않아 보기 불편하기 때문에 이에 대한 CSS 추가 필요
    - 로그인, 회원가입 페이지 배경에 사용되는 여러 이미지를 더 추가해 테스트해봐야 함
    - 해야 할 일에 정리된 내용 처리 필요
    - 다이렉트 채팅방 순서가 변경될 때 부드럽게 변경되는 기능
    - 그룹 채팅방 위치를 자유롭게 변경하는 기능
    - 그룹 채팅방 우클릭 시에 보여지는 컨텍스트 메뉴 CSS 수정 필요 (위치, UI 등)
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/f83679d3212c0ba3b4e2063cf581d3034ca9d789)

# 오늘 느낀 점

- 사용자 프로필 수정 폼과 인증 관련 Zustand에서 발생하는 타입 에러를 해결하기 위해, 사용자 프로필 수정 폼 액션에 전달하는 내용 구조를 변경하고 그에 맞춰 타입 정의 구조와 내용을 수정한 결과, 타입 에러가 더이상 발생하지 않는 것을 확인했으며 전달하는 내용 또한 이전과 다르게 명확하게 구분할 수 있는 것을 확인할 수 있었다. 친구, 다이텍트 채팅방 패널, 사용자 프로필 세부 내용 컴포넌트에서 구성된 사용자 클릭 시에 해당 채팅방으로 이동하는 로직을 재사용할 수 있도록 수정할 생각이며, 앞에서 타입 에러를 해결하기 위해 추가했던 내용이나 주석 처리한 내용을 모두 삭제해 정리해줄 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

- 다크 모드 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
