# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 다이렉트 채팅방 패널 내의 함께 아는 친구 다이렉트 채팅방 이동 관련 내용 수정 및 사용자 프로필 세부 내용의 함께 아는 친구 다이렉트 채팅방 이동 관련 내용 테스트
  - 다이렉트 채팅방 패널 내의 함께 아는 친구 클릭 시에 바로 채팅방 이동이 아닌 다이렉트 채팅방 생성 관련 액션에 정보를 넘겨 실행되도록 구성하고, 사용자 프로필 세부 내용 또한 바로 채팅방 이동이 아닌 다이렉트 채팅방 생성 관련 액션에 정보를 넘겨 실행되도록 구성해 테스트
  - 백엔드
    - direct-chat-routes
      - 다이렉트 채팅방 추가하는 POST 라우터 수정
        - 채팅방이 이미 존재할 경우 실행되는 콘솔 로그 추가
        - 채팅방이 새롭게 생성되었을 경우 실행되는 콘솔 로그 추가
  - 프론트엔드
    - DirectChatPanel
      - useNavigate Hook을 추가해 사용할 수 있도록 구성
      - useDirectChatStore Zustand에서 directChatForm 액션을 불러와 실행할 수 있도록 구성
      - openDirectChatHandler 함수 추가
        - 비동기 함수로 구성
        - 매개변수로 id, nickname, avatarColor, avatarImageUrl을 전달받도록 구성
        - id를 확인하는 조건부 추가
          - id가 없을 경우 에러 메시지와 함께 return을 통해 종료
        - roomId 변수 추가
          - directChatForm 액션에 id, nickname, avatarColor, avatarImageUrl을 전달하도록 구성
        - navigate를 추가해 "/me" 경로의 다이렉트 채팅방 ID로 이동하도록 구성
      - JSX 코드 내용 수정
        - 함께 아는 친구 목록 영역 수정
          - Link 컴포넌트로 구성된 내용 주석 처리
          - div로 구성하고, to 대신 onClick을 사용해 openDirectChatHandler 함수에 id, nickname, avatarColor, avatarImageUrl을 전달하도록 구성
    - UserProfileDetails
      - useDirectChatStore Zustand에서 directChatForm 액션을 불러와 실행할 수 있도록 구성
      - 모달 데이터에서 넘어오는 mutualFriendUsers 내용을 확인하기 위한 콘솔 로그 활성화
      - chatHandler를 openChatHandler 함수로 수정
        - 이전에 구성한 내용 주석 처리
        - 비동기 함수로 구성
        - 매개변수로 payload를 전달 받도록 구성
          - 함께 아는 친구 내용에서는 id, nickname, avatarColor, avatarImageUrl을 전달 받음
          - 함께 참여한 채팅방에서는 roomId를 전달 받음
        - payload가 어떤식으로 넘어오는지 확인하기 위한 콘솔 로그 추가
        - activeView와 "friends"가 동일한지 확인하는 조건부 추가
          - payload를 통해 넘어온 id, nickname, avatarColor, avatarImageUrl을 객체 디스트럭처링
          - id, nickname, avatarColor, avatarImageUrl 내용 확인을 위한 콘솔 로그 추가
          - roomId 변수 추가
            - directChatForm 액션에 id, nickname, avatarColor, avatarImageUrl을 전달하도록 구성
          - navigate를 추가해 "/me" 경로의 다이렉트 채팅방 ID로 이동하도록 구성
            - else 문에서는 "/group-chat" 경로의 그룹 채팅방 ID로 이동하도록 구성
      - JSX 코드 내용 수정
        - 함께 아는 친구 영역
          - openChatHandler 함수에 id, nickname, avatarColor, avatarImageUrl을 전달하도록 구성
        - 함께 참여한 그룹 채팅방 영역
          - openChatHandler 함수에 \_id를 전달하도록 구성
  - 다이렉트 채팅방 패널과 사용자 프로필 세부 내용에서 함께 아는 친구 클릭 시에 바로 채팅방 이동되는 것이 아닌, 다이렉트 채팅방 생성 액션에 정보를 넘겨 실행하고 해당 채팅방이 먼저 존재하는지 확인해 존재하면 바로 이동하고 존재하지 않으면 생성 후 이동하도록 구성해 확인한 결과, 다이렉트 채팅방 패널의 함께 아는 친구 내용은 생각한대로 동작했지만 사용자 프로필 세부 내용의 함께 아는 친구는 오류가 발생하기 때문에 추가로 수정이 필요하다.
    - 사용자 프로필 세부 내용에서 함께 아는 친구 클릭 시에 채팅방으로 이동되지도 않고, 새롭게 생성이 되지도 않기 때문에 추가 수정 필요
    - 다이렉트 채팅방 패널, 사용자 프로필 세부 내용을 수정하면서 타입 정의가 되지 않아 타입 에러가 발생하므로 수정 필요
    - 사용자, 다이렉트 채팅방 패널, 사용자 프로필 세부 내용에서 친구 또는 함께 아는 친구 클릭 시에 다이렉트 채팅방으로 이동하는데 이 로직이 유사하게 구성되어 있으므로 재사용할 수 있도록 내용을 구성해봐야 함
    - 사용자 프로필 내의 다이렉트 메시지 입력창이나 다른 UI가 CSS 없는 상태로 보기 불편하기 때문에 이에 대한 수정 필요
    - 사용자 프로필 세부 내용에서 사용자 아바타 색이나 이미지 등 여러 내용이 자연스럽게 나오도록 구성 필요
    - 사용자 프로필 세부 내용 CSS가 구성되지 않아 보기 불편하기 때문에 이에 대한 CSS 추가 필요
    - 로그인, 회원가입 페이지 배경에 사용되는 여러 이미지를 더 추가해 테스트해봐야 함
    - 해야 할 일에 정리된 내용 처리 필요
    - 다이렉트 채팅방 순서가 변경될 때 부드럽게 변경되는 기능
    - 그룹 채팅방 위치를 자유롭게 변경하는 기능
    - 그룹 채팅방 우클릭 시에 보여지는 컨텍스트 메뉴 CSS 수정 필요 (위치, UI 등)
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/2ad01bbc1999e75157ef373f76034ad2e7e8264b)

# 오늘 느낀 점

- 다이렉트 채팅방 패널과 사용자 프로필 세부 내용에서 함께 아는 친구 클릭 시에 다이렉트 채팅방 생성 액션이 실행되어 관련 정보를 넘긴 뒤 채팅방이 존재하는지 확인하고, 채팅방이 존재하면 그대로 해당 채팅방으로 이동되며 채팅방이 존재하지 않으면 채팅방 생성 후 이동하도록 구성해 확인한 결과, 다이렉트 채팅방 패널은 생각한대로 동작하지만 사용자 프로필 세부 내용은 에러로 인해 제대로 동작하지 않기 때문에 추가로 수정해줄 생각이다. TIL을 작성하면서 내용을 다시 살펴본 결과, 사용자 프로필 세부 내용의 함께 아는 친구에서 객체 형식이 아닌 4개의 항목을 전달하는데 전달받는 함수에서 하나의 항목만 받아서 처리하는 것으로 구성해 오류가 생긴 것 같은데 해당 내용을 객체 형식으로 변경하면 해결될 것 같고, 다이렉트 채팅방 패널이나 사용자 프로필 세부 내용에서 수정한 내용이 타입 에러를 발생시키기 때문에 이에 대한 수정도 해줄 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

- 다크 모드 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
