# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 친구 요청 갯수 출력
  - 친구 요청 목록에 처리되지 않은 친구 요청이 있다면 해당 목록을 갯수로 대기중 항목에 보여지도록 내용을 추가
  - 백엔드
    - friend-routes
      - 주석 내용을 수정
  - 프론트엔드
    - Friends
      - useEffect에 loadFriendRequests 액션을 추가해 함께 실행되도록 구성
      - 대기중 내용 옆에 조건부를 추가
        - friendRequests 상태 갯수를 확인해 0보다 클 경우, 해당 갯수를 보여주도록 구성
  - 초기에 마운트되면 모두 항목에서 친구 목록이 보여지고, 그 옆에 있는 대기중 항목에서는 처리 되지 않은 친구 요청 갯수가 보여지는 것을 확인할 수 있었다.
    - 로그인하면 바로 친구 목록이 보여지고, 옆에 있는 대기중 항목에 친구 요청 갯수만큼 숫자가 보여지는 것을 확인
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/8d08e0ab28ddc818a8042e65611d9e2bfcb631ca)

<br />

- 친구 요청 실패 메시지 출력되도록 수정 및 친구 요청 갯수 실시간 반영되도록 구성 추가
  - 친구 요청 실패 시에 어떤 이유로 친구 요청이 전송되지 않았는지 메시지가 전달되어 화면에 출력되어야 하지만, 해당 메시지가 출력되지 않고 alert로 에러 친구 요청 실패라는 메시지만 출력되기 때문에 정확히 메시지가 전달되어 보이도록 수정해 주었고, 친구 요청이 새롭게 넘어오면 대기중 항목의 갯수 부분이 실시간 반영되어 보여지도록 구성
  - 프론트엔드
    - friendStore
      - 주석 처리되어 사용되지 않는 코드 삭제
        - 앞에서 테스트를 위해 추가했던 socket 관련 코드 삭제
      - response를 확인하는 조건부 내용 삭제
        - 해당 내용을 삭제해 친구 요청 실패 시에 전달되는 메시지 출력
    - socketStore
      - useFriendStore Zustand를 불러오도록 구성
      - connect 액션의 친구 요청 수신 이벤트에서 loadFriendRequests 액션이 실행되도록 구성 추가
        - `useFriendStore.getState().loadFriendRequests()` 내용을 추가
        - 알림 관련 내용이 넘어와 저장된 후에, 해당 코드가 작동되어 친구 요청 목록을 갱신하는 구조
  - 친구 요청 실패 시에 이메일 잘못 입력 메시지, 중복된 친구 요청, 이미 친구인 경우 메시지 등 상황에 맞는 메시지가 출력되는 것을 확인했고, 친구 요청 시에 실시간으로 친구 요청 목록 갯수가 늘어나 화면에 보이는 것을 확인할 수 있었다.
    - 추가한 내용은 문제가 없는데, 여러 테스트를 진행하던 중에 친구 요청 알림이 계속 남아있는 문제와 친구 추가하기 내용에서 잘못된 이메일에 친구 요청한 후에 메시지가 출력되는데, 해당 메시지가 다른 항목에 이동하고 돌아와도 그대로 보여지므로 내용을 수정해, 해당 항목을 벗어나면 초기화되도록 수정해야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/510a621b9dae7e893142775660e7f5ff895849c6)

# 오늘 느낀 점

- 친구 요청 목록 갯수를 표시해 처리되지 않은 친구 요청이 몇 개 남았는지, 새로운 친구 요청이 있는지 바로 알 수 있도록 내용을 구성해 주었고, 친구 요청 실패 시에 어떤 문제로 실패했는지 메시지를 전달하는데 이 내용이 전달은 되지만 정상적으로 출력이 되지 않아서, 내용을 수정해 관련 오류에 대한 메시지가 출력되도록 수정해 주었고, 친구 요청이 새롭게 추가되면 친구 요청 목록 갯수가 실시간으로 변화되어 바로 알 수 있도록 코드를 구성해 주었다. 친구 요청 알림이 화면에 출력되는 것은 문제가 없지만, 친구 요청이 여러번 들어오면 알림 텍스트가 계속 쌓이고, 새로고침하기 전까지 지워지지도 않기 때문에 알림 텍스트가 보여지고 몇 초 지나면 친구 요청 알림 텍스트가 사라지도록 내용을 수정해 줘야 한다. 그리고 비슷하게 친구 추가하기 내용에서도 친구를 추가하거나 잘못된 친구 요청에 대한 메시지가 출력되는데, 이 내용도 새로고침 하기 전까지 다른 항목에 다녀와도 그대로 보여지므로 다른 항목에 이동하면 해당 메시지가 초기화되어 보이지 않도록 내용을 수정해 줘야 한다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 친구 관련된 내용을 좀 다듬어야 함 (코드를 깔끔하게 보이도록 수정 필요)

- 친구 목록 출력 및 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방

- 그룹 채팅방 초대하는 기능

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
