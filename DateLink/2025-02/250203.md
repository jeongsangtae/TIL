# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- Float Chat 프로젝트 구성중 발생한 에러 내용 추가 (key 중복 관련 에러)
  - key 중복 관련 에러 내용을 정리
    - 발생한 에러에 대한 내용과 원인 추가
    - 에러를 발생시킨 코드 내용을 추가하고, 해결한 방법과 코드를 함께 추가
  - [코드 내용](https://github.com/jeongsangtae/TIL/commit/59b7bbed2e84563bf5e9c6a126d805f5cca9c901)

<br />

- 중복 방지 코드 추가 (some 관련 로직 추가)
  - 새로운 메시지 추가 시에 key 중복 관련 에러를 해결하기 위해, 실시간 반영 코드에 some()을 추가하고 중복을 방지할 수 있도록 로직 변경
  - 프론트엔드
    - chatStore
      - 중복 방지를 위한 코드 주석 해제
        - newSocket.on을 통해 새로운 메시지를 가져옴
        - 가져오는 메시지 타입은 string으로 설정
          - 이 내용은 변경될 수 있음
        - 기존 메시지 배열에 some()을 사용해 기존 메시지 배열에서 \_id가 새로운 메시지 \_id와 일치하는 메시지가 있는지 확인
          - 일치하는 메시지가 하나라도 있으면 some 함수는 true를 반환하고, 없으면 false를 반환
        - 중복된 \_id가 존재한다면 true가 되어, 새로운 메시지를 추가하지 않고 기존 상태를 그대로 반환하도록 구성
          - set() 함수 내부에서 prevMsg를 그대로 반환하면 React의 상태가 변경되지 않으므로 리렌더링도 발생하지 않음
    - Chats
      - connect 액션을 실행시키는 useEffect 의존성 배열에 roomId를 추가해, 새로운 메시지 추가 시에 실시간 반영되도록 구성
  - 중복 방지와 관련된 코드를 추가하고 테스트한 결과, 새로운 메시지를 추가하면 중복된 같은 메시지가 추가되지 않으며, key 중복 관련 에러 메시지도 뜨지 않는 것은 확인할 수 있었다.
    - 다른 방법으로 해결해 보기 위해 여러 방법을 테스트해 봤지만, 깔끔하게 해결이 되지 않기에 some 함수를 사용하는 방법으로 처리를 해 주었다.
    - some 함수를 사용하는 방법이 임시방편으로 해결하는 방법이라고 생각했으나, 원래도 중복 방지를 위한 일반적인 해결책으로 많이 사용되며 안정적인 해결 방법이라고 하기 때문에 크게 문제는 없을 것 같다.
    - WebSocket을 사용해 메시지를 전달받는데 이 때, 일반적인 React에서 useState를 통해 처리하는 것과 Zustand에서 처리하는 것에 대해 조금 정리할 생각이며, some 함수에 관련된 내용도 간략하게 정리하고 갈 예정이다.
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/68e08460d7cd6add13d736898ef15e6322c85f9e)

# 오늘 느낀 점

- key 중복 관련 에러에 대해 정리를 해 주었고, 새로운 메시지가 추가될 때 중복되어 추가되는 것을 막기 위해 여러 방법을 시도해 보았지만, 깔끔하게 해결이 되지 않아서 이전에 추가했던 some 함수를 사용하는 코드로 해결을 해 주었다. some 함수를 사용하는 방법이 임시방편으로 해결하는 방법이라고 생각했지만, 중복 방지를 위한 일반적인 해결책으로 많이 사용된다고 하기 때문에 크게 문제는 없을 것으로 생각이 된다. 그리고 some 함수를 사용한 내용이 있는지 확인해 보니, 예전에 강의를 듣고 정리한 내용에서 some 함수를 사용해 중복된 항목을 피하도록 구성한 내용을 확인할 수 있었다. some 함수는 중복 방지를 위해 자주 사용되는 것 같고, 안정적인 해결 방법이라고 하기 때문에 관련 내용을 추가로 정리해 확실히 기억하고 사용할 수 있도록 해 줄 생각이며, 추가로 WebSocket을 사용해 메시지를 전달받을 때, 일반적인 React에서 useState로 처리하는 방식과 Zustand에서 처리하는 방식의 차이에 대해 간단하게 정리하고 넘어가는 것이 좋다고 생각이 된다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 채팅 입출력과 관련된 내용

- 사용자 생성 시 닉네임 뒤에 태그 내용

- 친구 추가를 위해 검색 모달 및 친구 추가 모달

- 친구 목록 출력 및 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방

- 그룹 채팅방 초대하는 기능

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
