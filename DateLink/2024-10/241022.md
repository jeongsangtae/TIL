# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 게시글 내용 출력 수정 (forEach 추가)
    - 게시글 목록에서 게시글 내용이 보여질 때 미리보기로 내용이 보여지고, 더 많은 내용은 ...으로 보여지도록 구성을 해줬지만 줄바꿈과 글자 수 제한 코드가 함께 적용되어서 ... 내용이 중복으로 보여지기 때문에 이 문제를 해결해주었다.
    - 프론트엔드
      - Post
        - 내용 길이 제한을 수정해서 데스크탑 환경은 100글자, 모바일 환경은 50글자로 제한
        - 줄바꿈 내용을 글자 수로 취급해서 계산되도록 변수 추가
          - 데스크탑 환경에서는 50글자로 취급, 모바일 환경은 30글자로 취급
        - 기존의 줄바꿈과 글자 수 제한 코드 주석 처리
        - 줄바꿈, 글자 수를 계산해서 문자열 길이를 파악하고, 길이 제한 내용을 초과하면 ...으로 보여지도록 구성
          - 이 내용에서 forEach를 사용해서, 입력된 문자열을 하나씩 순회하면서 줄바꿈이 발생하면 줄바꿈에 대한 가중치를 더해 글자 수를 증가시키도록 구성
          - 줄바꿈 이외의 글자는 1씩 더해 글자 수를 세고, 글자 수가 최대 길이 제한을 넘지 않는 경우에만 해당 내용이 모두 보이도록 구성
          - 최대 글자 수를 초과하면 ...이 추가되어 내용이 잘린 것이 표시되도록 구성
          - 이전과는 다르게, 줄바꿈 내용을 가중치로 처리해서 추가적인 글자로 취급해서 그에 맞게 글자 수를 계산하도록 구성
        - 미리보기에 관련된 변수를 추가하고, 매개변수를 받아서 사용될 수 있도록 구성
    - CSS
      - Post 내용의 주석 처리했던 코드 삭제
    - 작동 방식
      - 현재 글자 수를 추적하고, 잘린 내용을 저장
      - 글자를 하나씩 순회하고, 현재 글자가 줄바꿈이 적용될 경우 일정 글자 수가 추가되도록 구성
      - 현재 글자 수가 데스크탑에서는 100글자, 모바일에서는 50글자를 넘지 않을 때까지 현재 글자가 보여지도록 구성
      - 최대 글자를 초과할 시에는 ...이 보여지도록 구성
    - 구성한 내용을 확인해본 결과, 제한된 글자 수를 넘어갔을 경우 ... 내용이 보여지는 것을 확인할 수 있었고, 줄바꿈 내용이 글자 수로 취급되어서 줄바꿈을 여러번 사용하면 그 아래 내용이 ...으로 보이는 것도 확인할 수 있었다.
      - 이전 내용에서 중복으로 보이는 ... 내용이 보이지 않는 것도 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/f59890d3b9064ed0e4d9292f958d1f7057eb259a)

<br />

- 추가 및 해결 해야 할 내용
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
  - 배포하는 과정에서 오류가 생겼던 부분과 해결한 오류에 관한 내용을 정리해줘야 함
    - CORS 오류, Rewrite 관련 내용 등
    - 로컬 스토리지 초기화 오류 해결한 방법에 대한 정리가 필요
  - 설계, 결과 이 부분에 대한 내용을 정리해줘야 하고, 발생했던 에러에 대해 최대한 정리해주는 것도 필요함
    - 파일은 구성해놓은 상태이기 때문에 내용 정리만 차분히하면 됨
    - 설계는 완료
    - 결과 진행중
  - 오류 수정 필요
    - 예전에 확인한 오류인데 까먹고 수정하지 않은 오류로, 채팅에서 다음 라인으로 내려가지 않고 쭉 입력하면 그 라인이 변경되어 입력되더라도 제출하게되면 보이는 부분에서 라인 변경이 되지 않고, 그대로 길게 입력한채로 출력이 되기 때문에 이 부분에 대한 수정이 필요함
      - 이 내용은 수정했지만 추가로 다른 문제가 확인됨
    - 라인으로 넘겨서 작성한 경우가 아니면 아무리 내용이 길어도 ... 내용이 보여지지 않고 그대로 보여지는 것을 확인해서 이에 대해 수정해줘야 함
      - 제목 부분에서는 문제가 없지만, 내용 부분에서 줄바꿈이랑 줄 길이 제한이 함께 적용되기 때문에 이 부분에 대한 수정이 필요함
      - 2줄까지만 보여지고, 그 뒤는 바로 ...으로 보여서 3줄까지는 보이지 않도록 해주는 것을 고려중
      - 2줄까지만 보여지고 그 뒤는 ...으로 보이는 로직은 조금 복잡하기 때문에 최대한 간단하게 구성하기 위해서 글자 수 제한과 줄바꿈이 글자 수로 포함되어서 적용되도록 수정

# 오늘 느낀 점

- 게시글 내용이 너무 길게 작성되었을 때, 미리보기 내용만 보여지고 그 뒤는 ...으로 보여지도록 구성을 해줬었는데, 줄바꿈 내용과 글자 수 제한 내용이 한 번에 적용되어서 ...이 두 번 보여지기 때문에, 이 내용을 수정하기 위해서 forEach문을 추가하고 긴 문자열을 특정 길이로 잘라내고, 줄바꿈 문자가 포함된 경우 줄바꿈을 계산하여 처리할 수 있도록 구성을 해서 해결해주었다. 내용을 테스트해보니 문제없이 작동되는 것을 확인했고 이제 배포 환경에서 한 번 더 확인을 해봐야 할 것 같다. 그리고 코드 정리를 좀 정리해준 후에, 관리자 페이지에서도 똑같이 적용되도록 구성을 해줘야 한다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
