# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 관리자 페이지 채팅의 사용자 리스트 필터 내용 수정
    - 관리자 페이지의 채팅 버튼을 클릭하면 사용자 리스트가 보여지고, 이 때 검색 기능을 통해서 사용자 검색을 할 수 있도록 구성해주었는데, 여기서 이름으로만 검색이 가능한 상태이기 떄문에 이메일 내용을 추가해서 이름과 이메일 모두에서 검색되도록 내용을 수정해주었다.
    - 프론트엔드
      - AdminUserList
        - 검색과 관련된 내용에서 이메일도 검색이 가능하도록 내용을 추가
    - 사용자 리스트에서 이메일과 관련된 내용을 입력하고 확인해본 결과, 검색이 되는 것을 확인했고, 이름과 이메일 모두 겹치는 내용도 함께 보여지는 것을 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/83f65f9872868f9d88f240074ad05890c55ffb27)

  <br />

  - 관리자 페이지 채팅의 사용자 리스트에서 보여지는 마지막 메시지 출력 내용 수정
    - 관리자 페이지의 채팅 버튼을 클릭하면 사용자 리스트가 보여지는데, 이 때 모든 사용자가 보여지고 사용자와 나눈 마지막 채팅 메시지가 보여지도록 구성을 해준 상태인데, 이 마지막 채팅 메시지가 길게 작성된 경우 중간에 짤리는 내용없이 그대로 전부 보여져서 가로로 스크롤이 생기기 때문에, 내용을 수정해서 일정 글자 수를 넘어가면 ... 내용이 보여지도록 수정해주었다.
    - 프론트엔드
      - AdminUserItem
        - AdminPost에서 구성된 trimContentHandler 함수 내용을 가져오고, 조금 수정해서 구성
        - 좀 더 간단하게 구성하기 위해서 줄바꿈 내용이 사용되거나, 라인 제한 같은 내용을 사용하지 않고 구성해봤으나, 원하는 출력이 나오지 않아서 기존의 코드를 가져와서 사용
          - reduce 대신에 for of를 사용해서 구성하는 방법도 있지만 reduce를 사용하는 코드를 선택
          - for of 코드가 좀 더 간단하고 직관적으로 보이지만 reduce 코드를 선택
        - 줄바꿈이 글자 수로 취급되는데, 여기서는 10글자로 구성
        - 최대 보여지는 글자 수 제한을 10글자로 구성
          - 줄바꿈이 적용되면 바로 ... 내용이 보여지도록 구성
    - 게시글 목록 페이지에서 보여지는 게시글 내용 미리보기 로직을 가져와서 적용시켜주었는데, 일단 문제없이 마지막 메시지도 출력되는 것을 확인해주었다.
    - 문제없이 출력이 되긴 하지만, 로직이 조금 길고 복잡해서 더 간단하고 쉽게 해보려고 여러 내용을 테스트해봤지만, 결국 만족스러운 결과를 얻지 못해서 reduce를 사용하는 코드를 사용했다.
    - for of를 사용하는 코드도 문제없이 작동하지만, react에서 좀 더 어울리는 방식은 reduce라고 들어서 그냥 reduce를 사용하는 로직을 구성해놓은 상태인데, 만약을 위해서 for of 코드는 남겨놓을 생각이다.
    - 마지막 메시지 내용이 딱 한 줄만 보여지고, 그 뒤는 모두 ...으로 보여지도록 해주었는데, 두 줄까지 보여지는 것도 괜찮긴 하지만 굳이 두 줄까지 보여질 필요는 없고 한 줄이 보여지고, 그 뒤는 ...으로 보여지는 게 맞다고 생각되어서 최대 글자 수 제한과 줄바꿈 글자 수 적용을 동일하게 구성해주었다.
    - 결과적으로 여러 테스트에도 마지막 메시지 내용이 내가 생각한대로 출력되는 것을 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/e0f7f8d84087d6f76704fd9fd927d1449aa90077)

<br />

- 추가 및 해결 해야 할 내용
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
  - 배포하는 과정에서 오류가 생겼던 부분과 해결한 오류에 관한 내용을 정리해줘야 함
    - CORS 오류, Rewrite 관련 내용 등
    - 로컬 스토리지 초기화 오류 해결한 방법에 대한 정리가 필요
  - 설계, 결과 이 부분에 대한 내용을 정리해줘야 하고, 발생했던 에러에 대해 최대한 정리해주는 것도 필요함
    - 파일은 구성해놓은 상태이기 때문에 내용 정리만 차분히하면 됨
    - 설계는 완료
    - 결과 진행중
      - 백엔드, DB 완료
      - 프론트엔드 마무리해줘야 함
  - 관리자 로그인으로 사용자 페이지 접근에 대한 내용을 조금 수정해야 함
    - 일반적으로 이동이 불가능하지만, URL 이동으로는 가능하기 때문에 수정이 필요
    - 게시글 페이지로 이동했을 경우, 글쓰기 버튼이 보여지기 때문에 이에 대한 처리가 필요함
    - 게시글 세부 페이지로 이동했을 때, 수정과 삭제가 불가능하지만 댓글과 답글은 문제없이 추가할 수 있기 때문에 이에 대한 수정이 필요
    - 관리자 로그인으로 사용자 페이지에 접속할 수 없도록 해주는 방법과 그냥 접속은 가능 하지만, 기능이 비활성화되는 방법 중에서 후자를 선택해서 구성하기로 결정

# 오늘 느낀 점

- 관리자 페이지의 채팅 내용에서 구성된 사용자 리스트 검색 기능이 이름만 검색할 수 있는 것이 아닌, 이메일도 검색될 수 있도록 내용을 수정해주고, 마지막 메시지가 보여지는 부분에서 길게 입력된 내용이 그대로 다 보여지기 때문에 글자 수 제한을 추가해서 일부 내용이 보여지고 그 뒤 내용은 ...으로 보여져 UI가 깨지지 않도록 구성해주었다. 마지막으로 관리자 로그인 후에 사용자 페이지 접속했을 때 어떤 방식으로 처리할 지 많이 고민해본 결과, 최종적으로는 사용자 페이지의 일부 기능을 비로그인과 동일하게 비활성화하는 방식으로 처리해주려고 생각중이다. 관리자 로그인으로 사용자 페이지에 접속해서 확인해야 할 때가 있기 때문에, 원천적으로 URL 자체를 통제하는 것을 올바른 방법이 아니라고 생각이 되었고, 메인헤더에서는 기능이 다르게 작동하도록 구성해놓은 상태이기 때문에 게시글 추가, 댓글 추가, 답글 추가 같은 기능이 단순하게 비로그인처럼 비활성화되어서 사용할 수 없도록 해주면 될 것 같다고 생각이 되었다. 저런 추가 기능이 완전히 보이지 않는 쪽도 고려를 했지만, 기능이 보이지 않게되면 관리자 페이지의 내용과 다른 부분이 없고, 굳이 사용자 페이지에 접속할 필요가 없기 때문에 의미가 없어진다고 생각이 되며, 차라리 비로그인처럼 기능이 비활성화되도록 해주고 강제로 기능을 활성화해서 사용하려고 하면 에러 메시지를 출력하거나 에러 페이지로 이동하도록 해줄 생각이다. 최종적으로 기능은 보여지되, 비활성화되어서 사용할 수 없도록 해주고 UI나 구조는 파악할 수 있도록 해줄 생각이다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
