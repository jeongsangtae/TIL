# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 게시글 PATCH API 수정 (날짜, 게시글 번호 및 새로운 게시글 번호 전달) 및 게시글 PATCH redirect 수정
    - 백엔드
      - board-routes의 post patch router에서 내용 수정
        - 저장되는 날짜가 KST 기준으로 저장되도록 date에 9시간 추가하는 코드 추가
        - DB에서 가장 최근에 저장된 게시글 정보를 가져오는 코드 추가
          - 수정되는 게시글의 게시글 번호를 업데이트할 때 사용됨
        - 수정되는 게시글 내용에서 postId와 date 항목 추가
          - 게시글 번호는 가장 최근에 저장된 게시글 번호에 1을 추가한 게시글 번호가 되도록 구성
          - 날짜는 현재 KST 기준으로 년, 월, 일이 새롭게 저장되도록 구성
        - 수정되는 게시글 번호를 가져와서 해당 번호보다 큰 모든 게시글 번호를 1씩 빼서 새롭게 번호를 지정하는 코드 추가
          - 이 내용은 게시글 삭제 시에 사용했던 코드로, 비어있는 번호가 없고 연속적으로 번호가 유지되도록 만들어줌
        - DB에서 \_id와 수정하려는 게시글 \_id를 비교해서 업데이트된 게시글을 찾는 코드 추가
        - 프론트엔드로 업데이트된 게시글의 게시글 번호를 전달하도록 구성
    - 프론트엔드
      - 백엔드에서 업데이트된 게시글의 게시글 번호를 전달 받아서, 게시글 수정 후에 새롭게 변경된 게시글 번호 URL로 리다이렉트되도록 구성
    - 재배포 후 확인
      - 이전에 구성된 내용에서는 게시글을 수정해도 현재 날짜로 업데이트되지 않으며, 게시글 번호도 그대로라서 게시글이 수정된 지 알 수가 없기 때문에, 게시글을 수정하면 날짜도 현재 날짜로 업데이트되며, 게시글 번호도 제일 마지막 번호가 되도록 구성해주었음
      - 게시글 내용을 수정하면 KST 기준 현재 날짜로 업데이트되고, 게시글 번호는 제일 마지막 번호를 가지게 되는 것을 확인할 수 있었음
      - 게시글 번호가 중간에 비는 번호없이 연속적으로 번호가 유지되는 것도 확인할 수 있었음
      - 게시글을 수정한 후에 리다이렉트되는 페이지도 이전 게시글 번호의 페이지가 아닌, 변경된 게시글 번호의 페이지로 이동해서 수정한 내용을 바로 확인할 수 있는 것도 확인
      - 게시글을 수정한 후에 게시글 목록으로 가면, 수정한 게시글이 제일 최상단에 보여지며 마지막 게시글 번호도 가지고 있고, KST 기준 현재 날짜로 업데이트되어 있는 것도 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/37dd5d0d9d71d5ed66172790165e8d2852276ad5)

<br />

- 추가 및 해결 해야 할 내용
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
  - 배포한 사이트 확인
    - 로컬 스토리지 초기화 오류를 해결한다면 해결한 방법에 대한 정리가 필요
    - UI를 수정해주고 최종 확인이 필요함
      - 회원가입 모달 크기 조정이 필요
      - 회원가입 모달은 아직 수정하지 못함
  - 배포하는 과정에서 오류가 생겼던 부분과 해결한 오류에 관한 내용을 정리해줘야 함
    - CORS 오류, Rewrite 관련 내용 등
    - 로컬 스토리지 초기화 오류

# 오늘 느낀 점

- 댓글과 답글은 수정을 했을 때 KST 기준으로 날짜가 업데이트되는 것을 확인해지만, 게시글은 수정을 해도 날짜가 업데이트되지 않고 게시글 제목과 내용만 업데이트되며, 게시글 번호도 변경되지 않아서 게시글을 수정한 지 알 수 없기 때문에, 백엔드 라우터 내용을 변경해서 이제는 게시글을 수정하면 KST 기준으로 현재 날짜로 업데이트되고, 게시글 번호는 게시글의 마지막 번호를 가지게 되었다. 이로 인해 게시글 수정 후 게시글 목록을 확인해보면 수정한 게시글이 최상단에 보여지게 되었으며, 기존의 게시글들은 번호가 1씩 줄어들고 한 칸씩 아래로 밀리는 것을 확인할 수 있었다. 마지막 수정해줘야 하는 부분은 회원가입과 로그인 모달 관련인데, 데스크탑 환경에서는 문제가 없지만 모바일 환경에서는 입력창을 클릭하면 자판이 올라와서 모달창을 가려버리기 때문에 이에 대해 UI 수정이 필요하다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
