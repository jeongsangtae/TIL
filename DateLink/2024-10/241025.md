# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 미리보기 로직에서 사용한 forEach와 reduce 차이
    - reduce의 추상성
      - reduce는 배열의 모든 요소를 누적(acc)하여 하나의 값으로 만드는 강력한 함수
      - 하지만 이로 인해 처음에는 어떻게 누적되는지를 명확히 이해하기 어렵다.
      - forEach는 단순히 배열을 순회하면서 작업을 수행하는 방식이라 더 직관적일 수 있음
    - 누적 객체 구조
      - reduce에서는 acc라는 누적 값을 다루기 때문에, 각 반복마다 acc 객체의 구조를 이해하고 수정하는 과정이 필요함
      - 반면 forEach는 순차적으로 실행되기 때문에 그런 점에서 더 직관적일 수 있음
    - 간결함의 장점
      - 코드 중복 최소화
        - reduce는 배열을 누적하는 방식이기 때문에 반복되는 로직을 하나의 블록으로 처리할 수 있음
        - forEach에 비해 코드의 흐름을 하나로 통합하기 때문에 간결해 보일 수 있음
      - 변수 관리
        - reduce는 forEach에서 구성한 외부 변수를 덜 사용하는 방식으로 코드를 작성할 수 있어, 함수형 프로그래밍 스타일에 더 가까움
    - 결론
      - 간결함
        - reduce를 사용하면 코드가 좀 더 간결해 보임
      - 난이도
        - reduce는 처음 접하는 사람에게는 다소 어려워 보일 수 있음
        - 추상적이거나 더 복잡한 함수일 수 있기 때문임
      - 어떤 방식이 더 적합한지는 코드의 읽기 쉬움과 간결함 사이에서 타협해야 함

  <br />

  - 게시글 내용 다듬는 함수의 reduce 로직 수정 (관리자 페이지의 내용 포함)
    - 게시글 내용을 다듬어서 보여주는 함수가 reduce로 구성이 되어있는데, 로직 구성에서 잘못된 부분이 있어서 원하는 동작이 이루어지지 않기 때문에 내용을 수정해서 ... 내용이 정상적으로 출력되도록 해주었다.
    - 프론트엔드
      - Post, AdminPost
        - 게시글 내용 미리보기 관련 함수의 내용을 수정
          - 이전에 구성한 reduce 내용에 exceeded 플래그를 추가해서 최대 길이를 초과한 경우, 이후 연산을 멈추도록 구성
          - 관리자 페이지의 게시글 목록에서도 똑같이 적용되도록 변경
        - forEach로 구성한 로직의 동작과 동일하게 작동되도록 구성
          - 코드 설명은 아래에서 계속
    - reduce로 구성된 trimContentHandler 함수 내용 설명 (수정한 reduce 내용)
      - 동일하게 세 개의 매개변수를 받도록 구성
        - 잘라낼 원본 문자열
        - 최대 길이 제한
        - 줄바꿈을 문자의 길이로 간주하는 값
      - 문자를 하나씩 순회
        - split으로 문자열을 문자 하나하나씩 배열로 분할하여 reduce로 순회
      - 초기값 설정
        - currentLength
          - 현재까지 계산된 문자열의 총 길이 (0으로 초기화)
        - truncatedContent
          - 잘린 문자열을 저장할 변수 (빈 문자열로 초기화)
        - exceeded
          - 최대 길이를 초과했는지를 나타내는 플래그 (false로 초기화)
      - 문자 순회 및 처리
        - 각 문자를 순회하며 현재 상태를 가져옴
      - 최대 길이를 이미 초과했는지 확인
        - if문으로 exceeded를 확인하는데 true라면 이미 최대 길이를 초과한 것이므로, 더 이상 처리할 필요가 없어서 처리를 진행하지 않고 현재 누적값(acc)을 그대로 반환해서 reduce 종료
      - 줄바꿈 처리
        - 추가 길이를 설정해서 줄바꿈 문자인 경우 추가 길이가 반영되도록 구성
          - 그 외의 경우는 일반 글자이므로 1만 추가
        - newLength를 계산하여 현재까지의 길이에 추가된 길이를 더함
      - 최대 길이 초과 확인
        - if문을 통해서 현재 길이가 최대 길이를 초과하는지 확인한 뒤에, 초과한 경우 truncatedContent에 ...을 추가하고 exceeded를 true로 설정
        - 초과하지 않은 경우에는 현재 문자를 truncatedContent에 추가하고 현재 길이를 업데이트, 그리고 exceeded는 false로 유지
      - 결과 반환
        - 최종적으로 result.truncatedContent를 반환하여 잘린 문자열을 결과로 제공
    - reduce로 처리하는 로직을 재수정하고 테스트해본 결과, forEach로 구성했던 결과물과 동일한 결과가 보여지는 것을 확인
      - reduce 내용을 정리하고, 배포된 사이트에서 확인해보니 ... 내용이 보여지는 게시글이 있고 안보이는 게시글이 있어서 추가로 확인해서 수정해주었다.
      - 내용에서 ...이 안보이는 것도 문제지만 줄바꿈으로 구성된 내용이 옆에 붙어서 나오는 문제도 같이 해결됨
      - 결과적으로 forEach로 구성했을 때와 동일하게 글자 수가 계산되어서 ... 내용이 보여지는 것을 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/b44df918321cbbc5066ba4c0ffd0e55d84ccb3bb)

<br />

- 추가 및 해결 해야 할 내용
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
  - 배포하는 과정에서 오류가 생겼던 부분과 해결한 오류에 관한 내용을 정리해줘야 함
    - CORS 오류, Rewrite 관련 내용 등
    - 로컬 스토리지 초기화 오류 해결한 방법에 대한 정리가 필요
  - 설계, 결과 이 부분에 대한 내용을 정리해줘야 하고, 발생했던 에러에 대해 최대한 정리해주는 것도 필요함
    - 파일은 구성해놓은 상태이기 때문에 내용 정리만 차분히하면 됨
    - 설계는 완료
    - 결과 진행중

# 오늘 느낀 점

- 게시글 내용 미리보기 로직을 reduce로 변경했었는데, 이 reduce 로직이 forEach로 구성했을 때와 마찬가지로 동일한 결과를 출력한다고 생각했지만, 조금 다른 결과가 출력되어서 reduce 로직을 수정해주었다. exceeded 플래그가 최대 길이를 초과한 이후의 처리를 중단시키면서 최종 결과가 안정적으로 출력하게 되고, ... 내용도 문제없이 출력되는 것을 확인할 수 있었다. 로컬 환경과 배포한 환경에서도 문제없이 ... 내용이 출력되는 것을 확인할 수 있었고, 줄바꿈이 적용되었지만 내용이 출력될 때 바로 옆에 붙어서 보이는 오류도 수정된 것을 확인해주었다. 만약을 위해서 한 번 더 구성된 내용을 확인해본 후에 테스트해봐야 하고, 더이상 문제가 없다면 굳이 코드 변경을 하지 않아도 될 것 같고, 이제 정말로 마무리이기 때문에 프로젝트 결과와 오류 내용을 작성해주면 될 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
