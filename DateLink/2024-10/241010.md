# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용

  - 모바일 환경 채팅 컨테이너 높이 수정 테스트 (calc 수정) 및 메인헤더 로고 폰트 수정
    - CSS
      - Chats, AdminUserList
        - 빼는 수치를 3rem으로 수정
      - MainHeader, AdminMainHeader
        - 로고 폰트 사이즈가 0.8rem이 적용되도록 수정
    - 재배포 후 확인
      - 채팅 컨테이너 내에서 입력창을 클릭했을 때 축소되는게 적절하긴 하지만 기본 채팅 컨테이너 크기가 조금 작은 것 같아서 키워서 추가 확인이 필요
      - 로고 폰트 사이즈를 조금 더 줄여줌으로써, 더 작은 해상도에서도 로고 글씨가 아래로 내려오지 않고 한 줄로 보이는 것을 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/b9379ecf6be82cd1594ca7eec4eb6e85ad8f8b86)

  <br />

  - 모바일 환경 채팅 컨테이너 높이 수정 테스트 (calc 수정)
    - CSS
      - Chats, AdminUserList
        - 첫 번째 수정 테스트
          - 80vh에서 90vh로 변경
        - 두 번째 수정 테스트
          - 90vh에서 85vh로 변경
      - AdminChats
        - 주석 처리했던 모바일 환경 내용을 다시 활성화하고 높이를 85vh로 설정
    - 재배포 후 확인
      - 첫 번째 수정 테스트
        - 90vh로 변경했을 때, 채팅 컨테이너 크기가 너무 크고 입력 자판이 올라오면 메인헤더를 가리게 되므로 조금 축소할 필요가 있음
      - 두 번째 수정 테스트
        - 85vh로 변경해준 크기가 제일 적당했으며, 입력 자판이 올라와도 메인헤더를 가리지 않고 메인헤더 아래쪽에 위치해서 보이는 것을 확인
        - 모바일 환경에서 관리자 채팅 컨테이너 크기를 다시 확인하기 위해서 주석 처리를 풀어주고 높이 수치를 변경했으나, 여전히 제대로 적용되지 않아서 추가 확인이 필요
    - [코드 내용 1](https://github.com/jeongsangtae/mini-community-platform/commit/4e46fb2b7fbe2b164d1cee3efcf8631a0e71632f)
    - [코드 내용 2](https://github.com/jeongsangtae/mini-community-platform/commit/a533556b9dae4f2980c62f51d05f2f45337edfca)

  <br />

  - 모바일 환경 관리자 채팅 컨테이너 높이 수정 테스트 및 채팅 입력 띄어쓰기 문제 수정
    - CSS
      - AdminChats
        - 80vh에서 100vh로 변경
      - ChatInput
        - font: inherit를 추가해서 부모 요소에서 사용된 모든 폰트 관련 속성들을 상속받아서 사용하도록 구성
        - 폰트 사이즈는 0.8rem 크기로 설정
    - 재배포 후 확인
      - 관리자 채팅 컨테이너에서 높이를 수정해도 여전히 변화가 없어서 어떤 부분이 문제인 지 다시 확인해봐야 함
      - 채팅 입력에서 띄어쓰기를 사용하면 간격이 너무 벌어져서 보기 불편한 느낌이 있었는데, font: inherit를 추가함으로써 띄어쓰기가 일반 띄어쓰기와 동일하게 간격이 조금만 벌어지는 것을 확인할 수 있었고, 해당 내용을 제출하면 그대로 보여지는 것도 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/7df67365210f730ca2620fb3c02f7c51f103c2a2)

  <br />

  - 모바일 환경 관리자 채팅 컨테이너 높이 수정 테스트
    - CSS
      - AdminChats
        - keyframes에서 사용되는 애니메이션 이름에 오타가 있기 때문에 해당 내용을 수정
        - 높이를 채팅 컨테이너, 그리고 사용자 리스트 컨테이너와 동일하게 calc(85vh-3rem)으로 구성
    - 재배포 후 확인
      - 애니메이션 이름에서 chats가 아닌 chat인데, chats를 사용한 채로 계속 테스트해서 적용이 되지 않은 것으로, 이제는 해결되어서 채팅 컨테이너, 사용자 리스트 컨테이너 크기와 동일하게 맞춰진 것을 확인할 수 있었다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/3678374a65822d67aef78800b1ba3de95ee639fe)

  <br />

  - 데이터가 저장되는 날짜 내용 수정 (data -> KST date로 수정)
    - 백엔드
      - board-routes, user-chat-routes, admin-chat-routes
        - 데이터가 저장될 때 월, 일 부분에서도 시간처럼 두 자리로 저장되도록 구성
          - toString().padStart(2, "0")를 사용해서 두 자리로 포맷팅하여 저장
          - ex) 10월은 "10"으로 저장, 8월은 "08"로 저장
        - 날짜와 시간에 사용되는 date 변수에 kstDate 변수를 추가해서 9시간이 더해진채로 데이터가 저장되도록 구성
        - 데이터가 저장되는 내용에서도 date 변수가 아닌, kstDate 변수가 사용되도록 수정
          - ex) date.getFullYear -> kstDate.getFullYear
    - CSS
      - AdminChat, Chat
        - left와 right 수치를 -70px에서 -75px로 수정
        - 변경된 내용으로 인해서 간격이 더 필요하다고 생각되어 수치 변경
    - 재배포 후 확인
      - 채팅 메시지가 저장될 때, 월과 일 내용이 "2024 08 01" 이런식으로 저장되는 것이 아닌, "2024 8 1" 이런식으로 저장되기 때문에, 저장된 데이터를 오름차순으로 출력할 때 비교하는 부분에서 9월과 10월 비교하면 9와 1을 비교해서 10월에 작성한 내용이 앞으로 보여지게 되면서 순서가 뒤죽박죽 되기 때문에 한 자리 월과 일이 두 자리로 저장되도록 수정해주었다.
        - 두 자리로 모두 저장되면서, 오름차순 비교에서 더이상 오류가 발생하지 않고 정상적으로 비교해서 채팅 메시지가 순서대로 보여지는 것을 확인
      - 로컬 환경에서는 컴퓨터의 시간대에 맞춰서 시간이 저장되기 때문에 채팅 메시지 시간이나 게시글, 댓글 같은 내용이 저장될 때 그 날짜와 시간으로 저장되지만, 배포 환경에서는 서버의 기본 시간대에 맞춰 저장되기 때문에 9시간이 차이나는 상태로 저장되어, 보는 사람이 혼동할 수 있어서 데이터가 저장될 때 9시간을 추가해서 저장되도록 구성
        - 9시간이 추가된 상태로 저장된 내용을 확인해보니, 현재 한국 표준시에 맞게 저장되는 것을 확인
        - 9시간을 더하는 방법외에 toLocaleString을 사용해서 timeZone이 서울로 맞춰지도록 하는 방법과 Moment.js, Day.js 같은 라이브러리를 사용할 수 있지만 그냥 서버에서 시간을 저장할 때 KST로 시간으로 저장되도록 구성해주었다.
        - 로컬 환경에서는 9시간이 더 추가된 상태로 보여지지만, 배포 환경에서는 현재 시간에 맞춰서 저장되는 것을 확인
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/55d34bf2a9d70800daee923949e1734b15ca0f5d)

<br />

- 추가 및 해결 해야 할 내용
  - 마지막 기능 추가로, 관리자 권한을 부여하는 내용을 생각하고 있음
    - 가입할 때는 일반 사용자로 가입을 할 수 있고, admin 관리자 계정으로 관리자 페이지에서 관리자 권한을 부여하는 내용을 생각 중
  - 새롭게 발견한 문제
    - 관리자 채팅의 사용자 리스트에서 사용자와 나눈 마지막 메시지 내용을 가져오는데, 이 때 새로고침을 하지 않으면 당장 채팅을 나눠도 실시간으로 마지막 메시지가 갱신되지 않아서 새로운 메시지가 있는 지 확인할 수 없기 때문에 추가하는 것도 고려해야 함
    - 한편으로는, 관리자 채팅이라서 사용자가 겪는 불편함이 아니기 때문에 그냥 놔두는 것도 고려 중
  - 배포한 사이트 확인
    - 로컬 스토리지 초기화 오류를 해결한다면 해결한 방법에 대한 정리가 필요
    - UI를 수정해주고 최종 확인이 필요함
      - 회원가입 모달 크기 조정이 필요
      - 회원가입 모달은 아직 수정하지 못함
    - 게시글, 댓글, 답글이 수정될 때 날짜도 함께 업데이트되는 지 확인 필요
  - 배포하는 과정에서 오류가 생겼던 부분과 해결한 오류에 관한 내용을 정리해줘야 함
    - CORS 오류, Rewrite 관련 내용 등
    - 로컬 스토리지 초기화 오류

# 오늘 느낀 점

- 모바일 환경에서 채팅 입력창을 클릭하면 입력 자판이 올라오면서 화면 위로 올라가는 문제를 해결해주었고, 관리자 채팅 또한 문제없이 해결되었으며, 관리자 채팅에서 사용자 리스트 또한 해결되었다. 로고 크기를 조금 더 수정해서 작은 해상도에서 로그 글씨가 아래로 내려오지 않도록 처리해주었고, 채팅 입력에서 띄어쓰기를 사용하면 간격이 너무 크게 벌어지기 때문에 폰트를 변경해서 해당 문제를 고쳐주었다. 그리고 데이터가 저장될 때 월과 일도 두 자리수로 저장되도록 수정해주면서 오름차순 정렬이 오류가 생기지 않도록 해주고, 배포 환경에서 KST 한국 표준 시간대인 현재 시간대로 출력이 되도록 구성해주었다. 남아있는 문제로는 회원가입 모달에서 입력창을 클릭하면 자판이 올라와서 가려버리는 문제를 수정해줘야 하고, 게시글 그리고 댓글, 답글 내용을 수정했을 때 수정한 날짜로 업데이트되어 저장되는 지 확인해서, 업데이트 되지 않는다면 업데이트되도록 해줘야 한다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
