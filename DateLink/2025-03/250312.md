# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 홈으로 이동하는 버튼 추가 및 그룹 채팅방 목록 실시간 반영 로직 수정 및 그룹 채팅방 삭제 후 홈으로 이동하는 내용 추가
  - 그룹 채팅방 내부에 있을 때 홈으로 이동할 수 있는 버튼을 추가해 주었고, 그룹 채팅방 초대를 수락하면 실시간 반영되어 보여지는 로직 위치도 수정해 주었으며, 그룹 채팅방을 삭제한 후에 해당 그룹 채팅방에 남아있지 않고 홈으로 이동되도록 구성 추가
  - 프론트엔드
    - groupChatStore
      - acceptGroupChatInvite 액션 수정
        - getGroupChats 액션을 다시 가져와서 실행하는 내용 삭제
        - 실시간 반영 코드를 다른 곳에 이동시켜 실행
    - RootLayout
      - Link 컴포넌트를 추가해 클릭 시에 홈으로 이동할 수 있도록 구성
        - 경로를 "/"로 설정해 클릭 시, 홈으로 이동
    - GroupChat
      - useNavigate Hook을 불러오고 사용할 수 있도록 구성
      - groupChatDeleteHandler 함수 수정
        - 그룹 채팅방이 삭제된 후에 navigate가 실행되어, 홈으로 이동되도록 구성
    - GroupChatInviteList
      - useGroupChatStore Zustand에서 getGroupChats 액션을 추가로 불러오도록 구성
      - acceptGroupChatInviteHandler 함수 수정
        - 비동기 함수로 타입 정의
        - async-await를 추가해 acceptGroupChatInvite 액션이 비동기 함수로 실행되도록 구성
        - acceptGroupChatInvite 액션이 실행된 후에 getGroupChats 액션이 실행되도록 구성
          - 마찬가지로 비동기 함수로 실행되도록 구성
          - acceptGroupChatInvite 액션 내부에서 실행되던 getGroupChats 액션 내용을 acceptGroupChatInviteHandler 함수에 옮겨서 실행
          - acceptGroupChatInvite 액션 내부에서 실행하는 것보다 의존성은 낮추고, 유연성은 높임
      - rejectGroupChatInviteHandler 함수 수정
        - 비동기 함수로 타입 정의
        - async-await를 추가해 rejectGroupChatInvite 액션이 비동기 함수로 실행되도록 구성
    - DirectChats
      - 아이콘이 보여질 내용 주석 처리
  - 액션 내부에서 다른 액션 내용을 불러와 실행하지 않고, 함수 내부에서 순서대로 액션을 불러와 실행되도록 수정한 내용이 이전과 동일하게 작동하는 것을 확인할 수 있었고, 루트 레이아웃에 추가한 Link 컴포넌트 클릭 시에 홈으로 이동되는 것 또한 확인했고, 그룹 채팅방 삭제 시에 더이상 해당 채팅방에 남아있지 않고 홈으로 이동되며 해당 채팅방이 실시간으로 사라진 것을 확인할 수 있었다.
    - 그룹 채팅방 삭제 시에 삭제한 사용자는 실시간 반영이 되지만, 참여한 다른 사용자 화면에는 실시간 반영이 되지 않아서, 이와 관련해 실시간 반영이 되도록 여러 로직과 방법을 테스트해 보았지만 해결이 되지 않아서 다른 방법으로 시도해 봐야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/192be4eb9fdb2ee54c77b73c9034588382090962)

# 오늘 느낀 점

- 그룹 채팅방 삭제 시에 삭제한 사용자만 실시간 반영되고, 참여한 다른 사용자 화면에는 실시간 반영이 되지 않기 때문에, 이와 관련해 실시간 반영이 되도록 여러 로직을 추가하고 테스트해 본 결과, 모두 실패하고 제대로 적용이 되지 않았기 때문에 다른 방법을 찾아서 다시 시도해 봐야 한다. 추가로 그룹 채팅방 초대 내용도 알림만 실시간 반영되고, 버튼 관련된 내용은 실시간 반영이 되지 않기 때문에 추가가 필요하고, 초대 내용에서 수락 버튼을 클릭하면 한번 사라지고 새로고침하면 다시 보여지기 때문에 이와 관련된 내용도 수정을 해 줘야 한다. 그룹 채팅방 초대 수락과 관련된 내용은 거절과 마찬가지로 수락 버튼을 클릭하면 해당 내용이 삭제되도록 하는 것이 어떤지 고민을 좀 해 봐야 하며, 현재 실시간 반영과 관련된 로직들이 문제가 많아서 어떻게 처리를 해 주는 것이 좋을 지 생각하고 여러 방법을 테스트해 봐야 할 것 같다. 마지막으로 그룹 채팅방 삭제 관련된 내용은 호스트만 삭제할 수 있도록 변경을 해 줘야 하고, 일반 참여자는 그룹 채팅방을 삭제하는 것이 아닌 나가기 기능이 보여지고 수정 버튼은 보여지지 않도록 구성해 줘야 한다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 그룹 채팅방을 호스트만 삭제할 수 있도록 해야 하고, 그룹 채팅방에 참여한 다른 사용자는 그룹 채팅방 삭제가 아닌, 나가기 버튼이 보여져야 하며 수정 버튼은 보이지 않도록 수정 필요

- 새로운 메시지 추가되었을 때 알림 뜨는 기능 (추가하긴 했으나, 미완성)

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 그룹 채팅방에서 채팅 메시지가 추가되면 전역적으로 알 수 있도록 알림이 떠야 하고, 그 알림 관리를 소켓 Zustand에서 할 수 있도록 구성 필요

- 그룹 채팅방 초대하고 알림을 전송하는 기능에서, 로그인한 사용자가 아닌 친구에게 보내는 그런 구조로 작동되도록 수정이 필요 (비로그인 상태여도 상관이 없음 단순하게 친구한테 친구 요청하면 알림 메시지가 전달되어야 함)

- 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
