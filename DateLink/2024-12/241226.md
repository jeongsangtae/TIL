# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 그룹 채팅방 loader 함수 추가 및 인터페이스 타입 재사용 추가 및 그룹 채팅방 컴포넌트 수정 그리고 더 많은 내용
  - 생성한 그룹 채팅방 내용을 불러오기 위해 loader 함수 내용을 추가하고, 인터페이스 타입 내용을 재사용하기 위해 types 파일에 내용을 추가, 라우터 파일에서 그룹 채팅방 페이지에 loader 내용을 추가하고 그룹 채팅방 컴포넌트에서 그룹 채팅방 내용을 불러오기 위해 코드를 수정
  - 프론트엔드
    - router
      - 추가된 loader 함수 내용을 적용시키기 위해 그룹 채팅방 페이지에 loader 속성을 추가하고 loader 함수를 적용
    - types
      - 그룹 채팅방 데이터 관련된 타입 정의 내용을 재사용하기 위해 항목을 추가
    - GroupChatPage
      - loader 함수를 추가
      - loader 함수 타입은 async를 사용하기 때문에 Promise를 추가하고, 재사용을 위해 구성한 내용을 가져와 사용
        - DB 데이터가 배열로 구성되어 있기 때문에 배열을 타입에 적용
      - 나중을 위해 환경 변수에서 API URL을 가져오는 내용을 추가
      - 백엔드와 연결될 fecth 함수를 추가
        - credentials 항목을 미리 추가해서 CORS 에러 대비
        - 에러 발생 시 에러 메시지 출력
        - 응답 데이터에 재사용하는 타입 정의 내용을 적용
    - GroupChats
      - loader 함수를 통해 불러오는 데이터 정보를 가져오도록 useLoaderData를 추가
        - 타입 정의는 재사용하는 타입 정의 내용을 적용
      - 불러온 데이터에 map 함수를 추가해 새로운 배열로 만들고 GroupChat 컴포넌트로 제목 내용을 props로 전달하도록 구성
    - GroupChat
      - 전달 받은 props 내용을 구성해 출력
  - 구성한 내용을 테스트하기 위한 백엔드 구성을 하지 않아서, 정상적으로 출력이 되는지 아직 확인할 수는 없지만, 현재 상태로는 에러가 발생될 것으로 예상됨
    - 타입을 정의한 부분에서 빨간 밑줄이 보여지고, 구성한 map 함수 내용과 loader 함수 내용을 불러온 부분도 빨간 밑줄이 보여서 확인을 해 봐야 함
    - 타입 정의한 부분에서 react router dom 버전을 6.4 이상 버전으로 변경하면 빨간 밑줄이 사라지는데, 현재 버전인 6.28 버전을 사용하면 빨간 밑줄로 제대로 감지 못함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/50414cdabe9ec9ad4bff83bf340a24e75dcd9923)

<br />

- 백엔드에서 그룹 채팅방 관련 get 라우터 추가 및 그룹 채팅방 컴포넌트, 그룹 채팅방 페이지 응답 데이터 수정 및 그룹 채팅방 내용 화면에 출력
  - 그룹 채팅방 목록을 화면에 출력하기 위해 프론트엔드에서 구성한 loader 함수와 연결되는 그룹 채팅방 관련 get 라우터를 추가하고, 그룹 채팅방에서 발생하는 오류를 고치기 위해 내용을 변경해 주었으며, loader 함수가 구성된 내용에서 resData로 객체 내용을 전달받는 것이 아닌, resData.groupChats로 배열 내용을 전달받도록 변경해 주었다.
  - 백엔드
    - group-chat-routes
      - 그룹 채팅방 목록을 가져오는 get 라우터 내용을 추가
      - groupChats 컬렉션에서 전체 내용을 가져오도록 구성하고, 에러가 발생하면 오류 메시지가 출력되도록 구성
      - 그룹 채팅방 목록을 groupChats라는 이름의 객체로 구성해 프론트엔드로 전달
  - 프론트엔드
    - GroupChatPage
      - 응답 받은 데이터를 객체 내용으로 전달받는 것이 아닌, 배열 형식으로 전달받기 위해 resData -> resData.groupChats로 변경
    - GroupChats
      - useLoaderData에 사용되는 변수 이름을 변경하고, 타입 정의 내용도 수정
        - 타입 정의 내용에 groupChats를 추가해서 이 내용이 타입 정의 되도록 변경
        - 타입 정의는 수정하긴 했는데, 여전히 빨간 물결이 보여서 추가 수정이 필요
      - map 함수가 구성되는 부분에서 return을 추가하고, 내용이 보여지는 GroupChat 컴포넌트 부분에 key props를 추가해 \_id 내용을 구성
    - GroupChat
      - 단순히 프래그먼트에서 div로 변경해 그룹 채팅방 목록이 세로로 정렬되도록 변경
  - 프론트엔드와 백엔드 연결을 해 주고 오류가 발생하는 부분을 수정한 후에 확인한 결과, 그룹 채팅방 목록이 화면에 출력되는 것은 문제가 없지만, 그룹 채팅방 컴포넌트 내에서 여전히 타입 정의한 부분과 loader 함수로 불러와 map 함수를 사용하는 부분에서 빨간 물결이 보이기 때문에 추가로 수정이 필요하다.
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/78b6977cf3633c9bc9b356c60b9afbc86108ca56)

# 오늘 느낀 점

- 생성한 그룹 채팅방 내용을 출력하기 위해 로직을 구성하고 테스트한 결과, 그룹 채팅방 목록이 출력이 되긴 하지만, 코드 내의 타입 정의 부분과 useLoaderData 변수 부분에서 빨간 물결로 에러가 발생하기 때문에 추가 수정이 필요하다. 빨간 물결로 에러가 발생하는 건 react router dom 버전을 6.4.x 대 버전으로 변경하면 해결이 되는 것을 확인하긴 했지만, 다른 패키지들과의 호환성 문제가 걱정되기에 다른 방법을 테스트해 보고 안된다면 버전을 변경해 오류를 해결해 줄 생각이다. 저 오류를 해결하고 난 후에 이제 그룹 채팅방 삭제 기능을 추가해 봐야 하고, 그 다음 원래는 초대 기능을 구현하려고 했으나 현재 구성에서 초대 기능을 구현해 봐야 테스트하고 확인할 수가 없기 때문에 로그인과 회원가입 기능부터 구현하는 것이 맞다고 생각이 되며, 그리고 그룹 채팅방 목록이 그룹 채팅방을 클릭했을 때 보여지는 것이 아닌, 메인헤더 즉 루트 레이아웃 내에서 다 보여지도록 구성을 변경해 줘야 할 것 같다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
