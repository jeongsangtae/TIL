# 오늘 한 일

### React 공부

- Redux에 뛰어들기 (Context API의 대안)

  - React 앱의 state에 대한 또 다른 관점
    - Redux 란?
      - 크로스 컴포넌트 또는 앱 와이드 상태를 위한 상태 관리 시스템
      - 데이터를 다수의 컴포넌트나 심지어는 앱 전체에서 관리하도록 도와준다.
    - 세 가지의 state
      - Local state
        - 데이터가 변경되어서 하나의 컴포넌트에 속하는 UI에 영향을 미치는 state
        - 예로, 사용자 입력을 청취하고 useState를 사용해서 그 입력을 모든 키 입력과 함께 state 변수에 저장 또는 세부정보 필드를 켜고 끄는 toggle 버튼이 있다.
        - 보통 useState를 사용해서 컴포넌트 안에서 로컬 상태를 관리한다. 약간 복잡하다면 useReducer를 사용할 수도 있다.
      - Cross-Component state
        - 하나의 컴포넌트가 아닌, 다수의 컴포넌트에 영향을 미치는 state
        - 예로, 모달 오버레이를 열거나 닫는 버튼, 그런 모달 컴포넌트를 다수의 컴포넌트에 영향을 미칠 수 있고 모달을 여는 트리거는 정의에 따르면 모달의 바깥에 있다.
        - 모달 안쪽에 있는 버튼을 클릭하여 모달을 닫을 수도 있다.
        - 이와 같은 경우들은 다수의 컴포넌트가 협력해서 어떤 모달을 표시하고 감추게 된다.
        - useState나 useReducer를 이용해서 구현할 수 있고, 그 때는 prop을 주변에 넣어줘야 하며, prop 체인을 구축해야 한다.
          - prop 체인은 다른 말로 prop 드릴링이라고도 한다.
          - 다수의 컴포넌트에 걸쳐 prop을 넣을 때 함수도 함께 넣을 수 있다.
          - 이 경우 다양한 컴포넌트들이 협력하고 state를 함께 관리하게 된다.
          - 이 방법은 나쁘거나 한 것은 아니며, 단지 로컬 state보다 약간 복잡하다.
      - App-Wide state
        - 다수의 컴포넌트가 아닌, 애플리케이션의 모든 컴포넌트에 영향을 미치는 state도 있는데 이 경우 앱 와이드 state라고 부른다.
        - 예를 하나 들면, 사용자 인증이 있다.
          - 로그인하면 탐색 바를 변경해야 할 수도 있다. 새로운 옵션을 표시하기 때문이다.
          - 다른 많은 컴포넌트에도 영향을 미친다.
          - 데이터를 더 많이 또는 적게 표시
        - useState나 useReducer를 사용하고 state 값을 넣어주고 props 전체 주변의 함수를 업데이트해서 그걸 관리할 수도 있다.
    - 크로스 컴포넌트와 앱 와이드 state에서 데이터를 넣고 전체 props 함수를 업데이트하는건 번거로울 수 있다. 이럴 때 사용할 수 있는게 React Context인데 크로스 컴포넌트 state나 앱 와이드 state를 쉽게 관리하고 단순화 해준다.
    - Redux 또한 같은 문제를 해결해주는데, React Context와 Redux는 모두 크로스 컴포넌트 state나 앱 와이드 state를 관리하도록 도와준다.

  <br />

  - Redux vs React Context
    - React Context를 사용하면 prop 체인이나, prop 드릴링을 하지 않을 수 있고, 대신에 Context와 ContextProvider 컴포넌트를 중심으로 state를 관리할 수 있다.
    - 다수의 컴포넌트에 영향을 미치는 state를 관리하는 React Context가 이미 있는데 왜 Redux가 필요한가?
      - React Context는 잠재적인 단점이 몇 가지 있다.
        - 잠재적이라고 하는 이유는, 내가 구축하는 앱에서는 중요하지 않을 수 있다. 그리고 중요하지 않다면 Redux가 필요 없다.
        - 잠재적인 단점 중에 하나는 React Context를 사용하면 설정이 아주 복잡해질 수 있고, React Context를 이용한 state 관리가 상당히 복잡해질 수 있다는 점이 있다.
          - 이 복잡성은 내가 구축하는 애플리케이션의 종류에 따라 달라질 것이다.
          - 소형 또는 중형 애플리케이션은 대부분 문제가 되지 않을 가능성이 높다.
          - 하지만 많은 컴포넌트와 내용이 있는 엔터프라이즈 수준의 애플리케이션 같은 대형 애플리케이션을 구축할 때, React Context를 사용하면 여러 개의 중첩된 context Provider가 있는 경우가 발생할 수 있다.
          - 아주 다양하고 많은 context가 있고, 다수의 컴포넌트나 전체 앱에 영향을 미치는 많은 다양한 state가 있다. 그래서 그런 state들을 관리하기 위해 구축한 ContextProvider 컴포넌트가 아주 많이 있게 된다.
          - 그래서 결과적으로 아주 심하게 중첩된 JSX 코드가 나오게 된다.
          - 물론 다양하고 많은 ContextProvider를 구축할 필요는 없다. 애플리케이션의 전체 state와 모든 다양한 state들을 관리하기 위해 큰 context 하나와 ContextProvider 컴포넌트 하나만 사용할 수 있다.
          - 하지만 그렇게 하면 큰 ContextProvider 컴포넌트 하나가 다양한 많은 것들을 관리하기 때문에 그것 자체를 유지하고 관리하기가 어려워질 수 있다.
          - 큰 context 하나가 인증, 테마, 사용자 입력, 모달 표시 여부뿐만 아니라 다른 많은 것들도 관리해야 한다. 이게 단점이 될 수 있다.
          - 만약 다수의 context로 나눈다면 아래와 같은 중첩된 JSX 코드로 구성이 되게 된다.
          ```
          return (
            <AuthContextProvider>
              <ThemeContextProvider>
                <UIInteractionContextProvider>
                  <MultiStepFormContextProvider>
                    <UserRegistration />
                  </MultiStepFormContextProvider>
                </UIInteractionContextProvider>
              </ThemeContextProvider>
            </uthContextProvider>
          )
          ```
          - 아직은 강의에서 이런 상황을 접해본 적이 없는데, 강의에서는 대형 엔터프라이즈급 애플리케이션을 지금까지 구축해본 적이 없기 때문이다.
          - 하지만 실제 React 프로젝트에서 분명히 이런 문제를 접할 수 있다. 그래서 이게 잠재적인 단점이 된다.
        - 또 다른 잠재적 단점은 성능 문제가 있다.
          - React 팀원이 올린 공식 언급이 있는데 요약해보면, 테마를 변경하거나 인증 같은 저빈도 업데이트에는 아주 좋지만, 데이터가 자주 변경되는 경우에는 좋지 않다고 언급되고 있다.
          - 고빈도 변경은, 비록 정확히 고빈도가 뭘 의미하는지 분명하진 않지만 더 자주 또는 빈번히 일어나는 변경을 말한다.
            - 이와 같은 변경에는 적합하지 않다는 말이 된다.
          - 새 context는 유동적인 state 확산을 대체할 수 없다고도 한다.
            - Redux는 유동적인 state 관리 라이브러리다.
          - 요약하면 React 팀원은 React Context가 모든 시나리오와 모든 경우에서 Redux를 훌륭하게 대체할 수 없다고 말하고 있다.
        - React Context를 사용해서 부적절한 state를 관리한다면 성능이 나쁠 수 있다는 것이 된다.
        - 정리해보면 복잡한 설정과 관리라는 단점이 있는데 그 이유는 아주 심하게 중첩된 JSX 코드와 다양하고 많은 ContextProvider, 또는 유지하기 어려운 거대한 하나의 ContextProvider를 갖게 될 수 있기 때문이다.
        - 다른 한편으로 잠재적인 성능 이슈도 있는데, 고빈도 state 변경에는 React Context를 사용하지 말아야 하기 때문이다.
        - 소형 또는 중형 앱 그리고 심지어는 많은 대형 앱에서도 이게 상관없을 수도 있다.
        - 이 강의에서 목표는 현실적인 React 강의를 해주는 것
          - 모든 종류의 프로젝트에 적용할 수 있는 React
          - 그래서 내가 다루는 프로젝트에서 문제가 될 수 있는 이러한 React Context의 한계를 알아두는 것이 중요하다.
      - React Context와 Redux 모두 중요하기 때문에 둘 중에 하나를 선택하는 의사결정이 아니다.
      - 하나의 애플리케이션에서 context와 Redux를 둘 다 사용할 수도 있다.
      - 일반적으로 앱 와이드 상태에는 둘 중에 하나만 사용한다. 하지만 전반적인 앱 와이드 상태에 Redux를 사용하고, 앱에서 중요한 일부 다중 컴포넌트 state에는 context를 사용할 수 있다.

  <br />

  - Redux 작동 방식
    - Redux는 결국 React Context의 대안이라고 할 수 있다.
    - Redux는 애플리케이션에 있는 하나의 중앙 데이터 저장소이다.
      - 여기서 데이터는 state를 가리킨다.
      - 정확히 한 개의 저장소를 갖는다.
      - 절대로 2개 이상은 갖지 않는다.
      - 그 저장소에 전체 애플리케이션의 모든 state를 저장한다.
      - 그 저장소에 인증 상태, 테마, 내가 저장하려는 입력 상태 등 무엇이든 저장한다.
      - 크로스 컴포넌트든 앱 와이드 state든 모두 하나의 저장소에 저장된다.
      - 하나의 저장소로 관리하면 관리가 어려울 것 같은데, 그 저장소 전체를 항상 직접 관리할 필요가 없다.
    - 궁극적으로 저장소에 데이터를 저장해서 컴포넌트 안에서 그걸 사용할 수 있다.
      - 예로, 사용자의 인증 상태가 변경된다거나, 거기 있는 데이터가 변경되면 컴포넌트에서 그걸 인지해서 그에 맞춰 대응하고 UI를 업데이트 하길 원한다.
      - 이 컴포넌트를 위해 중앙 저장소에 대한 구독을 설정한다.
      - 컴포넌트가 저장소를 구독하고 데이터가 변경될 때마다 저장소가 컴포넌트에 알려주게 된다.
      - 그러면 컴포넌트는 필요한 데이터를 받게 된다.
        - 예로, 현재의 인증 상태 같은 걸 받게 된다.
        - Redux 저장소의 일부를 받게 된다.
      - 그리고 그 데이터를 사용할 수 있게 된다.
      - 물론 이게 state이기 때문에 데이터 자체도 때때로 변경되며, 그 데이터를 변경할 방법이 필요하다.
    - 저장된 데이터를 어떻게 변경하는가?
      - 중요한 규칙이 하나 있는데, 컴포넌트는 절대로 중요하지 않고, 절대로 저장된 데이터를 직접 조작하지 않는다.
        - 그래서 구독을 하는 것이고, 데이터는 절대로 반대 방향으로 흐르지 않는다.
        - 적어도 직접적인 데이터 흐름은 그렇지 않다는 말
      - 컴포넌트는 저장소에 있는 그 데이터를 직접 조작하지 않는다.
        - 대신 reducer라는 개념을 이용한다.
        - Reducer 함수를 사용
        - Reducer 함수를 설정해야 하는데, 이 함수는 변형을 담당한다.
        - 즉 저장소 데이터를 변경하는 걸 담당한다.
        - 여기서 거억해야 할 점은 Reducer라는 용어가 useReducer처럼 앞에서 들어본 것이지만, 여기서 Reducer 함수는 내가 배운 useReducer Hook과는 다르다는 점이다.
        - Reducer 함수는 일반적인 개념으로 입력을 받아서 그 입력을 변환하고 줄이는 함수이다.
          - 예로 숫자로 된 리스트를 그 숫자들의 합으로 줄일 수 있다.
        - 일반적으로 Reducer 함수는 입력을 변환해서 새로운 출력, 새로운 결과를 뱉어낸다.
        - Reducer 함수는 일반적인 프로그래밍 개념이고, useReducer는 Hook이 사용하고 이 Reducer 함수는 Redux도 사용한다.
      - Reducer 함수가 있고, 그게 사용자 데이터의 업데이트를 담당한다. 그리고 그 데이터를 구독하는 컴포넌트가 있다.
    - 컴포넌트와 Reducer 함수를 어떻게 연결할까?
      - 데이터 변경을 트리거하는 건 물론 컴포넌트가 한다.
        - 예로, 어떤 컴포넌트의 버튼을 클릭하면 그게 데이터 변경을 트리거한다.
      - 트리거라는 단어가 딱 적절한데, 액션이 있고 컴포넌트가 액션을 발송한다.
      - 컴포넌트가 어떤 액션을 트리거한다고 말할 수도 있다.
      - 액션은 사실 단순한 JS 객체이고, 그게 Reducer가 수행해야 할 작업을 설명하게 된다.
      - Redux는 그 액션을 Reducer로 전달하고 원하는 작업에 대한 설명을 읽게 된다. 이어서 그 작업을 Reducer가 수행하게 된다.
      - 컴포넌트가 액션을 발송하고 그 액션에는 수행해야 할 작업이 설명되어 있다. 하지만 그걸 직접 하지는 않고, 액션들을 Reducer로 전달해서 그 액션이 원하는 걸 Reducer가 하게 된다.
      - 이 후에 Reducer는 새로운 state를 뱉어내고 그게 실제로 그 중앙 데이터 저장소의 기존 state를 대체하게 된다.
      - 데이터 저장소의 state가 업데이트되면 구독 중인 컴포넌트가 알림을 받게 되고 컴포넌트는 UI를 업데이트할 수 있게 된다.

  <br />

  - Redux createStore()는 사용 가능하다.
    - createStore()라는 함수를 사용해 Redux 저장소라는 걸 생성할 건데, 코드에 이 함수를 사용하면 IDE에서, 또는 앱을 실행할 때 사용 중단 경고가 나올 수도 있다.
      - 이 경고는 일단 무시해야 한다.
    - createStore()는 여전히 문제없이 사용할 수 있다고 한다.
    - React Redux 팀에서 Redux 툴킷이라는 추가 패키지와 Redux store를 생성하는 다른 방법을 사용할 것을 권장하는데, 이 패키지는 코스의 뒷부분에서 더 다룰 예정이라고 한다.
    - 먼저 createStore()를 살펴보고 강의를 들으면서, Redux의 작동 방식과 기능을 배우게 될 예정이다.
      - Redux 툴킷을 사용하든 사용하지 않든 필요한 중요한 지식이라고 함

<br />

# 오늘 느낀 점

- Redux에 대해 필요한 이유와 어떤식으로 작동하는지 설명을 들었는데 결국 context가 소형 또는 중형 애플리케이션에서는 문제가 없을 수 있지만, 엔터프라이즈 수준의 애플리케이션과 같이 큰 대형 애플리케이션에서 사용 시 중첩된 context Provider를 가질 수 있고, 이러한 경우 복잡한 설정과 state 관리가 상당히 어려워질 수 있다. 그리고 성능에서 문제가 있을 수 있는데 고빈도 state 변경에서 사용하기에 좋지 않기 때문에 추가적인 문제가 있다. 사실 소형, 중형 앱 그리고 많은 대형 앱에서도 이게 상관없을 수도 있지만, 나중에 내가 다루게 되는 프로젝트에서 context의 한계로 인해 문제가 될 수 있기 때문에 Redux에 대해 알아두고 가는 것이 좋다고 생각이 된다. Redux를 알아두면 context와 Redux를 함께 사용해서 구성할 수도 있고, context 대신에 사용해서 구성할 수도 있으며, 하나의 저장소로 관리하기 때문에 복잡한 state를 관리할 때는 좀 더 간편하게 관리할 수 있다고 생각이 되며, 미래에 필요할 수 있기 때문에 제대로 알고 가는 것이 좋다고 생각이 된다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작 (영화 추천 사이트)

- 거래 명세서 프로젝트 제작 (React, Python, MySQL)

- Python으로 웹 스크래퍼 만들어보기 (조금 뒤로 밀림)

- Python, PHP 공부할 거 찾아보기 (조금 뒤로 밀림)

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기 (조금 뒤로 밀림)

- Python 데이터 분석도 한번 봐보기 (조금 뒤로 밀림)
