# 오늘 한 일

### React 공부

- 양식 및 사용자 입력 작업

  - 모듈 소개
    - form과 사용자 입력을 다룰 예정
    - 이 둘은 사소해보이지만 자세히 들여다보면 두 가지를 알 수 있다.
      - 첫 번째로 많은 웹 앱들은 form으로 어디서나 사용자 입력을 받는다.
      - 두 번째로 유효하지 않은 입력 값을 사용자에게 알려주는 것과 같이 피드백을 사용자에게 제공하려 할 때 이 과정은 꽤나 복잡해서 보기보다 훨씬 어렵다는 점
    - 좋은 사용자 경험을 제공하고 제대로 만들기 위해서는 특히나 어렵다.
    - 그래서 이 섹션은 새로운 React 내용을 다루지 않고 현재까지 배운 것들을 적용해서 더 나은 사용자 경험을 제공하고 개발자로서 관리하기에도 쉬운 form을 만들어 볼 예정
    - 첫 번째로 form이 어떻게 복잡한지 다루고, 그 다음 React에서 form과 input 값을 조작하고 검증하는 것에 대해 다룰 예정이다.
    - 그리고 이러한 개념들은 내가 생각했던 것 보다 조금 더 복잡해서 개발자로서 조금 더 편리하게 작업할 수 있게 해주는 몇 가지 도구들과 접근 방법에 대해서도 다룰 예정이다.

  <br />

  - 양식에 대해 무엇이 그렇게 복잡한가
    - form은 단순하고 시시해보일 수 있는데, 전혀 그렇지 않다.
    - 개발자의 시각에서 form은 form과 그 input 때문에 넓고 다양한 상태를 나타낼 수 있어서 굉장히 복잡할 수 있다.
    - 하나 이상의 입력 값이 모두 유효하지 않을 수도 있으며, 모두 유효할 수도 있고 심지어, 서버로 요청을 보낸 뒤에 특정 값이 사용 가능한지 확인해야 하는 비동기 유효성 검사를 이용해야 해서 상태를 알 수 없을 수도 있다.
      - 예로, 이메일 주소가 유효한지 확인해보는 경우가 있다.
    - 따라서, form은 보이는 것보다 훨씬 복잡할 수 있다.
    - 실제로 하나의 form이 유효한지 아닌지만 따지는 것이 아니라 form에 있는 모든 input 값에 대해서도 유효성이 있다.
    - 이러한 각각의 input 값의 상태가 모여서 전체 form의 상태를 결정하게 된다.
    - 하나 이상의 입력 값이 잘못된 경우
      - form과 그 입력 값이 유효하지 않을 때 특정한 입력 값에 대해서 에러 메시지를 출력하고 문제가 되는 입력 값을 강조해야 한다.
      - 그리고 하나 이상의 입력 값이 유효하지 않다면 이 입력 값이 제출되거나 저장되지 않도록 해야 한다.
    - 모든 입력 값이 유효한 경우
      - 입력 값이 유효하다면 이 입력 값이 확실하게 제출되고 저장되도록 해야 한다.
    - 에러 메시지를 출력하고 유효하지 않은 입력 값을 강조하는 부분을 다루게되면 훨씬 더 복잡해진다.
      - 그 때는 언제 유효성을 검사할지가 문제가 되기 때문이다.
    - 사용자 입력을 언제 확인해야 하는가 ?
      - form이 완전하게 제출되었을 때 사용자 입력의 유효성 검증
        - 사용자가 경고 창을 보여주기 전에 사용자가 유효한 값을 입력하게 할 수 있다.
        - 사용자가 입력을 마칠 때 까지 기다린 뒤에 에러를 보여주게 되므로 불필요한 경고를 줄일 수 있으므로 괜찮은 방법이다.
        - 단점은 이 피드백이 조금 늦을 수 있다는 점인데, 사용자가 값을 제출한 뒤에 문제가 있는 부분을 알려주게 된다면 사용자는 잘못된 입력 값이 있는 그 전으로 돌아가서 값을 다시 입력해야 한다.
        - 엄청 큰 문제는 아니지만 최종적으로 제공하고자 하는 사용자 경험은 아니다.
      - 사용자가 값을 입력하고 input 요소가 포커스를 잃었을 때 사용자가 무엇을 입력했는지를 확인하고, 유효성을 검증할 수도 있다.
        - 좋은 점은 전체 form이 제출되고 경고 메시지를 보내기 전에 사용자가 유효한 값을 입력할 수 있다는 것
        - 아니면, 사용자가 그 특정 입력을 끝내자마자 바로 그 시점에 에러를 보낼 수 있다.
        - 즉, 전체 form이 제출되기 전까지 기다리는 것이 아닌, 하나의 특정한 입력을 마칠 때 까지만 기다리는 것
        - 이러한 방법은 사용자가 아무것도 입력하지 않고 손대지 않은 form에 대해서 매우 유용하다.
        - 이 방법의 단점은 포커스를 잃을 때에만 입력 값의 유효성을 검증하면 사용자가 그 전에 유효하지 않은 값을 입력하고 나서 고치는 중에도 사용자의 입력 값이 유효한지 아닌지 알려줄 수 없다는 점이 문제가 된다.
        - 이러한 경우에는 키를 한 번씩 칠 때마다 검사하는 것이 더 나은 방법이다.
      - 사용자가 키를 한 번씩 칠 때마다 검증하는 방법이나 input 요소가 변경될 때마다 검증할 수도 있다.
        - 키를 한 번씩 칠 때마다 사용자가 입력한 값의 유효성에 대해 바로 피드백을 주는 방식이다.
        - 단점은 사용자가 유효한 값을 입력하기도 전에 경고를 보낸다는 점이다.
        - 키를 한 번씩 칠 때마다 유효성을 검증한다면 사용자가 그 form에 처음 접근했을 때 해당 form에 아무것도 입력되지 않은 상태임에도 그 상태에서는 모든 값이 무효할 수 밖에 없는데다가 사용자는 아직 새로운 값을 입력할 기회조차 받지 못했으므로 수 많은 에러들을 마주하게 된다.
        - 이 방법을 어떻게든 다른 방법과 합쳐서 입력 값이 유효하지 않게 된 뒤에 키 입력마다 유효성 검증을 한다면 피드백을 바로 주게 되어서 입력이 유효해진 순간 사용자에게 알릴 수 있다.

  <br />

  - 양식 제출 처리 및 사용자 입력 값 가져오기
    - SimpleInput 컴포넌트에서 사용자의 입력을 받은 다음에 그 입력 값에 대한 유효성을 검증하고 필요한 경우에 사용자에게 에러 메시지를 띄워보는 작업 진행
      - 유효성을 검증하는 다양한 방법에 대해 알아보기
      - 유효성 확인을 발동시키는 다양한 방법들의 차이점을 살펴보고 이들을 잘 결합하는 방법 다루기
    - 사용자 입력을 가져오는 두 가지 방법
      - 모든 키 입력마다 확인하여 이 값들을 어떤 상태 변수에 저장하는 방법
      - ref를 이용하여 사용자가 값을 모두 입력했을 때 입력 값을 가져올 수도 있다.
      - 현실적으로는 둘 중 하나만 사용하겠지만, 여기서는 둘 다 사용
    - useRef, useStata 둘 다 import
    - useState를 추가해서 빈 문자열로 초기 값을 구성하고, input에 onChange 추가, form에 onSubmit 추가
      - input과 form에 들어올 함수도 생성
      - input에서는 값을 업데이트 하도록 useState의 업데이트 함수를 추가해서 event.target.value로 접근
      - form은 event.preventDefault()를 추가해 기본 동작을 막는데, form이 제출된 후에 브라우저의 기본 행동인 HTTP 요청을 보내지 않고, 아무것도 하지 않도록 명령
        - HTTP 요청이 보내진다면 페이지가 새로고침이 되기 때문에 React 앱들이 전부 재시작되면서 모든 상태가 초기화되고 원하는 대로 작동하지 않게 되기 때문에 막아주는 것
        - 즉, 새로고침이 되지 않도록 구성
        - console.log(enteredName)으로 useState 업데이트 함수를 통해 마지막에 전달된 값을 콘솔에서 출력
    - input을 ref로 설정함으로써 필요할 때 input 요소로부터 값을 읽는 방법
      - useRef를 import 해놓았으므로, useRef()의 값을 호출해 nameInputRef에 할당
        - `const nameInputRef = useRef()`
      - 그 다음 nameInputRef를 ref prop을 이용해 input의 ref로 설정
        - `<input ref={nameInputRef} type="text" id="name" />`
      - ref 설정이 끝났으므로, form이 제출되면 이 입력된 값을 nameInputRef의 current 프로퍼티에 접근해서 가져올 수 있다.
        - ref는 항상 current 프로퍼티를 갖는 객체이므로, React에서 ref는 항상 current 프로퍼티를 갖게 된다.
        - 그리고 이 current 프로퍼티는 ref에 할당한 값을 갖고 있는데, 이 경우 input 요소에 대한 포인터가 current에 저장된다.
        - current.value는 input 요소에 대한 포인터이므로 current.value에도 접근할 수 있다.
        - JS에서 input 요소는 JS의 객체처럼 작동하며 input 요소는 항상 value라는 프로퍼티를 가지며 이 값은 현재 입력창에서 입력된 값이다.
        - `const enteredValue = nameInputRef.current.value`
      - 다시 console.log를 통해 출력하는데, enteredValue에 저장되었기 때문에 enteredValue를 사용해 출력
        - `console.log(enteredValue)`
    - 입력 값을 입력하면 두 번 출력이 되는데 첫 번째는 state에서 읽은 값, 두 번째는 ref에서 읽은 값이 된다.
    - 실제로는 이 둘을 동시에 사용하진 않고, 둘 중 하나만 사용한다.
      - state를 이용해 모든 키 입력 때마다 값을 읽거나, ref를 이용해 값이 필요할 때 읽어들이는 방법을 사용한다.
    - 이 두 가지 중에서 어떤 것을 사용할지 어떻게 결정하는가 ?
      - 입력된 값으로 하고자 하는 일에 따라 다르다.
      - 만일 값이 form을 통해 제출되었을 때 한 번만 필요하고, 모든 키 입력마다 상태 값을 업데이트 하기엔 조금 지나치고 불필요하므로 ref가 나을 것이다.
      - 반면 즉각적인 유효성 검증을 위해 키 입력마다 입력 값이 필요하다면 ref로는 작업이 불가하므로 state를 사용하는 것이 좋다.
      - ref보다 state를 사용하는 것이 좋은 또 다른 경우는 입력된 값을 초기화 하고 싶은 경우에 더 좋다.
        - form을 제출하는 이벤트 핸들러 마지막에 setEnteredName(""), 즉 useState 업데이트 함수에 빈 문자열로 설정해준 뒤에 input에서 value를 추가해 enteredName으로 input의 값을 연결해주면 초기화 시켜줄 수 있다.
        - 이렇게 하면 enteredName이 input의 value prop과 연결되어서 enteredName을 업데이트 한 뒤에는 input에 반영이 된다.
      - ref로 구현하는 것도 불가능하진 않지만 state 방식처럼 깔끔하진 않다.
        - ref로도 할 수는 있다.
        - `nameInputRef.current.value = ""`로 ref에 저장된 input 요소에 접근해 빈 문자열로 만들 수 있는데 바람직한 방법은 아니다.
        - 앞에서 만든 state 방식을 주석처리하고 실행하면 작동이 되는 것을 확인할 수 있다.
        - 작동은 하지만 바람직하진 않다.
          - 이유는 DOM을 직접 조작하는 것으로 JS 코드를 이용해 DOM에 접근해 무언가 변경하는 것인데 보통 지양해야 하는 방법이다.
          - React를 사용해야만 한다.
          - React로만 DOM을 조작해야 한다.
          - 따라서 좋은 방법이 아니며, DOM을 조작해서는 안된다.
        - 이렇게 해도 괜찮을 수 있고, 사용하는건 자유지만 React를 깔끔하게 사용하는 방법은 아니다.
      - state를 사용해야 할 또 다른 이유였는데, 키 입력마다 상태를 업데이트해서 입력된 값을 초기화 할 수 있다.

  <br />

  - 기본 검증 추가하기
    - 실제 웹 사이트, 웹 앱에서 이렇게 브라우저에서 유효성 검증하는 방식은 사용자 경험 측면에서 빠른 반응을 할 수 있으므로 굉장히 좋다.
    - 입력 값들은 서버에서도 검증되어야 하는데, 그 이유는 브라우저에 있는 이 코드는 사용자에 의해 편집될 수 있기 때문이다.
    - 콘솔의 sources에 들어가서 JS 코드를 편집할 수 있다.
      - 따라서 이 것만 믿을 수는 없다.
      - 이는 사용자 경험을 위한 장치일 뿐이므로 보안 메커니즘 같은 것이 아니다.
    - 빈 칸을 제출할 때 빈 내용을 콘솔에 출력하지 않고, 에러를 띄우는 방법
      - form 제출 이벤트 핸들러 함수에서 if 조건문을 추가하는 방법이 있다.
      - if 조건문을 추가해 위의 state 값인, enteredName이 비어있는지 확인
        - trim을 추가해 처음부터 끝 사이에 있는 공백 문자를 없앨 수 있다.
        - 이 때 유효성 검증에 필요한 조건은 어떤 입력 값을 받느냐에 따라 다른데, 단순한 이름이라면 비어있는지만 확인하면 되고, 이메일 주소라면 유효한 이메일 주소인지 검증해야 한다.
        - 여기서는 단순하게 해보기 위해 비어있는지만 확인
        - enteredName이 빈 문자열이라면 이 코드의 다음으로 진행되지 않게 return으로 함수를 반환해 함수의 뒷 부분이 실행되지 않게 한다.
        - `if (enteredName.trim() === "") { return; }`
    - 빈 칸인 상태에서 submit 버튼을 누르면 아무것도 출력되지 않는다. 정상적으로 잘 작동하는데, 문제는 사용자에게 피드백을 보여주지 않고 있다.
      - 무언가 잘못되었다는 것을 사용자에게 알리지 않고 있는데, 사용자들은 개발자 도구를 열어두고 사용하지는 않는다.
      - 앱으로부터 어떠한 피드백도 없기 때문에 에러를 피드백으로 보여주는 부분을 추가해야 한다.

  <br />

  - 검증 피드백 제공하기
    - 기본적인 유효성 검사를 추가하기 위해 더 많은 state를 추가할 수 있다.
      - 유효성 검사를 확인하기 위해 state를 추가하고 초기 값은 false로 지정
      - 처음에는 입력된 값이 유효하지 않음을 의미한다. 이후에 입력된 이름이 유효하다면 이 값을 true로 바꿀 예정
      - `const [enteredNameIsValid, setEnteredNameIsValid] = useState(false)`
    - form 제출 이벤트 핸들러 함수에서 입력 값 유효성에 대한 로직 추가
      - 입력 값이 유효하지 않다면, setEnteredNameIsValid(false)로 설정
      - 조건문 뒤에 setEnteredNameIsValid(true)로 설정
      - 조건문 뒤로 실행된다면 값이 유효함을 의미하기 때문이다.
    - enteredNameIsValid 변수를 이용해 에러 메시지를 띄울 수 있다.
      - input 요소 밑, form-control div 태그 안에 p 태그로 에러 메시지 추가
      - p 태그로 된 에러 메시지가 출력되려면, enteredNameIsValid가 false일 때, 즉 유효하지 않을 때만 보이도록 구성
      - !enteredNameIsValid로 구성해서 !false면 true가 되어 해당 에러 메시지가 보이게 된다.
      - 정상적으로 유효한 값이 입력되면 !true가 되어, 에러 메시지는 보이지 않게 된다.
      - p 태그에 className을 추가해주는데, "error-text"라고 지어준다. 이미 데모 프로젝트의 index.css에서 클래스 스타일이 추가되어 있기 때문에 적용이 된다.
      - `{!enteredNameIsValid && <p className="error-text">Name must not be empty</p>}`
    - 위처럼 구성하면 에러 메시지가 뜬다. 하지만 입력을 시작하기도 전에 에러 메시지가 떠있는데 이 부분을 수정하기 위해 useState에서 초기 값을 true로 설정
      - true로 변경하면 처음에는 에러 메시지가 안보이고 빈 칸으로 제출하면 에러 메시지가 출력된다.
    - 또 다른 유효성 검증 피드백
      - div에 추가된 css 클래스인 form-control 클래스에 영향을 준다.
      - invalid라는 css 클래스를 준비해놓았는데, 이 클래스는 입력 창이 보이는 방식을 바꾼다.
      - 이를 위해 form-control을 입력 값이 유효하지 않을 때 form-control invalid로 바꾸도록 구성
      - 새로운 상수를 만들어서 enteredNameIsValid 변수가 true면 클래스 이름이 "form-control", false면 클래스 이름이 "form-control invalid"가 되도록 구성
      - 이제 div의 클래스 이름은 동적으로 변하며 그 값은 nameInputClasses가 된다.
      - `const nameInputClasses = enteredNameIsValid ? "form-control" : "form-control invalid";`
    - 이런 방식으로 유효성 검증을 추가해도 전혀 문제가 없지만 단점도 있다.
      - 이 내용은 다음 강의에서 알아볼 수 있다.

<br />

# 오늘 느낀 점

- form과 input이 간단해보이지만 조금 깊게 들어가서 유효하지 않은 입력 값을 받고 난 후에 사용자에게 피드백을 제공하려 할 때, 이 과정은 꽤나 복잡해서 보기보다 훨씬 어렵다고 한다. 특히, 좋은 사용자 경험을 제공하고 제대로 만들기 위해서는 많이 어렵다고 한다. 그래서 이번 섹션에서는 새로운 React 내용을 다루지 않고 이제까지 배운 내용을 적용해서 더 나은 사용자 경험을 제공하고 개발자로서 관리하기에도 쉬운 form을 만드는 연습을 해볼 예정이다. 그리고 이 개념들은 내가 생각한 것 보다 더 복잡해서 개발자로서 조금 더 편리하게 작업할 수 있는 몇 가지 도구들과 접근 방법도 다룰 예정이라고 한다.

- 현재까지 form과 input을 다루는 섹션에서 구성한 내용은 기본적으로 input을 통해 값을 가져오고 form을 통해 제출하고, 그 제출하는 과정에서 기본적인 검증 방법을 추가하고, 검증을 하고 난 후, 유효하지 않다면 사용자에게 검증 피드백을 제공하는 부분까지 진행을 하였다. input-form을 통해 값을 입력하고, 가져오고, 제출하는 내용은 useState와 useRef 둘 다 사용해서 구성을 해보았고, 검증은 if문을 추가해 간단하게 비어있는지만 확인하도록 구성했다. 검증 피드백은 유효하지 않은 값일 경우 p 태그로 에러 메시지를 출력하고, div의 클래스 이름이 바뀌어서 스타일이 변경되도록 해주었다. 아직까지는 앞에서 배운 내용과 큰 차이가 없는데 아마 좀 더 진행하면 더 복잡한 검증과 피드백을 다룰 거 같다는 생각이 든다. 강의에서 말하길 개발자의 시각에서 form은 form과 그 input 때문에 넓고 다양한 상태를 나타낼 수 있어서 굉장히 복잡할 수 있다고 한다. 그리고 form은 보이는 것보다 훨씬 복잡할 수 있다고 하지만, 아직까지 복잡한 form을 구성해보지 않아서 이런 말들이 확 와닿는 느낌이 없는데, 계속 진행을 해보면서 저 말의 의미가 무엇인지 이해를 해보아야 할 것 같다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

- 해쉬맵과 cors에 대해 찾아보기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작 (영화 추천 사이트)

- 거래 명세서 프로젝트 제작 (React, Python, MySQL)

- Python으로 웹 스크래퍼 만들어보기 (조금 뒤로 밀림)

- Python, PHP 공부할 거 찾아보기 (조금 뒤로 밀림)

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기 (조금 뒤로 밀림)

- Python 데이터 분석도 한번 봐보기 (조금 뒤로 밀림)
