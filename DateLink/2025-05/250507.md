# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 라우터 분리 테스트 (로그인 상태 및 비로그인 상태)
  - 기존에 구성한 라우터 파일과 다르게 로그인 전에 사용될 수 있도록 새로운 라우터 파일을 추가하고, 해당 라우터 파일의 내용이 조건부로 보여질 수 있도록 구성해 라우터 분리와 관련된 내용을 테스트
  - 프론트엔드
    - main
      - useAuthStore Zustand를 추가해 isLoggedIn 상태를 불러오도록 구성
      - RouterProvider의 router 내용에서 isLoggedIn 상태를 조건부로 사용해, 로그인 상태면 router 내용을 반환하고 비로그인 상태면 authRouter 내용을 반환하도록 구성
        - 반환된 내용에 따라서 사용되는 라우터 파일이 달라지도록 구성
    - authRouter
      - 사용자가 로그인하지 않은 상태에서는 해당 라우터 파일 내용이 보여지도록 구성
      - element 내용에 TestMainContent를 구성해 테스트 내용이 보여지도록 구성
    - TestMainContent
      - 테스트를 위해 추가한 컴포넌트로, 기본적인 텍스트와 로그인 컴포넌트 내용이 보여지도록 구성
  - 라우터를 분리해 로그인 상태와 비로그인 상태에서 다르게 적용되어 보이도록 구성하고 테스트한 결과, 비로그인 상태에서는 잘 적용이 되었지만, 로그인 상태에서는 약간의 오류와 새로고침 시에 리소스가 없다는 페이지로 이동되는 문제가 있는 것을 확인할 수 있었다.
    - RouterProvider는 동적으로 라우터를 바꾸는 것을 기본적으로 지원하지 않아서, 문제가 생기기 때문에 라우터는 하나로 통합하고 그 내부에서 로그인 여부에 따라 분기하는 구조로 변경해야 함
    - 라우터를 하나로 두고, 내부에서 조건부를 구성해 비로그인 상태에서 보여지는 내용과 로그인 상태에서 보여지는 내용을 나누는 것을 고려중
    - 현재 메인 내용이 "/me" 경로에서 보이지기 때문에, "/" 경로에서 로그인 또는 회원가입 내용이 보여지는 것이 어떤지 고려중에 있으며, 어떤 구조가 더 적합한지 고민해보고 결정해야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/e109cfd507026d4d327d60d50f92d189e8bfece7)

# 오늘 느낀 점

- 로그인과 회원가입 관련된 내용을 사이드바에서 관리하는 것이 아닌, 처음에 웹 페이지에 접속하면 로그인 화면이 뜨고 만약 계정이 없을 경우 회원가입 화면으로 넘어가 가입한 후에 로그인 화면에서 로그인하고 메인 내용으로 넘어오는 구조로 변경하려고 테스트를 진행해 봤는데, 구성한 내용에 조금 문제가 있어서 다른 방법으로 테스트를 진행해 봐야 한다. 메인 파일에서 RouterProvider에 조건부를 구성하는 것이 아닌, 라우터 파일에서 조건부를 추가해 비로그인 상태일 때는 로그인과 회원가입 관련된 페이지가 보여지고, 로그인 상태에서는 메인 내용이 보여지는 페이지 내용이 보여지도록 구성을 하려고 생각 중이다. 로그인과 회원가입 관련된 페이지 URL에 대해 고민이 좀 많은데 이 부분은 좀 더 생각해보고 확실하게 결정해 진행을 해 볼 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 로그아웃 버튼 등 여러 버튼들이 텍스트가 아닌 아이콘으로 보여지도록 수정 필요

- 홈으로 이동 시에 친구 버튼과 다이렉트 채팅방 목록이 사이드바 옆으로 보여지고, 친구 버튼 클릭 또는 다이렉트 채팅방 클릭 시에 그 옆으로 해당 내용이 보여지도록 수정 필요

- 그룹 채팅방은 그룹 채팅방에 참여한 사용자 목록이 사이드바 옆으로 보여지고, 그 옆에 채팅 관련 내용이 보여지도록 수정 필요

- 출력되는 채팅 메시지 목록에 스크롤을 추가해 보기 편하도록 변경해야 하고, 메시지가 언제 추가되었는지 구분할 수 있도록 저장된 날짜 데이터를 불러와 표기해야 함

- 채팅 입력창에 적용된 스크롤 기능 추가 수정 필요

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 삭제 시에 다이렉트 채팅방 삭제 확인 로직 필요 (친구 삭제 시에 다이렉트 채팅방을 그대로 남겨놓고 삭제 확인창은 따로 추가하지 않을 예정)

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 그룹 채팅방 초대하고 알림을 전송하는 기능에서, 로그인한 사용자가 아닌 친구에게 보내는 그런 구조로 작동되도록 수정이 필요 (비로그인 상태여도 상관이 없음 단순하게 친구한테 친구 요청하면 알림 메시지가 전달되어야 함)

- 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방 (진행중)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
