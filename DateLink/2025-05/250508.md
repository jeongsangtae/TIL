# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 인증 관련 라우터 파일 삭제 및 라우터 파일 내의 루트 레이아웃에 보호 컴포넌트 추가 및 보호 컴포넌트 내의 비로그인 조건부 수정 및 로그인, 로그아웃 navigate 내용 추가, 수정
  - 이전에 구성한 인증 관련 라우터 파일을 삭제하고, 기존 라우터 파일 내의 최상위 내용인 루트 레이아웃에 보호 컴포넌트를 추가해 주었으며, 라우터 내에 로그인 페이지 경로와 관련된 내용을 추가하고, 보호 컴포넌트 내의 로그인 유무와 관련된 조건부 내용에 Navigate를 사용해 로그인 페이지로 이동되도록 구성해 주고, 로그인과 로그아웃 관련 함수 내에 navigate를 추가하고 수정해 원하는 동작이 이루어지도록 구성
  - 프론트엔드
    - main
      - 테스트를 위해 새롭게 추가한 내용 삭제
    - router
      - "/login" 경로 내용을 추가
        - element에는 테스트를 위해 TestMainContent 컴포넌트로 구성
      - RootLayout에 보호 컴포넌트인 Authentication를 래퍼로 감싸도록 구성
    - authRouter
      - 더이상 사용하지 않으므로 파일 삭제
    - Authentication
      - Navigate를 추가하고 로그인 유무를 확인하는 조건부 내용에서 NoAccess 컴포넌트 대신에 사용
        - 경로는 "/login"으로 설정
    - TestMainContent
      - toggle useState 추가 및 toggleHandler 함수 추가
      - Login 컴포넌트에 onToggle props를 통해 toggleHandler를 전달
    - SideBar
      - logoutHandler 함수 수정
        - navigate 경로를 "/"가 아닌, "/login"으로 수정
    - Login
      - useNavigate를 추가하고 사용할 수 있도록 구성
      - submitHandler 함수 수정
        - navigate를 추가해 "/me" 경로로 구성
        - 계정을 입력하고 확인 버튼 클릭 시에 토글로 인해 모달창이 닫히고 "/me" 경로로 이동
  - 웹 페이지에 접속하면 로그인 페이지로 이동하고, 해당 페이지에서 로그인하면 "/me" 경로로 이동되어 메인 내용이 보여지도록 구성을 하고 테스트한 결과, 문제없이 작동하는 줄 알았지만 새로고침했을 때나 로그아웃했을 때 오류가 있는 것을 확인할 수 있었다.
    - 로그인하고 "/me" 경로에서 새로고침하면 "/login" 경로로 다시 이동이 되는 문제가 발생하고 있기 때문에 추가 수정 필요
    - 로그아웃한 이후에 지속적으로 로그아웃 성공 메시지가 콘솔에 출력되고 있는데, 이 내용은 로그아웃되면 인터벌이 멈춰서 실행되어서는 안되지만 현재 계속 실행되고 있기 때문에 추가 확인이 필요함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/1c04e1f0aa4c6c0285351c2488d18734f480e877)

# 오늘 느낀 점

- 웹 페이지에 접속하면 로그인 페이지로 이동되고, 로그인 페이지에서 로그인하면 메인 페이지로 이동되는 것까지는 문제없이 작동하고 있었지만, 로그인 상태에서 새로고침을 하면 로그인되어 있는 상태로 로그인 페이지로 이동되는 오류가 있고, 로그아웃한 이후에 콘솔을 확인해보면 로그아웃 성공 메시지가 지속적으로 출력되고 있는데, 이 내용은 로그아웃되면 인터벌이 멈춰서 실행되어서는 안되지만 여전히 로그아웃이 된 이후에도 인터벌이 실행되는 오류가 있기 때문에 추가 수정이 필요한 상황이다. 그리고 로그인 페이지에서 회원가입 페이지로 이동하는 버튼도 없어서 현재 새로운 계정을 추가할 수도 없기 때문에 라우터에 회원가입 페이지 경로 내용을 추가하고, 로그인 페이지에서 회원가입 페이지로 전환할 수 있도록 구성을 해줄 생각이다. 회원가입 관련된 내용을 추가하는 것도 중요하지만 우선, 로그인 유지가 정상적으로 안되는 것이 제일 큰 문제이기 때문에 이 오류부터 수정하고 그 다음 필요한 내용을 순서대로 구성해 볼 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 로그아웃 버튼 등 여러 버튼들이 텍스트가 아닌 아이콘으로 보여지도록 수정 필요

- 홈으로 이동 시에 친구 버튼과 다이렉트 채팅방 목록이 사이드바 옆으로 보여지고, 친구 버튼 클릭 또는 다이렉트 채팅방 클릭 시에 그 옆으로 해당 내용이 보여지도록 수정 필요

- 그룹 채팅방은 그룹 채팅방에 참여한 사용자 목록이 사이드바 옆으로 보여지고, 그 옆에 채팅 관련 내용이 보여지도록 수정 필요

- 출력되는 채팅 메시지 목록에 스크롤을 추가해 보기 편하도록 변경해야 하고, 메시지가 언제 추가되었는지 구분할 수 있도록 저장된 날짜 데이터를 불러와 표기해야 함

- 채팅 입력창에 적용된 스크롤 기능 추가 수정 필요

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 삭제 시에 다이렉트 채팅방 삭제 확인 로직 필요 (친구 삭제 시에 다이렉트 채팅방을 그대로 남겨놓고 삭제 확인창은 따로 추가하지 않을 예정)

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 그룹 채팅방 초대하고 알림을 전송하는 기능에서, 로그인한 사용자가 아닌 친구에게 보내는 그런 구조로 작동되도록 수정이 필요 (비로그인 상태여도 상관이 없음 단순하게 친구한테 친구 요청하면 알림 메시지가 전달되어야 함)

- 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방 (진행중)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
