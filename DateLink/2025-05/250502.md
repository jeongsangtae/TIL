# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 다이렉트 채팅 관련 내용 구조 수정
  - 친구 버튼 또는 다이텍트 채팅방을 클릭했을 때, 관련 내용들이 서브 사이드바 하단이 아닌 오른쪽 메인 콘텐츠 영역에 보이도록 구조를 수정
  - 프론트엔드
    - DirectChatPage
      - DirectChatMainContent 컴포넌트를 래퍼로 바꾸고, Outlet 컴포넌트를 children으로 넘기도록 구성
        - Outlet은 라우트에서 지정한 element 내에서만 유효하기 때문에, children으로 전달하도록 구성
      - 해당 패턴은 레이아웃 전용 컴포넌트가 아니라 UI 내부 컴포넌트 안에 Outlet 결과물을 삽입하고 싶을 때 사용하는 방법
      - 레이아웃 컴포넌트를 강제로 만들지 않으면서도 라우팅된 내용을 원하는 위치에 삽입하고 싶을 때 사용
    - DirectChatMainContent
      - children을 불러와 사용할 수 있도록 구성
      - toggleFriend useState를 추가
        - Friends 컴포넌트에서 가져와 구성
        - 초기값은 false, boolean으로 타입 정의
      - friendToggleHandler 함수 추가
        - Friends 컴포넌트에서 가져와 구성
        - 실행될 때 setToggleFriend를 통해 toggleFriend 내용이 반대로 전환되도록 구성
      - JSX 코드 내용 수정
        - DirectChatSidebar 컴포넌트에 onFriendToggle props를 통해 friendToggleHandler 함수 내용이 전달되도록 구성
        - 메인 콘텐츠 영역
          - toggleFriend를 확인해 true일 때, Friends 컴포넌트 내용이 보여지도록 구성하고, toggleFriend props를 통해 toggleFriend useState 내용이 전달되도록 구성
          - children을 사용해 래퍼로 사용할 수 있도록 구성
    - DirectChatSidebar
      - onFriendToggle props를 전달받아 사용할 수 있도록 구성
      - JSX 코드 내용 수정
        - Friends 컴포넌트를 주석 처리하고, 버튼을 추가해 onClick에 onFriendToggle이 실행되도록 구성
          - Friends 컴포넌트에서 사용하던 친구 버튼을 가져와 구성
    - Friends
      - toggleFriend props를 전달받아 사용할 수 있도록 구성
      - toggleFriend useState와 friendToggleHandler 함수를 주석 처리
      - JSX 코드 내용 수정
        - 친구 버튼을 주석 처리하고, DirectChatSidebar에 옮겨서 실행되도록 구성
  - CSS
    - DirectChatMainContent
      - full-content
        - 주석을 삭제하고, flex-direction: row 내용이 적용되도록 구성
  - 다이렉트 채팅방 페이지 컴포넌트에서 Outlet을 children으로 전달하도록 구성해, 다이렉트 채팅방 메인 콘텐츠 컴포넌트가 래퍼로 사용될 수 있도록 해주고, 다이렉트 채팅방 메인 콘텐츠 컴포넌트에 친구 토글 관련 useState와 함수를 구성해 하위 컴포넌트로 전달되어 실행되도록 구성하고 테스트한 결과, 친구 버튼을 클릭하면 서브 사이드바 옆의 메인 콘텐츠 영역에 여러 버튼들이 보여지는 것을 확인할 수 있었고, 추가로 다이렉트 채팅방을 클릭하면 세부 내용이 서브 사이드바 옆 메인 콘텐츠 영역에 보이는 것을 확인할 수 있었다.
    - 사이드바 옆에 서브 사이드바가 보이고, 친구 관련 내용이나 다이렉트 채팅방 세부 내용이 메인 콘텐츠 영역에 문제없이 보이긴 하지만, 현재 친구 관련 내용이 보인 상태에서 다이렉트 채팅방을 클릭하면 세부 내용이 친구 관련 내용 아래에 그대로 보여지므로 내용을 수정해 두 내용중에 하나만 열리도록 구성해야 함
    - 구조를 수정하면서 테스트를 위해 추가한 여러 컴포넌트 내용은 삭제를 해야 하고, props로 넘긴 데이터에 대한 타입 정의를 하지 않아서 타입 에러가 발생하기 때문에 관련 타입 정의를 추가해야 하고, 수정했던 컴포넌트 내용을 확인하고 코드 정리를 해줘야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/ae6bc9fe1477dc110763875d55be6941053150e7)

# 오늘 느낀 점

- 다이렉트 채팅방 메인 콘텐츠 영역에 친구 관련 내용이나 다이렉트 채팅방 세부 내용이 보여지도록 변경한 구조가 잘 적용되긴 했지만, 현재 친구 버튼을 통해 친구 관련 내용을 열고 그 다음 다이렉트 채팅방을 클릭하면 세부 내용이 친구 관련 내용 아래에 보여지고 있기 때문에, 이 내용을 수정해 친구 관련 내용이 열려있을 때 다이렉트 채팅방을 클릭하면 친구 관련 내용이 닫히고 다이렉트 채팅방 세부 내용이 보여지고, 반대로 세부 내용이 보여지고 있을 때 친구 버튼을 클릭하면 세부 내용이 닫히고 친구 관련 내용만 보여지도록 구성해봐야 한다. 그리고 여러 테스트를 진행하면서 추가한 컴포넌트 내용이나, 주석 처리한 내용들이 아직 그대로 남아있기 때문에 이와 관련해 정리를 해주고 그 다음 서브 사이드바와 메인 콘텐츠 영역에 대한 CSS 내용을 추가해 이전과 다르게 훨씬 보기 편한 UI로 만들어볼 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 로그아웃 버튼 등 여러 버튼들이 텍스트가 아닌 아이콘으로 보여지도록 수정 필요

- 홈으로 이동 시에 친구 버튼과 다이렉트 채팅방 목록이 사이드바 옆으로 보여지고, 친구 버튼 클릭 또는 다이렉트 채팅방 클릭 시에 그 옆으로 해당 내용이 보여지도록 수정 필요

- 그룹 채팅방은 그룹 채팅방에 참여한 사용자 목록이 사이드바 옆으로 보여지고, 그 옆에 채팅 관련 내용이 보여지도록 수정 필요

- 출력되는 채팅 메시지 목록에 스크롤을 추가해 보기 편하도록 변경해야 하고, 메시지가 언제 추가되었는지 구분할 수 있도록 저장된 날짜 데이터를 불러와 표기해야 함

- 채팅 입력창에 적용된 스크롤 기능 추가 수정 필요

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 삭제 시에 다이렉트 채팅방 삭제 확인 로직 필요 (친구 삭제 시에 다이렉트 채팅방을 그대로 남겨놓고 삭제 확인창은 따로 추가하지 않을 예정)

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 그룹 채팅방 초대하고 알림을 전송하는 기능에서, 로그인한 사용자가 아닌 친구에게 보내는 그런 구조로 작동되도록 수정이 필요 (비로그인 상태여도 상관이 없음 단순하게 친구한테 친구 요청하면 알림 메시지가 전달되어야 함)

- 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방 (진행중)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
