# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 프론트엔드 닉네임 실시간 반영 로직에 주석 추가 및 백엔드 닉네임 수정 내용의 날짜 관련 내용 삭제 및 백엔드 회원가입 정규표현식, 닉네임 길이 제한, 날짜 관련 내용 추가
  - 프론트엔드에서 구성한 닉네임 수정 관련 실시간 반영 로직에 주석을 추가해 어떤 내용인지 알아볼 수 있도록 해주고, 백엔드에서 구성한 닉네임 수정 관련 로직에 날짜 데이터 내용을 삭제해 함께 업데이트되지 않도록 수정해주었으며, 회원가입 시에 좀 더 정교한 확인을 위해 닉네임과 사용자명에 정규표현식을 추가하고, 닉네임 길이는 제한하고, 가입 시에 날짜 데이터가 추가되어 가입한 날짜를 확인할 수 있도록 구성
  - 백엔드
    - user-routes
      - 회원가입하는 POST 라우터 수정
        - 닉네임과 사용자명을 한글, 영문 대소문자, 숫자만 허용하도록 정규식 관련 내용 추가
          - `/^[가-힣a-zA-Z0-9]+$/` 내용을 변수에 구성해 정규식으로 허용 문자 제한
        - 닉네임이 2자 이상 15자 이하로 입력되도록 조건부 추가
          - 2~15자 이내로 입력하지 않으면 경고 메시지가 뜨도록 구성
        - 닉네임과 사용자명 형식 검사 조건문을 통해 허용한 문자 규칙이 아닐 경우 경고 메시지가 출력되도록 구성
          - `test()` 메서드를 사용
          - `test()`는 정규식에서 자주 쓰이는 메서드로, 해당 문자열이 정규식 패턴에 맞는지 확인해주는 메서드
          ```
          nicknameRegex.test("홍길동123");   // true (정상적인 입력)
          nicknameRegex.test("hello_world"); // false (_가 포함됨)
          nicknameRegex.test("test@user");   // false (@ 포함됨)
          nicknameRegex.test("");            // false (빈 문자열)
          ```
        - 날짜 포맷 관련 내용을 추가하고, 회원가입 시에 날짜 데이터를 포함하도록 구성
      - 닉네임을 수정하는 PATCH 라우터 수정
        - 닉네임을 업데이트할 때, 날짜 데이터가 업데이트되지 않도록 날짜 관련 내용 삭제
  - 프론트엔드
    - authStore
      - editNicknameForm 액션 수정
        - 실시간 반영 로직에 주석을 추가
  - 닉네임 수정 시에 날짜 관련 데이터가 업데이트되지 않도록 구성하고, 회원가입 시에 이전보다 정교한 확인을 통해 여러 내용을 추가하고, 가입한 날짜가 저장되도록 구성하고 확인한 결과, 회원가입할 때 닉네임과 사용자명에서 한글, 숫자, 영어 대소문자 외 내용이 포함되거나, 닉네임 내용에서 설정한 길이 수를 넘어가면 에러 메시지가 출력되며, 회원가입이 완료되었을 때 가입한 날짜가 DB에 저장되고, 닉네임을 수정하면 가입한 날짜가 수정되지 않고 그대로 유지되는 것을 확인할 수 있었다.
    - 사용자 닉네임이 업데이트되면 다이렉트 채팅방 채팅 내용, 친구 목록, 그룹 채팅방 사용자 목록 및 채팅 내용들이 업데이트된 닉네임으로 실시간 반영되도록 구성 필요
    - 사용자 닉네임이 업데이트되면 다이렉트 채팅방 채팅 내용, 그룹 채팅방 채팅 내용, 친구 목록에서 보여지는 닉네임이 수정한 닉네임으로 변경되어 보여지도록 구성 필요
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/b0488ec68600f5f91116169fae8029cee4088958)

# 오늘 느낀 점

- 회원가입 시에 닉네임과 사용자명에서 지정한 정규표현식을 제외한 내용을 포함해 가입하려고 할 경우 에러 메시지를 출력하고, 닉네임에서 지정한 글자 수를 벗어난 채로 입력하고 가입하려는 경우에도 에러 메시지를 출력하고, 회원가입되면 가입한 날짜가 DB에 저장되고 이 때 닉네임 수정을 하면 가입한 날짜가 업데이트되지 않고 처음에 가입한 날짜로 그대로 유지되도록 구성을 해주었다. 사용자 닉네임이 업데이트되면 다이렉트 채팅방 채팅 내용, 친구 목록, 그룹 채팅방 사용자 목록 및 채팅 내용에서 실시간 반영이 되도록 구성해야 하고, 수정된 닉네임 내용을 가지고 데이터를 찾거나 그 닉네임으로 문제없이 출력하도록 구성을 해줄 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 서브 사이드바 관련 UI 수정 필요

- 닉네임 업데이트 관련 로직 추가 필요

- 닉네임 수정 시에 날짜를 업데이트할 필요가 없으므로, 관련 내용 삭제하고 회원가입할 때 가입하는 날짜 데이터를 함께 저장하도록 수정해야 함

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 사용자 닉네임 데이터를 채팅 데이터에 추가해 저장할 경우, 닉네임 업데이트 관련 로직이 작동될 때 함께 업데이트 되도록 구성이 필요함 (확인한 결과 채팅 참여자 목록은 실시간은 아니지만 업데이트되고 있고, 채팅을 추가한 사용자 닉네임만 업데이트되면 될 것 같음)

- 로그아웃 버튼 등 여러 버튼들이 텍스트가 아닌 아이콘으로 보여지도록 수정 필요

- 그룹 채팅방은 그룹 채팅방에 참여한 사용자 목록이 사이드바 옆으로 보여지고, 그 옆에 채팅 관련 내용이 보여지도록 수정 필요

- 출력되는 채팅 메시지 목록에 스크롤을 추가해 보기 편하도록 변경해야 하고, 메시지가 언제 추가되었는지 구분할 수 있도록 저장된 날짜 데이터를 불러와 표기해야 함

- 채팅 입력창에 적용된 스크롤 기능 추가 수정 필요

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 삭제 시에 다이렉트 채팅방 삭제 확인 로직 필요 (친구 삭제 시에 다이렉트 채팅방을 그대로 남겨놓고 삭제 확인창은 따로 추가하지 않을 예정)

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 그룹 채팅방 초대하고 알림을 전송하는 기능에서, 로그인한 사용자가 아닌 친구에게 보내는 그런 구조로 작동되도록 수정이 필요 (비로그인 상태여도 상관이 없음 단순하게 친구한테 친구 요청하면 알림 메시지가 전달되어야 함)

- 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방 (진행중)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
