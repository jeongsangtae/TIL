# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 컨텍스트 메뉴 전역적 동작 막기
  - 우클릭 시에 브라우저 기본 컨텍스트 메뉴가 열리는데, 이 동작이 전역적으로 사용될 수 없도록 막기 위해 조건부 수정
  - 프론트엔드
    - GroupChat
      - outsideContextMenuHandler 함수 수정
        - `if(contextMenu.visible){...}` 이 조건부 내용에서 안에 구성된 기본 브라우저 컨텍스트 메뉴 막기와 메뉴창 닫는 내용만 남기고, 조건부 내용을 삭제
        - 외부 공간을 우클릭하면 컨텍스트 메뉴가 열려있는지 따로 확인하지 않고, 기본 동작을 막고 메뉴창을 닫도록 구성
  - 동작 정리
    - 그룹 채팅방 목록에서 우클릭
      - contextMenuOpenHandler 함수가 실행되어 문제없음
      - 별도로 만든 컨텍스트 메뉴 내용은 그룹 채팅방을 우클릭했을 때만 작동
    - 메뉴 열린 상태에서 다른 공간 우클릭
      - 전역 함수에서 닫히기 때문에 문제없음
    - 메뉴 열린 상태에서 다른 공간 좌클릭
      - 전역 함수에서 닫히기 때문에 문제없음
    - 사이드바나 배열 우클릭
      - 브라우저 기본 메뉴 안뜨고, 메뉴 닫히기 때문에 문제없음
  - 브라우저 기본 컨텍스트 메뉴를 여는 동작이 전역적으로 작동하지 않도록 구성하고 테스트한 결과, 문제없이 작동되어 어떤 외부 공간을 우클릭해도 컨텍스트 메뉴가 열리지 않는 것을 확인했고, 그룹 채팅방을 우클릭할 때만 구성한 메뉴창이 열리는 것을 확인할 수 있었다.
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/0bfca3403931de6f0d38281a91d7049f53c84a03)

<br />

- 다이렉트 채팅 관련 내용 구조 수정 및 테스트
  - 친구 버튼 또는 다이렉트 채팅방을 클릭했을 때, 관련 내용들이 서브 사이드바 하단에 보여지는 것이 아닌, 오른쪽 메인 콘텐츠 공간에 보이도록 구조를 수정해 테스트
  - 프론트엔드
    - DirectChatPage
      - DirectChatMainContent, DirectChatSidebar 컴포넌트를 추가
      - DirectChatSidebar 컴포넌트는 테스트만 해보고, DirectChatMainContent 컴포넌트 내용이 사용되도록 구성
    - DirectChatMainContent
      - DirectChatSidebar 컴포넌트를 추가
      - 전체 내용을 묶어서 full-content className으로 구성
      - DirectChatSidebar 컴포넌트 내용만 따로 sub-sidebar className으로 구성
      - 메인 콘텐츠 영역은 main-content className으로 구성
    - DirectChatSidebar
      - Friends, DirectChats 컴포넌트 추가
      - useAuthStore Zustand에서 isLoggedIn 상태를 불러오도록 구성
      - 로그인 유무를 확인하고, true일 때 Friends, DirectChats 컴포넌트 내용이 보여지도록 구성
        - sub-sidebar className으로 구성을 했지만, 수정해야 함
    - DirectChats
      - chat-container, sub-sidebar 같은 className을 삭제하고, 로그인 유무를 확인하는 내용은 주석처리
  - CSS
    - DirectChatMainContent
      - 전체 내용이 열 정렬되어 보이도록 구성했으나, 제대로 적용되지 않아서 테스트하고 주석 처리
    - DirectChatSidebar
      - sub-sidebar
        - 기존의 sub-sidebar에 구성한 CSS 내용을 가져와 구성
  - 다이렉트 채팅방 관련 내용과 친구 관련 내용이 보여질 때 오른쪽 메인 콘텐츠 영역에 보여지도록 구조를 변경해보았으나, 현재 생각한 구조대로 작동하지 않는 것을 확인할 수 있었다.
    - 현재 생각한 구조는 다이렉트 채팅방 페이지 컴포넌트에서 다이렉트 채팅방 메인 콘텐츠를 보여주고, 다이렉트 채팅방 메인 콘텐츠에서는 서브 사이드바와 메인 콘텐츠 영역을 나누고, 거기서 서브 사이드바 내의 내용을 클릭하면 관련 내용이 메인 콘텐츠 영역에 보여지도록 구성을 생각하고 있는데, 깔끔한 방법을 찾지 못해서 추가 수정이 필요함
    - 하위 컴포넌트에 구성된 내용들을 가져와 다이렉트 채팅방 메인 콘텐츠에서 구성하고 그걸 메인 콘텐츠에 보여주도록 구성하면, 쉽게 가능은 하지만 로직이 좀 지저분하고 복잡해질 것 같아서 좋은 방법을 찾아봐야 함
    - 최대한 깔끔하고 간결한 방법으로 메인 컨텐츠 영역에 관련 내용들이 보여질 수 있도록 구성을 해 봐야 하고, 추가로 디스코드처럼 사이드바/서브사이드바/메인콘텐츠 이렇게 나눠서 보이는 좋은 방법이 있는지 찾아봐야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/c37dccb5c2dc351efc0ff97bbc2027f79a129781)

# 오늘 느낀 점

- 그룹 채팅방 외부 공간을 우클릭 시에 브라우저 기본 컨텍스트 메뉴가 열리는데, 이 동작이 전역적으로 사용될 수 없도록 막아주었고, 친구 관련 내용이나 다이렉트 채팅방 세부 페이지 내용이 메인 콘텐츠 영역에 보여지도록 구조를 변경하고 테스트해봤지만, 아직 생각한 구조대로 보여지지 않아서 추가 수정이 필요한 상황이다. 하위 컴포넌트에서 내용을 가져와 구성하면 쉽게 해결이 가능하긴 하지만, 이 방법은 내가 생각한 것과 다르게 깔끔한 구성이 되지 않을 것 같아서 다른 방법으로 해결이 가능하면 그 방법을 먼저 시도해 보고, 그 다음 안된다면 차선책으로 하위 컴포넌트 내용을 가져와 보여지도록 구성할 생각이다. 디스코드 구조를 보면 사이드바/서브 사이드바/메인 콘텐츠 영역이 딱 나눠져 깔끔하게 보이는데, 이러한 구조와 비슷하게 내 프로젝트에서도 구성을 하고 싶기 때문에 여러 방법으로 테스트해보고 해결 방법을 찾아서 생각한 구조대로 구성을 해볼 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 그룹 채팅방 목록에서 그룹 채팅방 우클릭 시에 수정 또는 삭제 버튼이 보여지고 클릭될 수 있도록 구성해야 함

- 홈으로 이동하는 버튼, 로그아웃 버튼, 그룹 채팅방 버튼 등 여러 버튼들이 텍스트가 아닌 아이콘으로 보여지도록 수정 필요

- 홈으로 이동 시에 친구 버튼과 다이렉트 채팅방 목록이 사이드바 옆으로 보여지고, 친구 버튼 클릭 또는 다이렉트 채팅방 클릭 시에 그 옆으로 해당 내용이 보여지도록 수정 필요

- 그룹 채팅방은 그룹 채팅방에 참여한 사용자 목록이 사이드바 옆으로 보여지고, 그 옆에 채팅 관련 내용이 보여지도록 수정 필요

- 출력되는 채팅 메시지 목록에 스크롤을 추가해 보기 편하도록 변경해야 하고, 메시지가 언제 추가되었는지 구분할 수 있도록 저장된 날짜 데이터를 불러와 표기해야 함

- 채팅 입력창에 적용된 스크롤 기능 추가 수정 필요

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 삭제 시에 다이렉트 채팅방 삭제 확인 로직 필요 (친구 삭제 시에 다이렉트 채팅방을 그대로 남겨놓고 삭제 확인창은 따로 추가하지 않을 예정)

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 그룹 채팅방 초대하고 알림을 전송하는 기능에서, 로그인한 사용자가 아닌 친구에게 보내는 그런 구조로 작동되도록 수정이 필요 (비로그인 상태여도 상관이 없음 단순하게 친구한테 친구 요청하면 알림 메시지가 전달되어야 함)

- 추가된 친구와 대화를 나눌 수 있는 다이렉트 채팅방 (진행중)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
