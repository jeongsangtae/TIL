# 오늘 한 일

### React 프로젝트 제작 (React, NodeJS, MongoDB로 만드는 미니 커뮤니티 플랫폼)

- 구성한 내용
  - 게시글 세부 페이지 추가
    - 게시글 세부 페이지는 현재 루트 레이아웃에 구성되어 있으며 게시글 라우트의 자식 라우트로는 구성하지 않았다.
    - 위 내용은 수정될 수 있지만 현재 생각한 방법에서는 URL은 게시글에 id가 붙어서 출력되지만 게시글 페이지의 목록이 있는 내용이 출력되면 안되기 때문에 루트 레이아웃이 부모가 되도록 구성
  - 게시글 세부 페이지 내용이 보이도록 연결
    - 게시글 세부 페이지의 내용이 보이도록 하기 위해서 PostDetailsPage에서 먼저 loader 함수 작업을 진행
      - PostsPage lodaer 함수와는 조금 다르게 params.id를 추가해서 url에 DB에 저장된 id 내용이 추가되도록 해주었다.
    - PostDetailsPage에 추가한 loader 함수를 라우트에서도 추가
    - 게시글 클릭 시 해당 게시글의 세부 내용이 보여지는 페이지로 이동하도록 구성
      - Post 컴포넌트의 li 안에 Link 컴포넌트를 추가해서 이동하도록 구성
    - PostDetails 컴포넌트에서 PostDetailsPage에서 추가한 loader 함수의 데이터를 가져오도록 useLoaderData를 사용
      - useLoaderData를 사용해서 데이터를 가져와서 게시글 세부 내용을 보여주도록 구성
    - 프론트엔드와 백엔드를 연결하기 위해 `router.get("/post/:id", ...)` 추가
      - posts 컬렉션에서 id를 찾아서 해당 내용을 res.json()을 통해서 전달하도록 구성
      - id에는 postId인 req.params.id 내용을 사용
      - 게시글 세부 페이지와 관련된, 프론트엔드와 연결하는 백엔드 라우트 구성에서 문제가 있는지 제대로 작동하지 않는다.
        - posts 컬렉션에서 findOne으로 찾는 부분에서 문제가 있거나, postId 변수에서 사용하는 값인 req.params.id에서 문제가 있는 지 찾아봐야 한다.
        - 프론트엔드에서는 문제가 없어보이며, 백엔드에서 게시글 세부 페이지에 해당되는 데이터가 null로 나오는 것이 문제가 되기 때문에 확인이 필요하다.
    - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/76b85daf4ead9be58fb20885cf4d4ab97178a3d1#diff-c90c550eb8f31a00e5006b192550628f507658f208358d7fc4539ea3f2aeab95)
  - 두 가지 방법 중에서 결정을 해야 한다.
    - mongodb의 고유한 id인 \_id를 사용하는 방법
      - 이 방법은 테스트 해봤는데 정상적으로 작동하는 것을 확인할 수 있었다.
      - 이 방법을 사용한다면 mongodb에 저장된 데이터의 \_id 정보를 게시글 페이지에서 숨겨서 보이지 않도록 구성해야 연결하는데 사용할 수 있을 거 같다.
      - [코드 내용](https://github.com/jeongsangtae/mini-community-platform/commit/aade33254459839e8fc0ba53368282ab4b9237b3)
    - 내가 추가한 id를 사용하는 방법
      - 이 방법을 사용하려면 좀 생각을 해봐야 하는데, 기존에 해보았던 방법으로는 제대로 원하는 데이터를 가져오지 못했기 때문에 mongodb에 저장된 id를 백엔드에서 일치하는지 확인하는 다른 방법을 좀 모색해봐야 한다.

# 오늘 느낀 점

- 게시글 세부 페이지를 루트 레이아웃으로 구성하고 loader 함수를 사용해서 데이터를 가져와서 보여주는 방식을 생각하고 구성을 했는데 내가 생각했던 것과는 다르게 제대로 게시글 세부 내용을 보여주게 하지 못했다. 어디가 문제인지 찾아보니 백엔드에서 가져오는 id가 내가 DB에 저장한 id를 가져오지 않고, \_id의 정보를 가져오고 있어서 이 문제를 해결해야 한다. 아니면 \_id를 사용하는 대신 안보이도록 css를 줘서 해결하는 방법도 생각 중이다. 결국 \_id를 사용해서 보여주는지, 아니면 id를 사용해서 보여주는지 정해야 할 것 같다. 처음에는 루트 레이아웃에 자식 라우트로 설정해서 loader 함수가 문제인가 싶었지만, 다행히도 id와 관련된 백엔드에서의 문제인 거 같아서 백엔드에서 그 문제를 해결하면 게시글 세부 페이지의 내용이 제대로 출력될 거라고 생각이 된다.

<br />

# 내일 할 일

- React 공부 및 React 프로젝트 조금씩 진행하기

<br />

# 앞으로 해야 할 일

- React, NextJS 공부

- React 프로젝트 제작
