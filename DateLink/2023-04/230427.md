# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - 가입하기에서 비밀번호를 해싱해서 저장
    - 어제는 비밀번호를 그냥 텍스트형식으로 저장하였으나, 그렇게하면 보안상의 문제가 있기 때문에 해싱해서 저장하도록 변경하였다.
    - bcryptjs를 사용해 비밀번호를 12자리로 해싱해 보안을 강화하였다.
    - bcryptjs에는 첫 번째 인자로 해싱되지 않은 비밀번호 두 번째 인자로는 해싱 강도를 설정한다.
      - `const hashPassword = await bcrypt.hash(signUpPassword, 12);`
    - user를 db에 생성하는 부분에서도 기존의 signUpPassword가 아닌 hashPassword로 바꿔주며, 해싱된 비밀번호가 저장된다.
  - 가입하는 부분에서 유효성 검사
    - if문의 조건문을 통해 유효성 검사 한다.
      - 이메일이 작성되었는지 확인
      - 이메일 확인이 작성되었는지 확인
      - 패스워드가 입력되었는지 확인
      - 패스워드가 앞 뒤 공백없이 6자리 이상인지 확인 6자리 미만이라면 통과되지않음
      - 이메일과 이메일 확인에 작성된 내용이 동일한지 확인
      - 이메일에 '@'가 들어가있는지 확인
    - 여기서 if문은 '||'를 사용해서 모두 false가 되었을 때 다음 코드로 이동된다. 하나라도 true가 된다면 return 되며, 가입하는 페이지로 다시 돌아온다.
    - if문의 조건을 '&&'로 해서 전부 true로 확인되면 넘어가도록 변경하려고 생각중
    - 앞의 if문을 통과한 후에 mongodb에서 입력한 이메일을 확인해 이미 존재하는지 여부를 확인하고 존재한다면 다른 이메일을 입력하도록 한다. 존재하지 않는다면 비밀번호를 해싱하는 부분으로 넘어간다.
  - 로그인 기능 구성 및 유효성 검사 추가
    - 처음에 입력된 이메일을 가지고 이메일이 존재하는지 확인한다. 이메일이 존재하면 다음으로 존재하지않으면 다시 로그인 페이지로 리다이렉트한다.
    - 그 다음으로 input에서 입력한 비밀번호와 mongodb에 해싱된 상태로 저장된 비밀번호 를 compare 함수를 사용해 비교하는 변수를 만든다.
    - 여기서 compare 함수에는 첫 번째 값은 해시되지 않은 값, 두 번째 값은 해시되지 않은 값을 비교하려는 해시된 값이 들어간다. 첫 번째 값으로 input에서 입력한 비밀번호의 값 `loginPassword`, 두 번째 값으로 이메일 확인 절차를 거친 패스워드 즉, mongodb에 저장된 이메일의 해시된 비밀번호 값인 `existingLoginUser.password`이 들어가게 된다.
    - if문으로 해시되기전 비밀번호와 해싱된 후 비밀번호를 비교해 일치하는지 확인해 일치하지 않는다면 로그인 페이지로 다시 리다이렉트 시키며, 확인이 된다면 로그인되었다는 메시지가 뜬다. (아직은 콘솔에만 확인가능)

  <br />

- 게시판 제작 진행 다음 목표

  - 본격적으로 회원가입, 로그인 관련 로직을 구성해야함 (express-session, connect-mongodb-session, bcryptjs 패키지를 추가해 작업할 예정)
  - 회원가입, 로그인 로직을 구성하고 프로필 내용을 구성할 생각인데, 이 내용은 로그인한 계정이 작성한 게시글의 목록을 볼 수 있도록 할 생각
  - 게시글 삭제시, 로그인한 이메일의 비밀번호를 확인해 삭제되도록 변경해야함
  - 페이지당 5개의 게시글까지만 보여지도록 해놓았으니, 이제 페이지네이션도 똑같이 한 화면에는 5개까지의 페이지버튼이 보이도록하고, 그 다음 6~10 이런 페이지 버튼은 다음 페이지 버튼을 클릭 시 보이도록 하려고 생각 중 (보류)
  - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함 (이 부분은 로그인 기능을 추가하면 그 ID를 통해서 쿠키나 세션을 사용해 저장하고, 사용자가 클릭 시 조회수가 중복으로 상승하지 않도록 하는 로직을 구상 중)
  - CSS 부분에서 조언을 구해야할 부분
    - input에서 focus 되었을 때 background color 변경 유무
    - navbar 글씨 크기
    - 회원가입, 로그인 UI 그리고 border 또는 box-shadow 사용 유무 어떤게 나은지
    - 회원가입, 로그인에서 a태그로 만든 부분 색 관련 물어보기
    - 회원가입 이름이 적당한지 그냥 가입하기가 맞는지
    - 회원가입, 로그인 label, input 간격이 괜찮은지 물어보기

<br />

# 오늘 느낀 점

- 비밀번호를 해시하는 부분은 생각보다 간단했는데 유효성을 검사하는 부분에서 여러가지 확인해야해서 괜히 'or'연산자를 사용해서 좀 정신없었던 거 같다. 전부 'and'로 바꿔서 더 보기편하고 쉽게 바꾸려고 생각중이다. 아직 session을 추가하지않고, 비밀번호만 해싱된 후 이메일이 중복되는지 또는 이메일이 존재하는지 그런 부분만 확인하는 유효성 검사를 추가하였는데 이제 session을 추가해 더 확실하게 인증 검사를 하도록 할 생각이다.

<br />

# 내일 할 일

- JS, ExpressJS, MongoDB로 게시판 제작 + (EJS)

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- Python으로 웹 스크래퍼 만들어보기

- Python, PHP 공부할 거 찾아보기

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기

- Python 데이터 분석도 한번 봐보기
