# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - 게시글을 클릭 했을 때 조회 수가 증가하도록 추가
    - mongodb 데이터를 업데이트하는 연산자를 사용해 조회 수 기능 추가
    - $inc
      - MongoDB에서 제공하는 업데이트 연산자 중 하나로, 해당 필드의 값을 증가 또는 감소시킬 수 있다.
      - 일반적으로 숫자형 필드에 대해서만 사용되며, 다른 필드타입에는 적용할 수 없다.
      ```
      await db
        .getDb()
        .collection("posts")
        .updateOne({ _id: postId }, { $inc: { count: 1 } });
      ```
    - $inc 외의 다른 MongoDB 연산자
      - $set: 해당 필드의 값을 설정한다.
      - $unset: 해당 필드를 삭제한다.
      - $push: 해당 필드의 배열에 값을 추가한다.
      - $pull: 해당 필드의 배열에서 값을 삭제한다.
      - $rename: 해당 필드의 이름을 변경한다.
      - $addToSet: 해당 필드의 배열에 중복되지 않는 값만 추가한다.
    - 추가로 mongodb에서 업데이트되는 조회수를 보여지도록 mongodb에 숫자로 저장되도록 하고, 게시글과 게시글 내용에서 조회 수가 보이도록 함
      - 게시글을 보여주는 라우터에서 조회수를 추가해주고, 새로운 게시글이 생성될 때 그 조회수는 0으로 시작하도록 해주며, 해당 게시글이 클릭 될 때 조회수가 1씩 증가하도록 함
      - 게시글 목록, 게시글 내용에 해당하는 ejs파일에서 조회수를 보여주는 부분의 비어있던 필드를 키 값을 가져와서 채워주었다.
  - 게시글 수정 페이지를 추가
    - ejs 파일의 내용은 게시글 생성 페이지와 비슷해서 그걸 가져와서 form의 aciton 즉, 폼이 전송될 URL을 바꿔주고, input 값들의 value를 추가해 해당 id의 데이터를 그대로 가져와 입력 되어있게 하였다. 추가로, 버튼이 조금 다른데 취소 버튼을 클릭했을 때 posts 페이지로 가는게 아닌, 해당 id의 페이지로 돌아가게 설정하였다.
    - findOne을 통해 해당 id를 확인해 그에 맞는 데이터를 키로 전달해주고, 보여주도록 하였다.
    - 해당 id에 맞는 수정 페이지에 넘어온 데이터의 input 값을 수정해 업데이트 할 수 있는데 여기서 updateOne 속성과 mongodb의 연산자 `$set`을 사용해 input의 수정된 값을 mongodb에 업데이트한다.
    - 마지막으로 업데이트되면 posts로 이동하는게 아닌 수정하려고 했던 id에 해당하는 페이지로 이동해 수정된 내용을 바로 확인할 수 있도록 구성하였다.

  <br />

- 게시판 제작 진행 다음 목표

  - 게시판 구성에 필요한 ejs 파일의 몇개만 구성을 해놓았는데 모든 세부 구성은 하지 않더라도 기본 틀은 가져와서 구성을 해놓아야 한다고 생각 중
    - 게시글 수정하는 내용을 가져와서 ejs로 변경해서 사용하는데 문제없이 작동
    - 추가해놓은 ejs파일 중 구성 해야하는 파일은 404, 500 ejs파일을 구성해야한다.
  - 근데 여기서 생각해봐야할 부분 페이지네이션, 그리고 기존에 게시판에서 DOM으로 생성했던 그 게시글을 보여주는 div들을 ejs에서 구성을 해놓고 보여줄 것 인지 아니면 그 부분을 생각해보아야 함
    - 이 부분은 DOM으로 생성했던 게시글을 보여주는 div들은 단순하게 키를 만들어 가져와 ejs파일에서 사용해서 보여주도록 함.
    - 페이지네이션 기능은 조금 더 생각해보아야함 차근차근 순서대로 진행해야하기 때문
    - 페이지네이션은 먼저 게시글부터 구성을 하고 그 다음 생각
  - DOM을 사용하지 않고, ejs에서 구성을 해놓는 쪽으로 일단 생각 중
  - 필요하다면 따로 js 파일을 만들어서 DOM을 추가할 생각도 구상 중
  - 게시글이 내림차순으로 보이도록 설정하고, 한 페이지당 5개의 게시글까지만 보여지고 그 뒤로는 페이지네이션으로 작동하도록 해야함
  - 삭제하는 기능도 추가해야함
  - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함

<br />

# 오늘 느낀 점

- 클릭 했을 때 조회수가 정상적으로 증가하는게 문제없이 작동하였다. 근데 현재는 `/posts/:id` 라우터가 동작할 때마다 조회수가 오르기 때문에 수정, 수정취소, 새로고침 관련 동작에 대해 조회수가 오르지 않도록 막아줄 필요가 있는데 수정, 수정취소, 새로고침 이런 동작을 실행했을 때에도 조회수가 오르는 문제를 수정할 필요가 있다고 느꼈다.

- 수정 페이지를 추가한 부분은 문제없이 작동하는데 기존의 JS로 게시판을 제작했을 때보다 훨씬 쉽다고 생각되었다. 수정 페이지 부분 form의 데이터를 전송하는 부분에서 애먹었는데 expressjs로 제작하는 부분은 아무래도 url 부분도 쉽게 해결이 가능하고, 기존의 js로 제작하는 것보다 코드 작성에도 훨씬 자유롭고, 간편하다고 생각이 된다. 새삼 혼자서 expressjs를 사용해서 웹 개발을 하면서 앞으로 expressjs로 개발을 많이 할 거 같다는 생각이 든다.

<br />

# 내일 할 일

- JS, ExpressJS, MongoDB로 게시판 제작 + (EJS)

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- Python으로 웹 스크래퍼 만들어보기

- Python, PHP 공부할 거 찾아보기

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기

- Python 데이터 분석도 한번 봐보기
