# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - 데이터 삭제 시 해당 데이터의 뒷 번호에 해당되는 모든 데이터의 번호를 감소시키며, 중간에 비어있는 번호가 없도록 구성
    - 먼저 findOne으로 해당하는 게시글 ID를 사용해 posts 컬렉션에서 단일 문서를 찾아 post 변수에 할당해준다.
    - 그 다음 deleteOne을 사용해 게시글 ID에 맞는 데이터를 posts 컬렉션에서 데이터를 삭제한다.
    - 마지막으로 updateMany를 사용해 num의 값을 업데이트 해주는데 여기서 post 변수에서 num을 찾고, $gt를 사용해서 지정한 값보다 큰 값을 가진 필드를 조회해 num의 값 전체를 $inc를 사용해 -1씩 감소시키며, 중간에 번호가 비어있지 않게 한다.
      - $gt 같은 쿼리 연산자로는 $lt, $lte, $gte
      - $gt : greater than의 약어, 지정한 값보다 큰 값을 가진 필드를 조회할 때 사용
      - $gte : greater than or equal to의 약어, 지정한 값보다 크거나 같은 값을 가진 필드를 조회할 때 사용
      - $lt : less than의 약어, 지정한 값보다 작은 값을 가진 필드를 조회할 때 사용
      - $lte : less than or equal to의 약어, 지정한 값보다 작거나 같은 값을 가진 필드를 조회할 때 사용
  - 페이지네이션 기능
    - 내일 다시 제대로 UI랑 구현해서 추가할 생각

  <br />

- 게시판 제작 진행 다음 목표

  - 근데 여기서 생각해봐야할 부분 페이지네이션, 그리고 기존에 게시판에서 DOM으로 생성했던 그 게시글을 보여주는 div들을 ejs에서 구성을 해놓고 보여줄 것 인지 아니면 그 부분을 생각해보아야 함
    - 이 부분은 DOM으로 생성했던 게시글을 보여주는 div들은 단순하게 키를 만들어 가져와 ejs파일에서 사용해서 보여주도록 함.
    - 페이지네이션 기능은 조금 더 생각해보아야함 차근차근 순서대로 진행해야하기 때문
    - 페이지네이션은 먼저 게시글부터 구성을 하고 그 다음 생각
  - 필요하다면 따로 js 파일을 만들어서 DOM을 추가할 생각도 구상 중
  - 한 페이지당 5개의 게시글까지만 보여지고 그 뒤로는 페이지네이션으로 작동하도록 해야함
  - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함 (이 부분은 로그인 기능을 추가하면 그 ID를 통해서 쿠키나 세션을 사용해 저장하고, 사용자가 클릭 시 조회수가 중복으로 상승하지 않도록 하는 로직을 구상 중)

<br />

# 오늘 느낀 점

- 게시글을 삭제했을 때 삭제된 게시글의 번호가 비어있게되면서 게시글의 번호에 대한 공백이 생기게되면 UI에서도 불편하고, 데이터가 계속 마지막 번호에 추가되어 생성되기 때문에 1, 99, 150 이렇게도 될 수 있기 때문에 중간에 게시글의 번호가 비어있지 않도록 삭제된 게시글 뒤에 있는 게시글의 번호들이 -1이 되도록 바꿔주었는데 이 부분을 수정할 때 먼저 해당 게시글의 ID 정보를 저장해놓아야 하는데 나는 여기서 바로 deleteOne을 동작하고, 그 다음 updateMany을 동작하는 코드를 만들어서 문제가 생겼는데 deleteOne이 실행되면서 updateMany에서 deleteOne을 통한 삭제한 문서에 대해 정보를 가져와 해당 번호를 확인해 그 번호 뒤에 있는 데이터들은 -1이 되도록 해놨으나 이 부분에서 오류가 있었다. deleteOne 정보를 담은 변수가 실행되면서 삭제된 데이터의 정보를 제공하지 않으며, 사용할 수 없게 되버린 것인데 그렇게 되면 updateMany에서 사용하는 deleteOne 정보를 담은 변수가 undefined로 할당되며 해당 게시글이 삭제는 되지만, 그 뒤에 있는 게시글들이 -1이 되지않아 기존의 코드와 똑같은 상황이 발생하였다. 그래서 따로 findOne 함수를 사용하는 변수를 만들어 먼저 저장해놓고, 그 다음 deleteOne을 실행해 삭제한 다음 findOne을 사용한 변수를 updateMany에 가져와 num의 값을 찾고, 그 num의 값보다 큰 num 값들만 찾아 더 큰 모든 num의 값들을 -1 해주면서 중간에 비어있는 번호의 자리도 메꿔주면서 모든 번호가 연속적으로 이어지게 만들어주었다. 처음에 이 동작이 실행되도록 코드를 짰을 때 문제가 없을거라고 생각했는데, 예상과 다르게 조금씩 변경해서 해보아도 계속 deleteOne만 동작하고, updateMany 기능은 동작하지 않아서 대체 뭐가 문제인지 싶었는데 deleteOne을 통해 삭제되면 그 데이터의 정보를 제공하지 않는 사실을 간과해 생기는 오류였다. 그래서 findOne을 통해 먼저 해당 데이터를 찾아서 변수에 저장해놓고, 데이터를 지우고 업데이트하니 문제가 해결되었는데 앞으로는 저런 코드만의 문제가 아닌 데이터가 동작하는 부분에 대해서도 생각해서 코드를 작성해야한다고 다시 한번 느꼈다.

- 페이지네이션 기능을 JS 파일을 따로 만들어서 DOM을 추가해 구성해야하나 고민하다가 이대로는 해결이 안될 거 같아서 expressjs에서 mongodb와 데이터를 연결하는 라우터에서 해결할 수 있는지 chatgpt에게 물어보니 일반적으로 expressjs에서 mongodb와 데이터를 연결하는 라우터에서 해결하는게 좋다고 해서 그 부분으로 생각을 굳혔다. 그래서 일반적인 JS가 아니다 보니 mongodb에서 사용할 수 있는 메서드를 이용해야해서 이 부분에 대해서도 물어보았는데 skip 과 limit 메서드를 사용하는 것 같은데 이 부분은 내일 다시 코드를 짜면서 봐야될 거 같다. 요 근래에 계속 페이지네이션을 어떻게 구성해야할까 하는 생각을 해왔는데 생각보다 깔끔하게 답변을 받아서 일단은 어느정도 가닥은 잡힌거 같다. 물론 아직 현재 진행형이지만 expressjs와 mongodb에서 페이지네이션 기능을 완성해서 이해하고, 넘어가고 싶다고 생각된다.

<br />

# 내일 할 일

- JS, ExpressJS, MongoDB로 게시판 제작 + (EJS)

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- Python으로 웹 스크래퍼 만들어보기

- Python, PHP 공부할 거 찾아보기

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기

- Python 데이터 분석도 한번 봐보기
