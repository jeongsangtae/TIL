# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - 배포
    - 결과적으로 배포에 성공
    - 기본적으로 서버쪽에서 `mongodb://127.0.0.1:27017` 이 부분은 `mongo atlas`에서 연결하는 내용을 가져와서 `render.com`에서 환경 변수로 저장해서 처리해주었는데 계속 저 처리해준 부분이 에러가 발생했다.
    - 이 에러가 처음부터 발생하는 것이 아닌, 처음에 배포한 사이트를 접속했을 때는 정상적으로 접속이 가능하고, session과 관련된 부분에서 접속했을 때 에러가 발생하는데 그래서 session을 처리해주는 부분에서 확인을 해보니 그 코드에서도 `mongodb://127.0.0.1:27017` 이 부분이 들어가 있어 처리가 필요했는데 내가 이 부분을 처리해주지 않아서 계속 에러가 발생했던 것이다.
    - 기존에 let mongodbUrl로 처리해주는 부분을 가져와서 if문으로 환경변수로 처리해주고, mongodbUrl를 uri쪽에 넣어주고, 다시 deploy해주니 정상적으로 작동하는 것을 확인할 수 있었다.

  <br />

- 게시판 제작 진행 다음 목표

  - 구성은 되어있는데 혹시나 수정할 수도 있는 부분
    - 문제가 하나 있는데 비밀번호를 확인하고 일치했을 때 게시글이 생성되는 것은 좋은데 그 비밀번호를 저장하는게 사용자의 비밀번호를 그대로 저장을 하고 있기 때문에 이 부분을 변경해야 함
      - 방법1 해싱된 상태의 비밀번호가 저장이 되도록 한다. (테스트는 해봄)
      - 방법2 비밀번호는 게시글에 저장하지 않도록 한다. (현재는 이 방법으로 구성)
      - 이 부분은 더 이상 생각하지 않아도 될 거 같음 굳이 해싱된 비밀번호를 저장하지 않아도 될 거 같다는 생각 그래서 아이에 비밀번호를 게시글에 저장하지 않도록 해놓음
    - 패스워드, 수정, 삭제 에러 관련 동작 처리
      - 최종적으로 다시 모달창으로 변경해주었다. 이벤트리스너 에러를 if문으로 조건을 추가해 해당 페이지에 들어왔을 때 바로 작동하지 않도록 해주며 해결하였다.
      - 수정, 삭제는 그냥 게시글 작성자가 아니라면 버튼이 보이지 않도록 해 막아주었다.
      - 추가로 해당 게시글 작성자가 아닌데 url로 접속시도를 하는경우 401페이지로 이동하도록 해주었다.
    - 페이지당 5개의 게시글까지만 보여지도록 해놓았으니, 이제 페이지네이션도 똑같이 한 화면에는 5개까지의 페이지버튼이 보이도록하고, 그 다음 6~10 이런 페이지 버튼은 다음 페이지 버튼을 클릭 시 보이도록 하려고 생각 중
      - 이 부분도 수정해서 예로 13번까지 페이지 버튼이 있다면 5개 단위로 끊어져있고, 5페이지에서 다음 버튼 클릭시 6번으로 넘어가면서 6~10이 보여지고 또 10 페이지에서 다음 버튼 클릭시 11~13이 보여지도록 되어있다. (이 방법으로 구성되어있음)
      - 다른 방법으로 페이지 버튼이 이전과 다음 버튼으로 아이에 정해진 단위대로 이동하는 것
      - 또 다른 방법으로 현재 보이는 페이지를 페이지 버튼에서 중앙으로 잡고 이전과 다음 버튼으로 -1, +1 씩 이동하는 방식
    - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함
      - 조회 수를 시간 간격을 10초 정도로 주며, 중복된 사용자나 다른 사용자가 다시 클릭해도 10초가 지나지않으면 오르지 않도록 설정해놓았다.
        - 이 부분도 시간을 좀 수정하거나 이 정도만 확인하면 될 것 같다.
      - 세션 만료시 일정 시간 후에 세션 데이터가 자동으로 삭제되도록 하는 코드를 추가해놓았는데 정상적으로 작동해서 이 부분은 이제 해결이 된 것 같다. (세션 부분 파일을 따로 분리해놓은 곳에서 추가해놓음)
    - 삭제할 때 비밀번호 확인이 필요한가...? 좀 고민해봐야 함 애초에 권한 유무로 삭제하기 때문에 굳이 라는 생각도 들기 때문에 좀 의견을 물어볼 필요가 있음
    - 방법1. 그냥 삭제가 되도록한다.
    - 방법2. 예, 아니오 창이 떠서 거기서 한번 더 의사를 물어보고 삭제할지 안할지 결정(이 방법으로 구성)
    - 방법3. prompt창을 사용해서 비밀번호를 입력해서 삭제한다.
    - 방법4. 모달창에서 비밀번호를 입력해서 비밀번호가 맞을 시 삭제

<br />

# 오늘 느낀 점

- 저번주에 여행을 다녀와서 바로 다시 배포에 대한 문제를 해결하기 위해서 mongodbCompass도 사용해서 문제를 해결하려고 해보았는데 전혀 해결하지 못해서 포기해야하나 생각을 해보았는데 뭔가 다시 배포한 페이지에 접속해보니 분명 처음에 배포 사이트는 접속이 되고 회원가입, 로그인 부분에서 계속 페이지가 리로드되며 접속이 안되는 상황이 발생했는데 이 부분을 생각해보니 session 부분과 관련이 된건데 이 부분에서 혹시 로컬 호스트로 연결이 되어있나 확인해보니 로컬 호스트로 연결이 되어있어서 서버에서 처리해준 방법과 마찬가지로 변경을 해주었다. 변경을 해주고 다시 deploy를 해주니 정상적으로 배포한 사이트에 접속할 수 있었다. 저번에도 session 부분에서 오류가 있는건가 하는 생각을 했는데 좀 더 빨리 session 부분에서 확인을 해보지 않았는지 후회했다.

- session 부분 구성을 처음에 작업해놓고 수정을 해줄 필요가 없어서 서버에서처럼 url부분이 들어가는지 확실하게 알지 못해서 session 부분이 문제인건 예상을 했으나, session 부분을 확인할 생각을 안한게 문제였던거 같다. session 부분을 바로 확인해보면 사전에 문제를 해결할 수 있었을 거 같은데 session 부분에 문제가 있는 거 같다는 생각을 하고 긴가민가 하면서 확인하지 않은 내 실수로 배포가 늦어졌는데 결과적으로 배포에 성공해서 그래도 뿌듯하고 이제 배포한 내용을 이력서에 추가해서 내용도 추가해놓고, 그 다음으로는 React를 공부하면서 nextjs를 함께 공부할 생각이다. 그리고 공부하면서 다른 프로젝트로 해보려고 생각중이다.

<br />

# 내일 할 일

- 이력서 업데이트, React 공부

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- React, NextJS 공부

- Python으로 웹 스크래퍼 만들어보기 (조금 뒤로 밀림)

- Python, PHP 공부할 거 찾아보기 (조금 뒤로 밀림)

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기 (조금 뒤로 밀림)

- Python 데이터 분석도 한번 봐보기 (조금 뒤로 밀림)
