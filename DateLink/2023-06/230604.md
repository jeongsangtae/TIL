# 오늘 한 일

### JS 토이 프로젝트 제작 (JS, ExpressJS, MongoDB로 만드는 게시판 + EJS)

- 게시판 제작 진행 과정

  - 게시글 삭제시 해당 게시글에 관련된 모든 댓글과 답글 삭제되도록 변경
    - 어제 댓글 삭제시 해당 댓글과 관련된 모든 답글 삭제되는 부분까지는 해결을 했는데 게시글 부분을 삭제할 때 관련된 모든 댓글과 답글을 삭제하는 부분은 제대로 구현하지 못해서 오늘 마무리 해주었다.
    - 두 가지 방법을 고민했는데 첫 번째 방법은 게시글의 \_id를 답글에도 저장해서 게시글을 삭제할 때 그 게시글의 \_id를 댓글과 답글에서 확인해서 일치하는 게시글 \_id에 해당되는 모든 댓글과 답글을 삭제하는 방법
    - 다른 방법은 저렇게 게시글 \_id를 답글에서 저장하지않고, 게시글 삭제 코드에서 먼저 댓글에서 게시글 \_id와 일치하는 내용을 찾고 그 다음 for 반복문을 통해서 그 일치하는 댓글들 \_id와 답글에서 저장한 댓글 \_id를 비교해서 일치하는 내용을 모두 삭제하도록 해주는 방법을 생각했다.
    - 두 방법 모두 확인해본 결과 정상적으로 작동하는 걸 확인했고, 어떤 코드가 더 가독성이 좋은가 생각해보았을 때 개인적으로는 첫 번째 방법이 좀 더 게시글 \_id를 답글에서도 저장하면서 게시글이 최상단에 있다는 것을 말해줄 수 있고, 코드에서도 더 많은 내용을 지워도 되는 부분들이 있어서 훨씬 코드가 단조로워져서 좋다고 생각해 선택하게 되었다.
    - 결과적으로 중간에 필요없는 코드들을 많이 지워주었고, 훨씬 코드가 가독성이 좋아졌다고 생각이 된다. 그리고 확실히 게시글과 댓글 그리고 답글 관계가 명확하게 보여줘 이해하기 쉬운거 같아서 좋은거 같다는 생각이든다.

  <br />

- 게시판 제작 진행 다음 목표

  - 댓글 기능
    - 답글쓰는 부분 기능 추가 현재는 답글 추가 됨
    - 이제 몇가지 확인과 자잘한 부분을 추가해주면 된다.
      - 그리고 댓글 답글 입력부분에서 shift+enter로 다음 줄로 바꿔서 입력해도 저장하고 화면에 보이는게 다음 줄로 내려와서 보이는게 아니라 띄어쓰기한 상태로 보이기 때문에 이 부분도 수정이 필요하다.
      - 추가로 댓글이 삭제된다면 답글도 함께 삭제되도록 하는 부분도 추가
      - 게시글 삭제시 관련된 모든 댓글과 답글도 삭제가 되도록 변경
  - 구성은 되어있는데 혹시나 수정할 수도 있는 부분
    - 문제가 하나 있는데 비밀번호를 확인하고 일치했을 때 게시글이 생성되는 것은 좋은데 그 비밀번호를 저장하는게 사용자의 비밀번호를 그대로 저장을 하고 있기 때문에 이 부분을 변경해야 함
      - 방법1 해싱된 상태의 비밀번호가 저장이 되도록 한다. (테스트는 해봄)
      - 방법2 비밀번호는 게시글에 저장하지 않도록 한다. (현재는 이 방법으로 구성)
      - 이 부분은 더 이상 생각하지 않아도 될 거 같음 굳이 해싱된 비밀번호를 저장하지 않아도 될 거 같다는 생각 그래서 아이에 비밀번호를 게시글에 저장하지 않도록 해놓음
    - 패스워드, 수정, 삭제 에러 관련 동작 처리
      - 최종적으로 다시 모달창으로 변경해주었다. 이벤트리스너 에러를 if문으로 조건을 추가해 해당 페이지에 들어왔을 때 바로 작동하지 않도록 해주며 해결하였다.
      - 수정, 삭제는 그냥 게시글 작성자가 아니라면 버튼이 보이지 않도록 해 막아주었다.
      - 추가로 해당 게시글 작성자가 아닌데 url로 접속시도를 하는경우 401페이지로 이동하도록 해주었다.
    - 페이지당 5개의 게시글까지만 보여지도록 해놓았으니, 이제 페이지네이션도 똑같이 한 화면에는 5개까지의 페이지버튼이 보이도록하고, 그 다음 6~10 이런 페이지 버튼은 다음 페이지 버튼을 클릭 시 보이도록 하려고 생각 중
      - 이 부분도 수정해서 예로 13번까지 페이지 버튼이 있다면 5개 단위로 끊어져있고, 5페이지에서 다음 버튼 클릭시 6번으로 넘어가면서 6~10이 보여지고 또 10 페이지에서 다음 버튼 클릭시 11~13이 보여지도록 되어있다. (이 방법으로 구성되어있음)
      - 다른 방법으로 페이지 버튼이 이전과 다음 버튼으로 아이에 정해진 단위대로 이동하는 것
      - 또 다른 방법으로 현재 보이는 페이지를 페이지 버튼에서 중앙으로 잡고 이전과 다음 버튼으로 -1, +1 씩 이동하는 방식
    - 한 가지 확인해야 할만한게 수정 페이지에 가게되면 조회수가 1씩 계속 증가되는데 수정하지 않고, 취소해도 증가하는 부분을 확인해봐야함
      - 조회 수를 시간 간격을 10초 정도로 주며, 중복된 사용자나 다른 사용자가 다시 클릭해도 10초가 지나지않으면 오르지 않도록 설정해놓았다.
        - 이 부분도 시간을 좀 수정하거나 이 정도만 확인하면 될 것 같다.
      - 세션 만료시 일정 시간 후에 세션 데이터가 자동으로 삭제되도록 하는 코드를 추가해놓았는데 정상적으로 작동해서 이 부분은 이제 해결이 된 것 같다. (세션 부분 파일을 따로 분리해놓은 곳에서 추가해놓음)
    - 삭제할 때 비밀번호 확인이 필요한가...? 좀 고민해봐야 함 애초에 권한 유무로 삭제하기 때문에 굳이 라는 생각도 들기 때문에 좀 의견을 물어볼 필요가 있음
    - 방법1. 그냥 삭제가 되도록한다.
    - 방법2. 예, 아니오 창이 떠서 거기서 한번 더 의사를 물어보고 삭제할지 안할지 결정(이 방법으로 구성)
    - 방법3. prompt창을 사용해서 비밀번호를 입력해서 삭제한다.
    - 방법4. 모달창에서 비밀번호를 입력해서 비밀번호가 맞을 시 삭제

<br />

# 오늘 느낀 점

- 생각보다 되게 간단한 작업이었는데 생각하는데 좀 시간이 걸린거 같다. 어제 해결하지 못하고 잠들기 전에 갑자기 생각이 든게 첫 번째 방법인데 이 첫 번째 방법이면 쉽게 게시글 삭제시 관련된 모든 댓글과 답글을 삭제할 수 있겠다는 생각이 들어서 테스트를 해봤는데 생각대로 간단하게 이 방법으로 해결을 할 수 있었다. 하지만 이 방법이 아닌 다른 방법도 있을 거 같았는데 그 방법이 반복문을 추가해서 댓글들을 찾고 그 댓글들에서 답글을 지우면 되지않을까 하는 생각에 두 번째 방법도 테스트를 하게 되었는데 두 번째 방법도 생각한대로 삭제가 정상적으로 되는 것을 확인했는데 두 방법 모두 작동하는 것을 보고 좀 뿌듯하게 생각했다.

- 두 번째 방법은 답글을 삭제하는 절차가 좀 더 명확하게 드러나기는 하지만 첫 번째 방법이 더 코드의 가독성도 좋고 불필요한 코드를 제거해 코드가 많이 간결해지며 더 좋다고 생각해 첫 번째 방법을 선택했는데 꽤 만족스럽다고 생각이 된다. 두 번째 방법도 일단은 주석처리 해놓고 놔두었는데 결국 이 프로젝트는 내가 개인적으로 포트폴리오용으로 만드는 것이기 때문에 내가 선택을 하는 것이지만, 만약 회사에서 선택을 한다면 그 회사에서 요구사항이나 설계에 따라 달라질 수 있다고 생각이 된다.

- 이제 마지막으로 줄 바꿈하고 등록, 수정시 제대로 화면에 출력되지 않는 부분만 수정해주면 기능 부분에서 마무리가 된다고 생각하는데 이 기능을 마무리하고 이제 css만 검토하면 서버에 저장해 관리하는 게시판은 끝이 난다고 생각이 된다. 물론 여기서 기능을 더 추가한다면 할 수 있지만 그건 일단 배포를 하고 또 추후에 하나씩 추가하면 된다고 생각이 된다. UI를 더 퀄리티 좋게 변경한다던지 admin을 만들어서 따로 admin 페이지를 만들어서 모든 게시글이나 댓글 이런 항목들을 관리할 수 있게 해준다던지, 여러 가지 기능들을 더 추가할 수는 있지만 현재는 굳이 필요한 기능은 아닌거 같아 일단은 마지막 줄 바꿈 문제만 해결해 마무리할 생각이다.

<br />

# 내일 할 일

- JS, ExpressJS, MongoDB로 게시판 제작 + (EJS)

<br />

# 앞으로 해야 할 일

- Advanced-js(고급 JS)에 대해 공부하며 이해하기 (JS 공부)

- Python으로 웹 스크래퍼 만들어보기

- Python, PHP 공부할 거 찾아보기

- Python 셀레니움, 브라우저 드라이버에 대해 한번 찾아보기

- Python 데이터 분석도 한번 봐보기
