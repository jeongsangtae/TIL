# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 그룹 채팅방 패널 구조, CSS 추가 및 그룹 채팅방 생성일, 호스트 닉네임 출력
  - 다이렉트 채팅방 패널 영역과 동일하게 그룹 채팅방 오른쪽 영역에 패널이 보여지도록 구조와 CSS를 추가하고, 그룹 채팅방 생성일과 호스트 닉네임 정보를 전달해 출력될 수 있도록 구성
  - 프론트엔드
    - GroupChatDetails
      - GroupChatPanel 컴포넌트를 불러와 JSX 코드 내에 추가
      - JSX 코드 내용 수정
        - 채팅 영역 className 수정
          - group-chat-content에서 group-chat-area로수정
        - GroupChatPanel 컴포넌트에 groupChatSince, hostNickname props를 추가해 그룹 채팅방 생성일과 호스트 닉네임 정보 전달
    - GroupChatPanel
      - groupChatSince, hostNickname props를 전달받아 사용할 수 있도록 구성
      - JSX 코드 내용 수정
        - 전체 내용을 감싸는 div 추가
          - group-chat-panel className으로 구성
        - 아바타 윗 부분 영역에 관련된 div 추가
          - avatar-header className으로 구성
        - 그룹 채팅방 호스트 정보 영역을 감싸는 div 추가
          - group-chat-host-info className으로 구성
        - 아바타 관련 내용을 추가하고 avatar className으로 구성
          - 호스트 닉네임 첫 글자가 보여지도록 구성
        - 호스트 닉네임 부분은 h3 태그를 사용해 추가
          - nickname className으로 구성
        - 그룹 채팅방 생성일 관련 영역을 감싸는 div 추가
          - group-chat-since-wrapper
        - 그룹 채팅방 생성일 텍스트를 추가하고 group-chat-since-label className으로 구성
        - 그룹 채팅방 생성일 데이터를 추가하고 group-chat-since className으로 구성
  - CSS
    - GroupChatDetails
      - group-chat-content class를 group-chat-area로 수정
    - GroupChatPanel
      - group-chat-panel
        - display는 flex, flex-direction은 column으로 구성
        - width는 21.5rem으로 구성
      - avatar-header
        - height는 9rem, width는 100%로 구성
      - group-chat-host-info
        - position은 relative, display는 flex, flex-direction은 column으로 구성
        - height는 100%, 배경색은 회색 계열로 구성
        - padding은 1rem, overflow-y는 visible로 구성
      - avatar
        - position은 absolute로 구성
        - top은 -2.25rem, width와 height는 4.5rem으로 구성
        - 폰트 크기는 2.5rem, 두께는 bold로 구성
        - 정렬을 위해 display, align-items, justify-content 추가
        - 텍스트는 흰색, 배경은 밝은 회색으로 구성
      - nickname
        - margin 위 1rem, 오른쪽 0, 아래 0.5rem, 왼쪽은 0으로 구성
        - margin-top을 2.25rem으로 구성해 덮어씌우도록 구성
      - group-chat-since-wrapper
        - padding을 0.75rem으로 구성
        - 배경색을 조금 어두운 회색으로 구성
      - group-chat-since-label
        - 폰트 크기는 0.85rem, 두께는 bold로 구성
      - group-chat-since
        - margin-top을 0.15rem, 폰트 두께는 0.875rem으로 구성
  - 다이렉트 채팅방 패널 영역과 동일하게 그룹 채팅방 오른쪽 영역에 패널이 보여지도록 구조와 CSS를 추가하고, 그룹 채팅방 생성일과 호스트 닉네임 정보를 전달해 출력될 수 있도록 구성
  - 그룹 채팅방 오른쪽 영역에 호스트 아바타와 닉네임 그리고 그룹 채팅방 생성일이 보여질 수 있도록 패널 관련 내용을 추가하고 그룹 채팅방 세부 내용에서 그룹 채팅방 패널에 호스트 닉네임과 그룹 채팅방 생성일 데이터를 전달해 출력될 수 있도록 구성하고 확인한 결과, 그룹 채팅방 패널에서 호스트 닉네임과 그룹 채팅방 생성일을 문제없이 출력하는 것을 확인할 수 있었다.
    - 호스트 닉네임과 그룹 채팅방 생성일은 문제없이 출력하고 있지만, 호스트 아바타 관련 색은 전달하지 못하고 있기 때문에 이와 관련된 내용을 수정해 전달해야 함
    - 호스트 아바타 색을 그룹 채팅방 정보에 따로 저장하고 있지 않기 때문에, 해당 내용을 불러와 전달할 방법을 찾아야 함
    - 그룹 채팅방 패널에 현재 참여 인원 수를 보여주고, 접는 기능을 추가해 펼치면 닉네임 리스트를 보여주고 접으면 보이지 않는 내용, 채팅방 설명이나 소개 문구를 호스트가 간단하게 작성하고 수정하는 내용, 공지사항 또는 고정 메시지를 짧게 보여주는 내용, 참여자 역할을 구분하는 내용(방장, 일반, 초대 대기중 등) 등 여러 내용을 생각중
    - 다른 컴포넌트에서 구성된 배열을 탐색하는 find, filter, map 같은 연산이 있는 내용에 useMemo를 추가해 최적화 해야 함
    - 다이렉트 채팅방 패널에 친구와 함께 참여한 서버, 같이 아는 친구 같은 내용이 들어가면 좋을 것 같아서 이 내용도 추가해봐야 함
    - 정리해야 할 내용은 정리하고 채팅 목록과 관련된 스크롤 관련 기능을 수정해봐야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/867d2dd48be319896cfb6f2ac829c36307edc0c9)

<br />

- 그룹 채팅방 패널 관련 내용 정리
  - 그룹 채팅방 패널에서 보여져야 하는 호스트 아바타 색을 어떤 방식으로 불러와 출력할 것인가?
    - 사용자 목록에서 id를 매칭해 아바타 색을 찾아서 전달하는 방식
      - 장점
        - 항상 최신 사용자 정보 기반
      - 단점
        - 유저 수가 많아질수록 연산 부담 증가 (클라이언트에서 필터링할 경우 더욱 증가)
        - 실시간 동기화가 필요하면 사용자 목록 관리가 중요
        - 유저 정보를 많이 캐싱하거나 전역에 유지할 때만 적합
    - 그룹 채팅방 데이터에 호스트 아바타 색을 추가해 함께 저장하고, 해당 내용을 불러와 전달하는 방식
      - 장점
        - UI 렌더링 시 바로 사용 가능 (추가 연산/필터링 필요 없음)
        - 사용자 수가 많아져도 성능 저하 없음
        - 코드 간결하고 예측 가능
      - 단점
        - 사용자 정보가 변경될 경우 실시간 반영 문제
          - 해당 문제는 해결할 수 있음
    - 결론
      - 두 방법 중에 그룹 채팅방 정보에 호스트 아바타 색을 함께 저장하는 것이 더 적절하고 효율적이라고 판단되며, 전체 사용자 목록을 불러와서 비교하는 방법은 유연하지만 확장성이나 성능 측면에서는 덜 효율적이고, 그룹 채팅방 정보는 이미 구성된 내용에 아바타 색 관련 내용만 추가하면 가능할 것으로 예상됨
      - 사용자 수가 적고 구조가 단순할 때는 사용자 목록을 사용해 비교하는 방법도 괜찮지만, 장기적 유지보수성과 성능을 고려하면 그룹 채팅방 데이터에 함께 저장하고 불러와 사용하는 쪽이 더 나아보임
  - 그룹 채팅방 패널에 추가로 보여져야 할 내용
    - 전체 참여 인원 수 및 닉네임 리스트
      - 전체 참여 인원 수는 "총 X명 참여 중" 이런식으로 보여주는 걸 생각중
      - 닉네임 리스트는 생략하거나 간단하게 요약해 출력
      - 또는 더보기 버튼을 추가해 클릭 시에 펼쳐지거나 모달로 보여지도록 하는 방법
    - 참여자 역할 구분
      - ex) 방장, 일반, 초대 대기중 사용자 등 다양한 표현
      - 뱃지를 사용해 구분하는 방향으로 생각중
    - 채팅방 설명 또는 소개 문구
      - 해당 채팅방이 무슨 용도인지, 어떤 역할을 하는지 설명하거나 소개하는 문구를 출력하는 방향으로 생각중
      - 호스트가 내용을 수정할 수 있어야 함
    - 공지사항 또는 고정 메시지
      - 호스트가 그룹 채팅방에 참여한 모든 사용자에게 전달하는 공지사항이나 고정 메시지을 전달
      - 채팅방 설명 또는 소개 문구와 유사하면서 다른 내용이므로 추가 고려중

# 오늘 느낀 점

- 그룹 채팅방 패널 컴포넌트를 추가하고 그룹 채팅방 세부 내용에서 호스트 닉네임과 그룹 채팅방 생성일을 전달해 출력하도록 구성한 내용은 문제없이 보여주고 있지만, 호스트 아바타 색 관련 내용은 제대로 처리하지 못했기 때문에 이와 관련된 내용을 수정해 호스트 아바타 뒤에 아바타 색이 보여지도록 구성해야 한다. 사용자 목록을 불러와 비교하고 일치하는 사용자 정보의 내용에서 추출하는 방법과 그룹 채팅방 정보에 호스트 아바타 색을 저장해 사용하는 방법 중에 후자가 더 코드도 간결하고 장기적으로 생각하면 유지보수나 성능면에서 훨씬 나은 방법이라고 생각되어 해당 방법으로 아바타 색을 가져오고 전달할 생각이다. 그룹 채팅방 패널에 전체 참여 인원 수와 닉네임 리스트를 보여주도록 구성할 생각이고, 여기에 추가로 참여자 역할을 구분하는 것도 재밌을 것 같아서 추가해볼 생각이며, 채팅방 설명 또는 소개 문구 아니면 공지사항이나 고정 메시지를 호스트가 작성하고 언제든지 수정할 수 있도록 구성해볼 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 출력되는 채팅 메시지 목록에 스크롤 관련 내용을 추가 수정해야 함

- 채팅 입력창에 적용된 스크롤 기능 추가 수정 필요

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
