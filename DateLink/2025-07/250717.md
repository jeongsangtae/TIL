# 오늘 한 일

### React + TypeScript 프로젝트 제작 (React, TypeScript, ExpressJS, MongoDB로 만드는 실시간 통신 애플리케이션)

- 친구 요청 목록 받음/보냄 구분하는 내용 수정 및 대기중 친구 목록 관련 내용 구조 수정 및 코드 정리
  - 친구 요청 목록을 받은 요청과 보낸 요청으로 구분해 저장한 후에, 필터를 사용해 나누고 받음 영역과 보냄 영역에 각각 전달해 출력되도록 구성하고, 이전에 사용하던 로직과 주석 처리한 로직을 정리
  - 프론트엔드
    - Friends
      - sendFriendRequests 변수 수정
        - sendRequest 변수 수정
          - 로그인한 사용자 \_id 정보를 따로 변수로 저장한 내용과 검색한 친구 요청 requester 내용을 비교해 일치하는지 확인
        - sendRequest 변수를 조건부로 사용한 조건문 수정
          - 공통적으로 들어가는 내용에서 friendRequestId 항목 삭제
          - sendRequest 변수가 true일 경우 내용 수정
            - avatarColor 항목에 receiverAvatarColor 내용이 들어가도록 구성
      - sentRequests 변수 추가
        - sendFriendRequests 변수에 filter를 사용해 `sendFriendRequest.sendRequest` 내용이 true가 되는 요청만 남기도록 구성
        - 최종적으로 보낸 요청만 남게 됨
      - receiverRequests 변수 추가
        - sendFriendRequests 변수에 filter를 사용해 `!sendFriendRequest.sendRequest` 내용이 true가 되는 요청만 남기도록 구성
        - 최종적으로 받은 요청만 남게 됨
      - JSX 코드 내용 수정
        - 받음 영역
          - `receiverRequests.length`를 확인해 존재할 때만 받음 영역에서 받은 요청 갯수와 받은 요청 목록이 보여지도록 구성
          - friendRequestId props는 friendRequestId 항목이 아닌 id 항목을 전달하도록 수정
        - 보냄 영역
          - `sentRequests.length`를 확인해 존재할 때만 보냄 영역에서 보낸 요청 갯수와 보낸 요청 목록이 보여지도록 구성
          - friendRequestId props는 friendRequestId 항목이 아닌 id 항목을 전달하도록 수정
    - PendingFriends
      - 주석 처리하고 사용하지 않던 내용 삭제
        - useAuthStore Zustand, 여러 타입 정의 내용, props 내용, sendRequest 변수, JSX 코드 내용
  - 검색한 친구 요청 목록을 받은 요청 목록과 보낸 요청 목록으로 완전히 분리해 저장하고 받음 영역과 보냄 영역에서 출력되도록 구성해 확인한 결과, 받음 영역에서는 받은 요청 목록만 보여지고 보냄 영역에서는 보낸 요청 목록만 보여져 확실하게 영역별로 나뉘어 출력되는 것을 확인할 수 있었다.
    - 친구 요청이 있을 경우 홈 버튼에서 친구 요청 수가 문제없이 보여지긴 하지만, 보낸 친구 요청까지 포함해서 보여지기 때문에 보낸 요청과 받은 요청을 나눠서 받은 요청 관련 수만 보여지고, 보낸 요청은 포함되지 않도록 수정이 필요함
    - 친구 버튼과 대기중 내용에서 받은 요청과 보낸 요청을 나눠서 받은 요청 수만 보여지도록 수정 필요
    - 대기중 내용에서 보여지는 친구 요청 수가 일반적인 텍스트가 아닌, 뱃지 형태로 보이도록 수정 필요
    - 대기중 내용이 항상 표시되는 것이 아닌, 친구 요청이 있을 경우에만 대기중 버튼과 뱃지 내용이 보여지도록 수정 필요
    - 친구 추가 관련 내용에 대한 CSS를 추가해야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/19f114f8b5ee34ff61ab97b68dc293974c2b2198)

<br />

- 대기중 버튼 조건부 추가 및 받은 요청 수 출력 및 검색 관련된 내용에 조건부 추가 및 대기중인 친구 관련된 내용에 조건부 추가
  - 대기중 버튼에 친구 요청 목록 수를 조건부로 추가해 친구 요청이 있을 경우에만 대기중 버튼이 보여지도록 구성하고, 대기중 내용에서 남아있는 모든 친구 요청을 처리하면 검색창이 사라져 안보이고 대신 텍스트로 안내 문구가 보여지도록 구성
  - 프론트엔드
    - Friends
      - 대기중 버튼에 조건부 추가
        - 친구 요청 목록이 최소 하나 이상 존재할 경우, 대기중 버튼이 보여지도록 구성
        - 친구 요청이 하나도 없다면 대기중 버튼은 보여지지 않음
        - 대기중 버튼 옆에 전체 친구 요청 목록이 아닌, 받은 친구 요청 목록 수만 보여지도록 수정
      - 검색 관련 내용에 조건부 추가
        - activeTab 내용이 pending이면서, 친구 요청 목록이 없다면 검색창이 보여지지 않도록 구성
          - `!(activeTab === "pending" && friendRequests.length === 0) && (...)`
        - 온라인, 모든 친구 내용에서는 여전히 검색창이 유지되어 보여지고 대기중 내용에서 친구 요청 목록이 있을 경우에만 검색창이 보여지도록 구성
      - JSX 코드 내용 수정
        - 친구 요청 대기중 목록 관련 내용 수정
          - 친구 요청 목록 수를 조건부로 추가해 친구 요청 목록이 없을 경우 안내 문구 내용이 보여지도록 구성
          - 친구 요청 목록이 있을 경우 이전에 구성한 받은 친구 요청과 보낸 친구 요청이 나뉘어 보여지도록 구성
  - 대기중 버튼이 친구 요청이 존재할 때만 보여지고, 대기중 버튼에서 텍스트로 보여지는 요청 수도 전체 친구 요청 수가 아닌 받은 친구 요청 수만 보여지도록 내용을 수정하고, 검색 관련 기능이 대기중 내용에서도 동일하게 보여지고 있지만 만약 대기중 내의 친구 요청 목록이 없을 경우 검색 관련 기능이 보이지 않고 안내 문구만 보여지도록 구성하고 확인한 결과, 친구 요청 목록이 없을 경우 온라인/모두/친구 추가하기 버튼만 보여지고 친구 요청을 하거나 받게될 경우 중간에 대기중 버튼까지 포함해 모두 보여지게 되었고, 대기중 내의 모든 친구 요청을 처리할 경우에는 검색창이 사라져 보이지 않고 안내 문구만 보이는 것을 확인할 수 있었다.
    - 친구 목록 컴포넌트 내에 온라인 관련 내용, 검색 관련 내용, 요청 관련 분리하는 내용 등 여러 내용이 구성되어서 조금 지저분해보이기 때문에 커스텀 훅을 추가해 따로 저장하고 깔끔하게 렌더링 관련 내용만 보여지도록 수정해봐야 함
    - 친구 요청이 있을 경우 홈 버튼에서 친구 요청 수가 문제없이 보여지긴 하지만, 보낸 친구 요청까지 포함해서 보여지기 때문에 보낸 요청과 받은 요청을 나눠서 받은 요청 관련 수만 보여지고, 보낸 요청은 포함되지 않도록 수정이 필요함
    - 친구 버튼에서 받은 요청과 보낸 요청을 나눠서 받은 요청 수만 보여지도록 수정 필요
    - 대기중 내용에서 보여지는 친구 요청 수가 일반적인 텍스트가 아닌, 뱃지 형태로 보이도록 수정 필요
    - 친구 추가 관련 내용에 대한 CSS를 추가해야 함
  - [코드 내용](https://github.com/jeongsangtae/float-chat/commit/9794e90f2f5892b9893caa4acf9477ba8cc8ae2b)

# 오늘 느낀 점

- 친구 요청 목록에서 받은 요청과 보낸 요청 영역을 확실하게 나눠서 출력되도록 구성하고, 친구 요청 목록이 없을 경우 대기중 버튼이 보여지지 않으며 대기중 버튼에서 전체 친구 요청 수가 아닌 받은 친구 요청 수만 보여지도록 수정하고, 대기중 화면에서 모든 친구 요청을 처리할 경우 검색창은 사라져 보이지 않고 안내 문구만 보여지도록 구성해주었다. 이 내용들은 현재 문제없이 모두 보여지고 있긴 하지만 하나의 컴포넌트 내에 온라인, 검색, 요청 분리 등 여러 내용이 포함되어 코드를 읽는데 불편함이 있기 때문에 관련 내용을 커스텀 훅으로 따로 구성하고 해당 컴포넌트는 렌더링에 집중하도록 수정할 생각이다. 홈 버튼과 친구 버튼에서 전체 친구 요청 수 대신 받은 친구 요청 수만 보여지도록 수정해야 하고, 대기중 내용에서 보여지는 받은 친구 요청 수가 뱃지 형태로 보이도록 CSS를 추가할 생각이다.

<br />

# 내일 할 일

- 실시간 통신 애플리케이션 (Float Chat) 프로젝트 진행

- Zustand 내용 구성

- 서브 사이드바 관련 UI 수정 필요 (친구 버튼 UI만 수정하면 될 것 같음)

- 닉네임 수정과 그룹 채팅방 제목 수정 내용에서 사용하지 않거나 필요없는 정보를 삭제해 코드 정리를 해야 함 (중복된 데이터 전송이나 사용하지 않는 데이터 전송 관련 내용 등)

- 그룹 채팅방에서 다른 사용자를 클릭할 수 있고, 클릭 시에 다이렉트 채팅방이 생성되어 채팅을 나눌 수 있도록 구성하는 것을 고려중 (이 방법 대신, 다른 사용자 클릭 시에 프로필이 보여지도록 구성하고 그 내용을 통해 다이렉트 메시지를 보내거나 프로필 내용을 보는 그런 방식으로 구성해야 함)

- 각 채팅방 내의 채팅 목록에서 커서를 올리면 보여지는 날짜 데이터가 오른쪽이 아닌, 왼쪽에 보여지도록 수정 필요

- 출력되는 채팅 메시지 목록에 스크롤 관련 내용을 추가 수정해야 함

- 채팅 입력창에 적용된 스크롤 기능 추가 수정 필요

- 다이렉트 채팅방 목록이 정렬될 때 부드럽게 위로 올라가고 내려가는 CSS 적용 필요

- 친구 삭제 시에 다이렉트 채팅방 삭제 확인 로직 필요 (친구 삭제 시에 다이렉트 채팅방을 그대로 남겨놓고 삭제 확인창은 따로 추가하지 않을 예정)

- 친구 관련된 내용에서 코드 정리 필요 (코드를 깔끔하게 보이도록 수정 필요)

- 여러 Zustand에 구성된 실시간 반영 로직들이 재사용될 수 있도록 커스텀 훅에 옮겨서 구성하는 것을 고려해야 함

<br />

# 앞으로 해야 할 일

- React, TypeScript 공부

- React 상태 관리 도구인 Zustand 공부

- 실시간 통신 애플리케이션 프로젝트 제작
